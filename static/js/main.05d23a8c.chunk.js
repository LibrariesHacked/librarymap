(this.webpackJsonplibrarymap=this.webpackJsonplibrarymap||[]).push([[0],{206:function(e){e.exports=JSON.parse('{"api":"https://api.librarydata.uk/","mobilesApi":"https://api.mobilelibraries.org/api","postcodeApi":"https://api-geography.librarydata.uk/rest/postcodes/","libraryTiles":"https://api.librarydata.uk/libraries/{z}/{x}/{y}.mvt","libraryBuildingsTiles":"https://api.librarydata.uk/libraries/buildings/{z}/{x}/{y}.mvt","libraryAuthorityTiles":"https://api-geography.librarydata.uk/rest/libraryauthorities/{z}/{x}/{y}.mvt","stopTiles":"https://api.mobilelibraries.org/api/stops/{z}/{x}/{y}.mvt","tripTiles":"https://api.mobilelibraries.org/api/trips/{z}/{x}/{y}.mvt"}')},556:function(e,t,a){e.exports=a(837)},837:function(e,t,a){"use strict";a.r(t);a(557),a(566);var r=a(0),n=a.n(r),o=a(18),i=a.n(o),l=a(36),c=a(871),s=a(549),u=a.n(s),p=a(548),m=a.n(p),d=a(171),f=a(869),b=Object(r.createContext)(),h=function(e){var t=e.reducer,a=e.initialState,o=e.children;return n.a.createElement(b.Provider,{value:Object(r.useReducer)(t,a)},o)},y=function(){return Object(r.useContext)(b)},g=Object(r.createContext)(),E=function(e){var t=e.reducer,a=e.initialState,o=e.children;return n.a.createElement(g.Provider,{value:Object(r.useReducer)(t,a)},o)},x=function(){return Object(r.useContext)(g)},O=Object(r.createContext)(),S=function(e){var t=e.reducer,a=e.initialState,o=e.children;return n.a.createElement(O.Provider,{value:Object(r.useReducer)(t,a)},o)},v=function(){return Object(r.useContext)(O)},j=a(131),k=a(23),_=a(121),C=a(46),w=a(864),L=a(26),P=a.n(L),N=a(51),T=a(490),z=a(857),I=a(863),B=a(860),D=a(859),M=a(491),Z=a(862),R=a(861),A=a(489),W=a(20),F=a(838),H=a(526),U=a.n(H),J=a(527),Y=a.n(J),q=a(180),G=a.n(q),Q=a(144),V=a(145),$=a(124),K=a.n($),X=a(294),ee=a.n(X),te=a(206),ae=function(){function e(t){Object(Q.a)(this,e),Object.assign(this,t)}return Object(V.a)(e,[{key:"fromJson",value:function(e){return this.id=e.id,this.routeIds=e.route_ids,this.routeNames=e.route_names,this.mobileIds=e.mobile_ids,this.mobileNames=e.mobile_names,this.organisationId=e.organisation_id,this.organisationName=e.organisation_name,this.name=e.name,this.community=e.community,this.address=e.address,this.postcode=e.postcode,this.arrivalTimes=e.arrival_times,this.departureTimes=e.departure_times,this.routeStart=ee()(e.route_start),this.routeEnd=ee()(e.route_end),this.routeDays=e.route_days,this.routeFrequencies=e.route_frequencies,this.routeSchedule=e.route_schedule.map((function(e){return ee()(e)})),this.timetable=e.timetable,this.longitude=e.longitude,this.latitude=e.latitude,this}}]),e}();function re(e){return ne.apply(this,arguments)}function ne(){return(ne=Object(N.a)(P.a.mark((function e(t){var a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.get(te.mobilesApi+"/stops/"+t);case 2:if(!(a=e.sent)||!a.data){e.next=7;break}return e.abrupt("return",(new ae).fromJson(a.data));case 7:return e.abrupt("return",{});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var oe=a(206),ie=Object(A.a)((function(e){return{button:{margin:e.spacing(1)},dialog:{border:"1px solid #E0E0E0"},leftIcon:{marginRight:e.spacing(1)},list:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},progress:{margin:e.spacing(2)}}}));var le=function(){var e=x(),t=Object(k.a)(e,2),a=t[0].currentStopId,o=(t[1],v()),i=Object(k.a)(o,2),l=i[0].stopDialogOpen,c=i[1],s=Object(r.useState)({}),u=Object(k.a)(s,2),p=u[0],m=u[1];Object(r.useEffect)((function(){function e(){return(e=Object(N.a)(P.a.mark((function e(t){var a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re(t);case 2:a=e.sent,m(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}null!=a&&function(t){e.apply(this,arguments)}(a)}),[a]);var d=function(){c({type:"SetStopDialog",stopDialogOpen:!1})},f=Object(W.a)(),b=ie(),h=Object(F.a)(f.breakpoints.down("sm"));return n.a.createElement(z.a,{fullScreen:h,disableBackdropClick:!0,open:l,onClose:d,"aria-labelledby":"dlg-title",BackdropProps:{invisible:!0},PaperProps:{elevation:0,className:b.dialog}},p&&p.routeDays?n.a.createElement(n.a.Fragment,null,n.a.createElement(D.a,{id:"dlg-title"},p.name+". "+p.community),n.a.createElement(B.a,null,n.a.createElement(R.a,null,p.routeSchedule&&p.routeSchedule.length>0?p.routeSchedule[0].format("dddd Do MMMM h:mma"):""),n.a.createElement("br",null),n.a.createElement(Z.a,null),n.a.createElement("br",null),n.a.createElement(T.a,{onClick:function(){return window.open(oe.api+"/stops/"+p.id+"/ics")},className:b.button,color:"primary",startIcon:n.a.createElement(U.a,null)},"Calendar"),n.a.createElement(T.a,{onClick:function(){return window.open(oe.api+"/stops/"+p.id+"/pdf","_blank")},className:b.button,color:"primary",startIcon:n.a.createElement(Y.a,null)},"Timetable"),n.a.createElement(T.a,{onClick:function(){c({type:"SetMapPosition",mapPosition:[p.longitude,p.latitude],mapZoom:14})},className:b.button,color:"primary",startIcon:n.a.createElement(G.a,null),component:_.b,to:"/map"},"Map"))):n.a.createElement(M.a,{className:b.progress,color:"primary",size:30}),n.a.createElement(I.a,null,n.a.createElement(T.a,{onClick:function(){return window.open(p.timetable,"_blank")},color:"primary"},"Website"),n.a.createElement(T.a,{onClick:function(){return d()},color:"secondary"},"Close")))},ce=a(206),se=function(){function e(t){Object(Q.a)(this,e),Object.assign(this,t)}return Object(V.a)(e,[{key:"fromJson",value:function(e){return this.localAuthority=e["Local authority"],this.localAuthorityCode=e["Local authority code"],this.name=e["Library name"],this.address1=e["Address 1"],this.address2=e["Address 2"],this.address3=e["Address 3"],this.postcode=e.Postcode,this.postcodeLongitude=e["Postcode longitude"],this.postcodeLatitude=e["Postcode latitude"],this.uprn=e["Unique property reference number"],this.uprnLongitude=e["Unique property reference number longitude"],this.uprnLongitude=e["Unique property reference number latitude"],this.statutory=e.Statutory,this.type=e["Library type"],this.yearOpened=e["Year opened"],this.yearClosed=e["Year closed"],this.mondayStaffedHours=e["Monday staffed hours"],this.tuesdayStaffedHours=e["Tuesday staffed hours"],this.wednesdayStaffedHours=e["Wednesday staffed hours"],this.thursdayStaffedHours=e["Thursday staffed hours"],this.fridayStaffedHours=e["Friday staffed hours"],this.saturdaydayStaffedHours=e["Saturday staffed hours"],this.sundayStaffedHours=e["Sunday staffed hours"],this.mondayUnstaffedHours=e["Monday unstaffed hours"],this.tuesdayUnstaffedHours=e["Tuesday unstaffed hours"],this.wednesdayUnstaffedHours=e["Wednesday unstaffed hours"],this.thursdayUnstaffedHours=e["Thursday unstaffed hours"],this.fridayUnstaffedHours=e["Friday unstaffed hours"],this.saturdaydayUnstaffedHours=e["Saturday unstaffed hours"],this.sundayUnstaffedHours=e["Sunday unstaffed hours"],this.colocated=e["Co-located"],this.colocatedWith=e["Co-located with"],this.notes=e.Notes,this.url=e.URL,this.emailAddress=e["Email address"],this.longitude=e.Longitude,this.latitude=e.Latitude,this}}]),e}();function ue(e,t,a){return pe.apply(this,arguments)}function pe(){return(pe=Object(N.a)(P.a.mark((function e(t,a,r){var n,o;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ce.api+"/libraries?page="+(t.page+1)+"&limit="+t.pageSize,t.orderBy&&t.orderBy.field&&(n=n+"&sort="+t.orderBy.field+"&direction="+t.orderDirection),a&&a.length>1&&(n=n+"&longitude="+a[0]+"&latitude="+a[1]),r&&""!==r&&(n=n+"&distance="+r),e.next=6,K.a.get(n);case 6:if(!((o=e.sent)&&o.data&&o.data.length>0)){e.next=11;break}return e.abrupt("return",{libraries:o.data.map((function(e){return(new se).fromJson(e)})),total:parseInt(o.headers["x-total-count"]),page:parseInt(o.headers["x-page"])});case 11:return e.abrupt("return",{stops:[],total:0,page:1});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(e){return de.apply(this,arguments)}function de(){return(de=Object(N.a)(P.a.mark((function e(t){var a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.get(ce.api+"/libraries/"+t);case 2:if(!(a=e.sent)||!a.data){e.next=7;break}return e.abrupt("return",(new se).fromJson(a.data));case 7:return e.abrupt("return",{});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fe=Object(A.a)((function(e){return{button:{margin:e.spacing(1)},dialog:{border:"1px solid #E0E0E0"},leftIcon:{marginRight:e.spacing(1)},list:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},progress:{margin:e.spacing(2)}}}));var be=function(){var e=x(),t=Object(k.a)(e,2),a=t[0].currentLibraryId,o=(t[1],v()),i=Object(k.a)(o,2),l=i[0].libraryDialogOpen,c=i[1],s=Object(r.useState)({}),u=Object(k.a)(s,2),p=u[0],m=u[1];Object(r.useEffect)((function(){function e(){return(e=Object(N.a)(P.a.mark((function e(t){var a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me(t);case 2:a=e.sent,m(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}null!=a&&function(t){e.apply(this,arguments)}(a)}),[a]);var d=function(){c({type:"SetLibraryDialog",libraryDialogOpen:!1})},f=Object(W.a)(),b=fe(),h=Object(F.a)(f.breakpoints.down("sm"));return n.a.createElement(z.a,{fullScreen:h,disableBackdropClick:!0,open:l,onClose:d,"aria-labelledby":"dlg-title",BackdropProps:{invisible:!0},PaperProps:{elevation:0,className:b.dialog}},p?n.a.createElement(n.a.Fragment,null,n.a.createElement(D.a,{id:"dlg-title"},"Library"),n.a.createElement(B.a,null,n.a.createElement(T.a,{onClick:function(){c({type:"SetMapPosition",mapPosition:[p.longitude,p.latitude],mapZoom:14})},className:b.button,color:"primary",startIcon:n.a.createElement(G.a,null),component:_.b,to:"/map"},"Map"))):n.a.createElement(M.a,{className:b.progress,color:"primary",size:30}),n.a.createElement(I.a,null,n.a.createElement(T.a,{onClick:function(){return window.open(p.timetable,"_blank")},color:"primary"},"Website"),n.a.createElement(T.a,{onClick:function(){return d()},color:"secondary"},"Close")))},he=a(865),ye=a(522),ge=a(355),Ee=a(867),xe=a(875),Oe=a(494),Se=a(492),ve=a(132),je=a(535),ke=a.n(je),_e=a(364),Ce=a.n(_e),we=a(531),Le=a.n(we),Pe=a(295),Ne=a.n(Pe),Te=a(533),ze=a.n(Te),Ie=a(534),Be=a.n(Ie),De=a(532),Me=a.n(De),Ze=a(279),Re=a.n(Ze),Ae=a(536),We=a.n(Ae),Fe=a(552),He=a(268),Ue=a(493),Je=a(156),Ye=a(529),qe=a.n(Ye),Ge=a(530),Qe=a.n(Ge),Ve=a(206);function $e(e){return Ke.apply(this,arguments)}function Ke(){return(Ke=Object(N.a)(P.a.mark((function e(t){var a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.get(Ve.postcodeApi+t);case 2:return a=e.sent,e.abrupt("return",{location:[a.data.longitude,a.data.latitude],organisation:a.data.library_service_name});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Xe=Object(A.a)((function(e){return{grow:{flexGrow:1},iconButton:{padding:10},inputInput:{paddingTop:e.spacing(),paddingRight:e.spacing(),paddingBottom:e.spacing(),paddingLeft:e.spacing(2),fontWeight:500},search:{position:"relative",border:"1px solid #E0E0E0",borderRadius:e.shape.borderRadius,backgroundColor:Object(Je.fade)(e.palette.common.white,.8),"&:hover":{backgroundColor:Object(Je.fade)(e.palette.common.white,.9)},marginLeft:0,marginRight:e.spacing(),display:"flex",maxWidth:240}}}));var et=function(){var e=y(),t=Object(k.a)(e,2);Object(j.a)(t[0]),t[1];var a=x(),o=Object(k.a)(a,2),i=o[0],l=i.searchType,c=i.searchPostcode,s=(i.searchDistance,o[1]),u=v(),p=Object(k.a)(u,2);Object(j.a)(p[0]);var m=p[1],d=Object(r.useState)(c),f=Object(k.a)(d,2),b=f[0],h=f[1],g=Object(r.useState)(null),E=Object(k.a)(g,2),O=E[0],S=E[1],_=function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){t.current=e})),t.current}({searchPostcode:c});Object(r.useEffect)((function(){_&&c!==_.searchPostcode&&h(c)}),[c]);var C=function(){return S(null)},w=function(e){C(),s({type:"SetSearchDistance",searchDistance:e}),"postcode"===l&&L()},L=function(){var e=Object(N.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==b){e.next=3;break}return m({type:"ShowNotification",notificationMessage:"You must enter a postcode"}),e.abrupt("return");case 3:return m({type:"LoadingPostcode"}),e.next=6,$e(b);case 6:(t=e.sent).location&&2===t.location.length?(s({type:"SetPostcodeSearch",searchPostcode:b,searchPosition:t.location}),m({type:"SetPostcodeSearch",mapPosition:t.location})):m({type:"ShowNotification",notificationMessage:"Could not find postcode"});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=Xe();return n.a.createElement("div",{className:T.search},n.a.createElement(Fe.a,{placeholder:"Postcode",classes:{input:T.inputInput},value:b,onChange:function(e){return h(e.target.value)}}),n.a.createElement("div",{className:T.grow}),"postcode"===l?n.a.createElement(Se.a,{title:"Clear search"},n.a.createElement(ge.a,{className:T.iconButton,onClick:function(){return s({type:"ClearAll"})}},n.a.createElement(qe.a,null))):null,n.a.createElement(Se.a,{title:"Search by postcode"},n.a.createElement(ge.a,{color:"primary",className:T.iconButton,onClick:function(){return L()}},n.a.createElement(Re.a,null))),n.a.createElement(Se.a,{title:"Change search settings"},n.a.createElement(ge.a,{className:T.iconButton,color:"secondary",onClick:function(e){!function(e){S(e.currentTarget)}(e)}},n.a.createElement(Qe.a,null))),n.a.createElement(He.a,{id:"mnu-settings",anchorEl:O,keepMounted:!0,open:Boolean(O),onClose:function(){return C()}},n.a.createElement(R.a,{disableSticky:!0},"Search distance"),n.a.createElement(Ue.a,{onClick:function(){return w(1609)}},"1 mile"),n.a.createElement(Ue.a,{onClick:function(){return w(4827)}},"3 miles"),n.a.createElement(Ue.a,{onClick:function(){return w(8045)}},"5 miles"),n.a.createElement(Ue.a,{onClick:function(){return w(16090)}},"10 miles"),n.a.createElement(Ue.a,{onClick:function(){return w(32180)}},"20 miles"),n.a.createElement(Ue.a,{onClick:function(){return w(80450)}},"50 miles")))},tt=Object(A.a)((function(e){return{appBar:{zIndex:e.zIndex.drawer+1,backgroundColor:"rgba(250, 250, 250, 0.8)",position:"relative"},grow:{flexGrow:1},iconTitle:{marginLeft:e.spacing(1)},progress:{margin:e.spacing(1)},tabBar:{borderTop:"1px solid #e8e8e8",borderBottom:"1px solid #e8e8e8"},title:{margin:e.spacing(2),display:"inline-block",verticalAlign:"middle"},topIcon:{backgroundColor:"rgba(250, 250, 250, 0.8)",border:"1px solid #e5e5e5","&:hover":{backgroundColor:"rgba(250, 250, 250, 0.8)"}},topTitle:{position:"relative",zIndex:e.zIndex.drawer+1}}}));var at=function(e){var t=e.loading,a=e.site,o=Object(r.useState)(!1),i=Object(k.a)(o,2),l=i[0],c=i[1],s=Object(r.useState)(a),u=Object(k.a)(s,2),p=u[0],m=u[1],d=Object(C.e)(),f=tt(),b=[{title:"Libraries at home",url:"https://www.librariesathome.co.uk",icon:n.a.createElement(Le.a,null),links:[{title:n.a.createElement("span",{className:f.iconTitle},"Search"),short:n.a.createElement("span",{className:f.iconTitle},"Search"),icon:n.a.createElement(Re.a,null),to:"/"},{title:n.a.createElement("span",{className:f.iconTitle},"Watch"),short:n.a.createElement("span",{className:f.iconTitle},"Watch"),icon:n.a.createElement(Me.a,null),to:"/watch"},{title:n.a.createElement("span",{className:f.iconTitle},"Read"),short:n.a.createElement("span",{className:f.iconTitle},"Read"),icon:n.a.createElement(ze.a,null),to:"/read"},{title:n.a.createElement("span",{className:f.iconTitle},"Listen"),short:n.a.createElement("span",{className:f.iconTitle},"Listen"),icon:n.a.createElement(Be.a,null),to:"/listen"}]},{title:"Mobile libraries",url:"https://www.mobilelibraries.org",icon:n.a.createElement(Ce.a,null),links:[{title:n.a.createElement("span",{className:f.iconTitle},"Mobile vans"),short:n.a.createElement("span",{className:f.iconTitle},"Vans"),icon:n.a.createElement(Ce.a,null),to:"/"},{title:n.a.createElement("span",{className:f.iconTitle},"Stop locations"),short:n.a.createElement("span",{className:f.iconTitle},"Stops"),icon:n.a.createElement(G.a,null),to:"/stops"},{title:n.a.createElement("span",{className:f.iconTitle},"Map"),short:n.a.createElement("span",{className:f.iconTitle},"Map"),icon:n.a.createElement(Ne.a,null),to:"/map"}]},{title:"Library map",url:"https://www.librarymap.co.uk",icon:n.a.createElement(Ne.a,null),links:[{title:n.a.createElement("span",{className:f.iconTitle},"Libraries"),short:n.a.createElement("span",{className:f.iconTitle},"Libraries"),icon:n.a.createElement(ke.a,null),to:"/"},{title:n.a.createElement("span",{className:f.iconTitle},"Library map"),short:n.a.createElement("span",{className:f.iconTitle},"Map"),icon:n.a.createElement(Ne.a,null),to:"/map"}]}];return n.a.createElement(n.a.Fragment,null,n.a.createElement(w.a,{maxWidth:"lg",className:f.topTitle},n.a.createElement(ge.a,{className:f.topIcon,color:"primary",onClick:function(){c(!l),m(a)}},n.a.createElement(We.a,null)),n.a.createElement(ve.a,{color:"secondary",variant:"h6",component:"h1",className:f.title},b[a].title)),l?n.a.createElement(he.a,{position:"static",color:"default",elevation:0,className:f.appBar},n.a.createElement(w.a,{maxWidth:"lg"},n.a.createElement(xe.a,{className:f.tabBar,value:p,onChange:function(e,t){m(t)},variant:"scrollable",scrollButtons:"on",indicatorColor:"primary",textColor:"primary"},b.map((function(e,t){return n.a.createElement(Ee.a,{key:"tb_site_"+t,label:e.title,icon:e.icon})}))))):null,n.a.createElement(he.a,{position:"static",color:"inherit",elevation:0,className:f.appBar},n.a.createElement(w.a,{maxWidth:"lg"},n.a.createElement(Oe.a,null,n.a.createElement(ye.a,{smUp:!0},b[p].links.map((function(e,t){return n.a.createElement(Se.a,{title:e.title,key:"icnb_menu_md_"+t},n.a.createElement(ge.a,{component:_.b,to:p===a?e.to:b[p].url+e.to,disableRipple:d.pathname===e.to,disableFocusRipple:d.pathname===e.to,color:p===a&&d.pathname===e.to?"secondary":"primary"},e.icon))}))),n.a.createElement(ye.a,{xsDown:!0,mdUp:!0},b[p].links.map((function(e,t){return n.a.createElement(Se.a,{title:e.title,key:"icnb_menu_lg_"+t},n.a.createElement(T.a,{component:_.b,to:p===a?e.to:b[p].url+e.to,disableRipple:d.pathname===e.to,disableFocusRipple:d.pathname===e.to,color:p===a&&d.pathname===e.to?"secondary":"primary",size:"large"},e.icon,e.short))}))),n.a.createElement(ye.a,{smDown:!0},b[p].links.map((function(e,t){return n.a.createElement(Se.a,{title:e.title,key:"icnb_menu_lg_"+t},n.a.createElement(T.a,{component:_.b,to:p===a?e.to:b[p].url+e.to,disableRipple:d.pathname===e.to,disableFocusRipple:d.pathname===e.to,color:p===a&&d.pathname===e.to?"secondary":"primary",size:"large"},e.icon,e.title))}))),t?n.a.createElement(M.a,{className:f.progress,color:"primary",size:30}):null,n.a.createElement("span",{className:f.grow}),"/map"===d.pathname?n.a.createElement(et,null):null))))},rt=a(183),nt=a(356),ot=a.n(nt),it=a(544),lt=a.n(it),ct=a(543),st=a.n(ct),ut=a(542),pt=a.n(ut),mt=a(540),dt=a.n(mt),ft=a(539),bt=a.n(ft),ht=a(541),yt=a.n(ht),gt=Object(A.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:200},margin:{margin:e.spacing(1)},root:{flexGrow:1,maxWidth:"100%"},table:{backgroundColor:"rgba(0, 0, 0, 0)",border:"1px solid #E0E0E0"}}}));var Et=function(){var e=x(),t=Object(k.a)(e,2),a=t[0],o=(a.searchType,a.searchPostcode,a.searchDistance),i=a.searchPosition,l=(t[1],v()),c=Object(k.a)(l,2);Object(j.a)(c[0]),c[1];var s=n.a.createRef();Object(r.useEffect)((function(){s.current.onQueryChange()}),[i,o]);var u=gt(),p=Object(W.a)();return n.a.createElement("div",{style:{maxWidth:"100%"}},n.a.createElement(R.a,{disableSticky:!0},"Libraries"),n.a.createElement(ot.a,{tableRef:s,components:{Container:function(e){return n.a.createElement(rt.a,Object.assign({},e,{elevation:0,className:u.table}))}},icons:{Filter:bt.a,FirstPage:dt.a,LastPage:yt.a,NextPage:pt.a,PreviousPage:st.a,SortArrow:lt.a},options:{padding:Object(F.a)(p.breakpoints.up("sm"))?"default":"dense",search:!1,loadingType:"overlay",actionsColumnIndex:0,filtering:!1,toolbar:!1,headerStyle:{backgroundColor:"#fafafa",color:"#737373",border:"0px"}},columns:[{title:"Service",field:"localAuthority",filtering:!1,hidden:!1,cellStyle:{borderBottom:"1px solid #f5f5f5",backgroundColor:"#ffffff"}},{title:"Name",field:"name",filtering:!1,hidden:!1,cellStyle:{borderBottom:"1px solid #f5f5f5",backgroundColor:"#ffffff"}},{title:"Type",field:"type",filtering:!1,hidden:!1,cellStyle:{borderBottom:"1px solid #f5f5f5",backgroundColor:"#ffffff"}},{title:"Closed",field:"yearClosed",filtering:!1,hidden:!1,cellStyle:{borderBottom:"1px solid #f5f5f5",backgroundColor:"#ffffff"}},{title:"Co-located with",field:"colocatedWith",filtering:!1,hidden:!1,cellStyle:{borderBottom:"1px solid #f5f5f5",backgroundColor:"#ffffff"}}],data:function(e){return new Promise((function(t,a){function r(){return(r=Object(N.a)(P.a.mark((function a(){var r;return P.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ue(e,i,o);case 2:r=a.sent,t({data:r.libraries,page:r.page-1,totalCount:r.total});case 4:case"end":return a.stop()}}),a)})))).apply(this,arguments)}!function(){r.apply(this,arguments)}()}))}}))},xt=a(872),Ot=a(42),St=a(546),vt=a.n(St),jt=a(876),kt=a(545),_t=a.n(kt),Ct=Object(A.a)((function(e){return{avatar:{margin:0},avatarOn:{margin:0,cursor:"pointer",backgroundColor:e.palette.primary.main}}}));var wt=function(){var e=x(),t=Object(k.a)(e,1)[0].searchType,a=Ct();return n.a.createElement(Se.a,{title:"Me"},n.a.createElement(jt.a,{className:"gps"===t?a.avatarOn:a.avatar},n.a.createElement(_t.a,null)))},Lt=a(508),Pt=a(874),Nt=Object(A.a)((function(){return{dialog:{border:"1px solid #E0E0E0"}}}));var Tt=function(){var e=v(),t=Object(k.a)(e,2),a=t[0],r=a.mapSettings,o=a.mapSettingsDialogOpen,i=t[1],l=function(){i({type:"SetMapSettingsDialog",mapSettingsDialogOpen:!1})},c=Nt(),s=Object(W.a)(),u=Object(F.a)(s.breakpoints.down("sm"));return n.a.createElement(z.a,{fullScreen:u,disableBackdropClick:!0,open:o,onClose:l,BackdropProps:{invisible:!0},PaperProps:{elevation:0,className:c.dialog}},n.a.createElement(D.a,null,"Map settings"),n.a.createElement(B.a,null,n.a.createElement(Lt.a,{control:n.a.createElement(Pt.a,{checked:r.authorityBoundary,onChange:function(){i({type:"ToggleMapSetting",mapSetting:"authorityBoundary"})},name:"sw_authority_boundary",color:"primary"}),label:"Library service boundaries"})),n.a.createElement(I.a,null,n.a.createElement(T.a,{onClick:l,color:"secondary"},"Close")))},zt=Object(A.a)((function(e){return{settings:{position:"absolute",bottom:e.spacing(4),right:e.spacing(4)}}})),It=a(206),Bt=Object(Ot.e)({minZoom:5,maxZoom:18,customAttribution:"Contains public sector information licensed under the Open Government Licence"}),Dt=[It.libraryTiles],Mt=[It.libraryBuildingsTiles],Zt=[It.libraryAuthorityTiles],Rt=[It.stopTiles],At=[It.tripTiles];var Wt=function(){var e=y(),t=Object(k.a)(e,2);Object(j.a)(t[0]),t[1];var a=x(),o=Object(k.a)(a,2),i=o[0],l=i.searchType,c=i.searchPosition,s=o[1],u=v(),p=Object(k.a)(u,2),m=p[0],d=m.mapZoom,f=m.mapPosition,b=m.mapSettings,h=m.mapSettingsDialogOpen,g=p[1],E=function(){};Object(r.useEffect)((function(){}),[]);var O=function(e){e&&e.features&&e.features.length>0&&e.features[0].properties&&(s({type:"SetCurrentStop",stopId:e.features[0].properties.id}),g({type:"SetStopDialog",stopDialogOpen:!0}))},S=zt();return n.a.createElement(n.a.Fragment,null,n.a.createElement(Bt,{style:"style.json",center:f,zoom:d,maxZoom:18,pitch:[0],bearing:[0],fitBounds:null,containerStyle:{top:0,bottom:0,right:0,left:0,height:"100vh",width:"100vw",position:"absolute"}},n.a.createElement(Ot.c,{id:"src_libraries_buildings",tileJsonSource:{type:"vector",tiles:Mt}}),n.a.createElement(Ot.a,{id:"lyr_library_buildings_lines",type:"line",sourceId:"src_libraries_buildings",sourceLayer:"library_buildings",minZoom:15,layout:{"line-join":"round","line-cap":"square"},paint:{"line-color":"#455a64","line-opacity":1,"line-width":["interpolate",["linear"],["zoom"],15,3,18,4]}}),n.a.createElement(Ot.a,{id:"lyr_library_buildings_fill",type:"fill",sourceId:"src_libraries_buildings",sourceLayer:"library_buildings",minZoom:15,paint:{"fill-color":"#455a64","fill-opacity":.4}}),n.a.createElement(Ot.c,{id:"src_library_authorities",tileJsonSource:{type:"vector",tiles:Zt}}),b.authorityBoundary?n.a.createElement(n.a.Fragment,null,n.a.createElement(Ot.a,{id:"lyr_library_authorities_lines",type:"line",sourceId:"src_library_authorities",sourceLayer:"library_authority_boundaries",minZoom:6,layout:{"line-join":"round","line-cap":"square"},paint:{"line-color":"#a7a39b","line-opacity":1,"line-width":["interpolate",["linear"],["zoom"],6,1,18,4]}}),n.a.createElement(Ot.a,{id:"lyr_library_authorities_fill",type:"fill",sourceId:"src_library_authorities",sourceLayer:"library_authority_boundaries",minZoom:6,paint:{"fill-color":"#ccc","fill-opacity":.1}})):null,n.a.createElement(Ot.c,{id:"src_trips",tileJsonSource:{type:"vector",tiles:At}}),n.a.createElement(Ot.a,{id:"lyr_trips_lines",type:"line",sourceId:"src_trips",sourceLayer:"trip",minZoom:14,layout:{"line-join":"round","line-cap":"square"},paint:{"line-color":"#a7a39b","line-offset":["interpolate",["linear"],["zoom"],14,1,18,4],"line-opacity":1,"line-width":["interpolate",["linear"],["zoom"],14,1,18,4],"line-dasharray":[2,.5]},onClick:function(){}}),n.a.createElement(Ot.c,{id:"src_stops",tileJsonSource:{type:"vector",tiles:Rt}}),n.a.createElement(Ot.a,{id:"lyr_stops_circles",type:"circle",sourceId:"src_stops",sourceLayer:"stop",minZoom:5,layout:{},paint:{"circle-radius":["interpolate",["linear"],["zoom"],5,2,18,8],"circle-color":"#455a64","circle-stroke-width":["interpolate",["linear"],["zoom"],5,1,18,3],"circle-stroke-color":"#ffffff","circle-opacity":.5},onClick:O}),n.a.createElement(Ot.a,{id:"lyr_stops_labels",type:"symbol",sourceId:"src_stops",sourceLayer:"stop",minZoom:13,layout:{"text-ignore-placement":!1,"text-field":["concat","Mobile: ",["get","name"]],"text-font":["Source Sans Pro Bold"],"text-line-height":1,"text-size":["interpolate",["linear"],["zoom"],13,12,18,18],"text-offset":["interpolate",["linear"],["zoom"],13,["literal",[0,1.5]],18,["literal",[0,2]]]},paint:{"text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1,"text-halo-blur":1,"text-color":"#6a6f73"},onClick:O}),n.a.createElement(Ot.a,{id:"lyr_stops_next_visiting",type:"symbol",sourceId:"src_stops",sourceLayer:"stop",minZoom:14,layout:{"text-ignore-placement":!1,"text-field":["to-string",["get","next_visiting"]],"text-font":["Source Sans Pro Bold"],"text-line-height":1,"text-size":["interpolate",["linear"],["zoom"],14,10,18,16],"text-offset":["interpolate",["linear"],["zoom"],13,["literal",[0,-1.5]],18,["literal",[0,-2]]]},paint:{"text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1,"text-halo-blur":1,"text-color":"#6a6f73"},onClick:O}),n.a.createElement(Ot.c,{id:"src_libraries",tileJsonSource:{type:"vector",tiles:Dt}}),n.a.createElement(Ot.a,{id:"lyr_libraries_closed_name_labels",type:"symbol",sourceId:"src_libraries",sourceLayer:"libraries",minZoom:12,filter:["has","Year closed"],layout:{"text-ignore-placement":!1,"text-field":["to-string",["get","Library name"]],"text-font":["Source Sans Pro Bold"],"text-line-height":1,"text-size":["interpolate",["linear"],["zoom"],12,10,18,14],"text-offset":["interpolate",["linear"],["zoom"],12,["literal",[0,1.5]],18,["literal",[0,2]]]},paint:{"text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":0,"text-halo-blur":0,"text-color":"#d32f2f","text-opacity":.9},onClick:E}),n.a.createElement(Ot.a,{id:"lyr_libraries_closed_labels",type:"symbol",sourceId:"src_libraries",sourceLayer:"libraries",minZoom:12,filter:["has","Year closed"],layout:{"text-ignore-placement":!1,"text-field":["concat","Closed ",["get","Year closed"]],"text-font":["Source Sans Pro Bold"],"text-line-height":1,"text-size":["interpolate",["linear"],["zoom"],12,10,18,14],"text-offset":["interpolate",["linear"],["zoom"],12,["literal",[0,-1.5]],18,["literal",[0,-2]]]},paint:{"text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":0,"text-halo-blur":1,"text-color":"#d32f2f","text-opacity":.9},onClick:E}),n.a.createElement(Ot.a,{id:"lyr_libraries_closed_circles",type:"circle",sourceId:"src_libraries",sourceLayer:"libraries",minZoom:11,filter:["has","Year closed"],paint:{"circle-radius":["interpolate",["linear"],["zoom"],12,3,18,8],"circle-color":"#b71c1c","circle-stroke-width":["interpolate",["linear"],["zoom"],12,1,18,3],"circle-stroke-color":"#ffffff","circle-stroke-opacity":.9,"circle-opacity":.6},onClick:E}),n.a.createElement(Ot.a,{id:"lyr_libraries_open_type_labels",type:"symbol",sourceId:"src_libraries",sourceLayer:"libraries",minZoom:13,filter:["!",["has","Year closed"]],layout:{"text-ignore-placement":!1,"text-field":["match",["get","Library type"],"LAL","Local authority library","LAL-","Local authority run - unstaffed","CL","Commissioned library","CRL","Community run library","ICL","Independent community library","Unknown library"],"text-font":["Source Sans Pro Bold"],"text-line-height":1,"text-size":["interpolate",["linear"],["zoom"],13,12,18,16],"text-offset":["interpolate",["linear"],["zoom"],13,["literal",[0,-1.5]],18,["literal",[0,-2]]]},paint:{"text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1,"text-halo-blur":1,"text-color":"#6a6f73"},onClick:E}),n.a.createElement(Ot.a,{id:"lyr_libraries_open_name_labels",type:"symbol",sourceId:"src_libraries",sourceLayer:"libraries",minZoom:10,filter:["!",["has","Year closed"]],layout:{"text-ignore-placement":!1,"text-field":["to-string",["get","Library name"]],"text-font":["Source Sans Pro Bold"],"text-line-height":1,"text-size":["interpolate",["linear"],["zoom"],10,14,18,18],"text-offset":["interpolate",["linear"],["zoom"],10,["literal",[0,1.5]],18,["literal",[0,2]]]},paint:{"text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1,"text-halo-blur":1,"text-color":"#6a6f73","text-opacity":1},onClick:E}),n.a.createElement(Ot.a,{id:"lyr_libraries_open_circles",type:"circle",sourceId:"src_libraries",sourceLayer:"libraries",minZoom:5,filter:["!",["has","Year closed"]],paint:{"circle-radius":["interpolate",["linear"],["zoom"],5,3,18,12],"circle-color":["match",["get","Library type"],"LAL","#1b5e20","LAL-","#388e3c","CL","#0d47a1","CRL","#e65100","ICL","#bf360c","#bf360c"],"circle-stroke-width":["interpolate",["linear"],["zoom"],5,1,18,4],"circle-stroke-color":"#ffffff","circle-stroke-opacity":["interpolate",["linear"],["zoom"],5,.8,18,1],"circle-opacity":["interpolate",["linear"],["zoom"],5,.4,18,.9]},onClick:E}),c&&c.length>1?n.a.createElement(Ot.b,{key:"mk_me",coordinates:[c[0],c[1]]},n.a.createElement(wt,{searchType:l})):null,n.a.createElement(Ot.d,{position:"bottom-left"})),n.a.createElement(Se.a,{title:"Map settings"},n.a.createElement(xt.a,{size:"small",className:S.settings,color:"primary",style:{color:"white",border:"1px solid #FFFFFF"},onClick:function(){return g({type:"SetMapSettingsDialog",mapSettingsDialogOpen:!0})}},n.a.createElement(vt.a,null))),n.a.createElement(Tt,{mapSettings:b,mapSettingsDialogOpen:h}))},Ft=a(873),Ht=a(547),Ut=a.n(Ht);var Jt=function(){var e=v(),t=Object(k.a)(e,2),a=t[0],r=a.notificationOpen,o=a.notificationMessage,i=t[1],l=function(){i({type:"SetNotification",notificationOpen:!1})};return n.a.createElement(Ft.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:r,autoHideDuration:3e3,onClose:l,ContentProps:{"aria-describedby":"message-id"},message:n.a.createElement("span",{id:"message-id"},o),action:[n.a.createElement(ge.a,{key:"close","aria-label":"close",onClick:l},n.a.createElement(Ut.a,{color:"inherit"}))]})},Yt=Object(A.a)((function(e){return{content:{flexGrow:1,padding:e.spacing(2)},root:{flexGrow:1}}}));var qt=function(){var e=y(),t=Object(k.a)(e,2);Object(j.a)(t[0]),t[1],Object(r.useEffect)((function(){}),[]);var a=Yt();return n.a.createElement(_.a,null,n.a.createElement("div",{className:a.root},n.a.createElement(at,{loading:!1,site:2}),n.a.createElement(w.a,{maxWidth:"lg"},n.a.createElement("main",{className:a.content},n.a.createElement(C.a,{path:"/",exact:!0,render:function(){return n.a.createElement(Et,null)}}),n.a.createElement(C.a,{path:"/map",exact:!0,render:function(){return n.a.createElement(Wt,null)}}),n.a.createElement(C.a,{path:["/http:","/https:"],component:function(e){return window.location.replace(e.location.pathname.substr(1)),null}}))),n.a.createElement(Jt,null)),n.a.createElement(le,null),n.a.createElement(be,null))},Gt={},Qt=function(e,t){return t.type,e},Vt={searchPostcode:"",searchType:"",searchDistance:1609,searchPosition:[],currentStopId:null,currentLibraryId:null},$t=function(e,t){switch(t.type){case"SetCurrentStop":return Object(l.a)(Object(l.a)({},e),{},{currentStopId:t.stopId});case"SetCurrentLibrary":return Object(l.a)(Object(l.a)({},e),{},{currentLibraryId:t.libraryId});case"SetSearchDistance":return Object(l.a)(Object(l.a)({},e),{},{searchDistance:t.searchDistance});case"SetPostcodeSearch":return Object(l.a)(Object(l.a)({},e),{},{searchPostcode:t.searchPostcode,searchPosition:t.searchPosition,searchType:"postcode"});default:return e}},Kt={notificationOpen:!1,notificationMessage:"",mapZoom:[7],mapPosition:[-1.155414,52.691432],mapSettings:{authorityBoundary:!1},mapSettingsDialogOpen:!1,libraryDialogOpen:!1,stopDialogOpen:!1,loadingPostcode:!1},Xt=function(e,t){switch(t.type){case"SetNotificationMessage":return Object(l.a)(Object(l.a)({},e),{},{notificationMessage:t.notificationMessage});case"SetNotification":return Object(l.a)(Object(l.a)({},e),{},{notificationOpen:t.notificationOpen});case"ShowNotification":return Object(l.a)(Object(l.a)({},e),{},{notificationOpen:!0,notificationMessage:t.notificationMessage});case"SetStopDialog":return Object(l.a)(Object(l.a)({},e),{},{stopDialogOpen:t.stopDialogOpen});case"SetLibraryDialog":return Object(l.a)(Object(l.a)({},e),{},{libraryDialogOpen:t.libraryDialogOpen});case"SetMapSettingsDialog":return Object(l.a)(Object(l.a)({},e),{},{mapSettingsDialogOpen:t.mapSettingsDialogOpen});case"ToggleMapSetting":var a=e.mapSettings;return a[t.mapSetting]=!a[t.mapSetting],Object(l.a)(Object(l.a)({},e),{},{mapSettings:a});case"SetPostcodeSearch":return Object(l.a)(Object(l.a)({},e),{},{loadingPostcode:!1,mapPosition:t.mapPosition,mapZoom:[13]});case"SetMapPosition":return Object(l.a)(Object(l.a)({},e),{},{mapPosition:t.mapPosition,mapZoom:[t.mapZoom]});default:return e}},ea=Object(d.a)({palette:{primary:{main:m.a[800]},secondary:{main:u.a[700]}},overrides:{MuiButton:{text:{textTransform:"none"}},MuiTab:{root:{textTransform:"none"}},MuiTableCell:{root:{borderBottom:"none"}}}});var ta=function(){return n.a.createElement(h,{initialState:Gt,reducer:Qt},n.a.createElement(E,{initialState:Vt,reducer:$t},n.a.createElement(S,{initialState:Kt,reducer:Xt},n.a.createElement(f.a,{theme:ea},n.a.createElement(c.a,null),n.a.createElement(qt,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(ta,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[556,1,2]]]);
//# sourceMappingURL=main.05d23a8c.chunk.js.map