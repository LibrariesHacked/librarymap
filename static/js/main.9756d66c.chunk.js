(this.webpackJsonplibrarymap=this.webpackJsonplibrarymap||[]).push([[0],{169:function(e){e.exports=JSON.parse('{"api":"https://api.librarydata.uk","mobilesApi":"https://api.mobilelibraries.org/api","isochroneApi":"https://api-geography.librarydata.uk/rest/routing/isochrone/","postcodeApi":"https://api-geography.librarydata.uk/rest/postcodes/","libraryTiles":"https://api.librarydata.uk/libraries/{z}/{x}/{y}.mvt","libraryBuildingsTiles":"https://api.librarydata.uk/libraries/buildings/{z}/{x}/{y}.mvt","libraryAuthorityTiles":"https://api-geography.librarydata.uk/rest/libraryauthorities/{z}/{x}/{y}.mvt","stopTiles":"https://api.mobilelibraries.org/api/stops/{z}/{x}/{y}.mvt","tripTiles":"https://api.mobilelibraries.org/api/trips/{z}/{x}/{y}.mvt"}')},526:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=526},560:function(e,t,a){e.exports=a(842)},842:function(e,t,a){"use strict";a.r(t);a(561),a(570);var r=a(0),n=a.n(r),o=a(18),i=a.n(o),l=a(22),c=a(880),s=a(553),u=a.n(s),p=a(552),d=a.n(p),m=a(174),f=a(878),b=Object(r.createContext)(),h=function(e){var t=e.reducer,a=e.initialState,o=e.children;return n.a.createElement(b.Provider,{value:Object(r.useReducer)(t,a)},o)},y=function(){return Object(r.useContext)(b)},g=Object(r.createContext)(),E=function(e){var t=e.reducer,a=e.initialState,o=e.children;return n.a.createElement(g.Provider,{value:Object(r.useReducer)(t,a)},o)},x=function(){return Object(r.useContext)(g)},O=Object(r.createContext)(),v=function(e){var t=e.reducer,a=e.initialState,o=e.children;return n.a.createElement(O.Provider,{value:Object(r.useReducer)(t,a)},o)},S=function(){return Object(r.useContext)(O)},k=a(271),j=a(21),C=a(124),w=a(47),_=a(869),P=a(20),L=a.n(P),N=a(40),I=a(498),M=a(862),T=a(868),B=a(865),z=a(864),D=a(499),A=a(867),R=a(866),Z=a(497),F=a(23),W=a(843),H=a(534),U=a.n(H),J=a(535),Y=a.n(J),q=a(183),G=a.n(q),Q=a(120),$=a(121),V=a(101),K=a.n(V),X=a(134),ee=a.n(X),te=a(169),ae=function(){function e(t){Object(Q.a)(this,e),Object.assign(this,t)}return Object($.a)(e,[{key:"fromJson",value:function(e){return this.id=e.id,this.routeIds=e.route_ids,this.routeNames=e.route_names,this.mobileIds=e.mobile_ids,this.mobileNames=e.mobile_names,this.organisationId=e.organisation_id,this.organisationName=e.organisation_name,this.name=e.name,this.community=e.community,this.address=e.address,this.postcode=e.postcode,this.arrivalTimes=e.arrival_times,this.departureTimes=e.departure_times,this.routeStart=ee()(e.route_start),this.routeEnd=ee()(e.route_end),this.routeDays=e.route_days,this.routeFrequencies=e.route_frequencies,this.routeSchedule=e.route_schedule.map((function(e){return ee()(e)})),this.timetable=e.timetable,this.longitude=e.longitude,this.latitude=e.latitude,this}}]),e}();function re(e,t,a){return ne.apply(this,arguments)}function ne(){return(ne=Object(N.a)(L.a.mark((function e(t,a,r){var n,o;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=te.mobilesApi+"/stops?page="+(t.page+1)+"&limit="+t.pageSize,t.orderBy&&t.orderBy.field&&(n=n+"&sort="+t.orderBy.field+"&direction="+t.orderDirection),a&&a.length>1&&(n=n+"&longitude="+a[0]+"&latitude="+a[1]),r&&""!==r&&(n=n+"&distance="+r),e.next=6,K.a.get(n);case 6:if(!((o=e.sent)&&o.data&&o.data.length>0)){e.next=11;break}return e.abrupt("return",{stops:o.data.map((function(e){return(new ae).fromJson(e)})),total:parseInt(o.headers["x-total-count"]),page:parseInt(o.headers["x-page"])});case 11:return e.abrupt("return",{stops:[],total:0,page:1});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e){return ie.apply(this,arguments)}function ie(){return(ie=Object(N.a)(L.a.mark((function e(t){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.get(te.mobilesApi+"/stops/"+t);case 2:if(!(a=e.sent)||!a.data){e.next=7;break}return e.abrupt("return",(new ae).fromJson(a.data));case 7:return e.abrupt("return",{});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var le=a(169),ce=Object(Z.a)((function(e){return{button:{margin:e.spacing(1)},dialog:{border:"1px solid #E0E0E0"},leftIcon:{marginRight:e.spacing(1)},list:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},progress:{margin:e.spacing(2)}}}));var se=function(){var e=x(),t=Object(j.a)(e,2),a=t[0].currentStopId,o=(t[1],S()),i=Object(j.a)(o,2),l=i[0].stopDialogOpen,c=i[1],s=Object(r.useState)({}),u=Object(j.a)(s,2),p=u[0],d=u[1];Object(r.useEffect)((function(){function e(){return(e=Object(N.a)(L.a.mark((function e(t){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe(t);case 2:a=e.sent,d(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}null!=a&&function(t){e.apply(this,arguments)}(a)}),[a]);var m=function(){c({type:"SetStopDialog",stopDialogOpen:!1})},f=Object(F.a)(),b=ce(),h=Object(W.a)(f.breakpoints.down("sm"));return n.a.createElement(M.a,{fullScreen:h,disableBackdropClick:!0,open:l,onClose:m,"aria-labelledby":"dlg-title",BackdropProps:{invisible:!0},PaperProps:{elevation:0,className:b.dialog}},p&&p.routeDays?n.a.createElement(n.a.Fragment,null,n.a.createElement(z.a,{id:"dlg-title"},p.name+". "+p.community),n.a.createElement(B.a,null,n.a.createElement(R.a,null,p.routeSchedule&&p.routeSchedule.length>0?p.routeSchedule[0].format("dddd Do MMMM h:mma"):""),n.a.createElement("br",null),n.a.createElement(A.a,null),n.a.createElement("br",null),n.a.createElement(I.a,{onClick:function(){return window.open(le.api+"/stops/"+p.id+"/ics")},className:b.button,color:"primary",startIcon:n.a.createElement(U.a,null)},"Calendar"),n.a.createElement(I.a,{onClick:function(){return window.open(le.api+"/stops/"+p.id+"/pdf","_blank")},className:b.button,color:"primary",startIcon:n.a.createElement(Y.a,null)},"Timetable"),n.a.createElement(I.a,{onClick:function(){c({type:"SetMapPosition",mapPosition:[p.longitude,p.latitude],mapZoom:14})},className:b.button,color:"primary",startIcon:n.a.createElement(G.a,null),component:C.b,to:"/map"},"Map"))):n.a.createElement(D.a,{className:b.progress,color:"primary",size:30}),n.a.createElement(T.a,null,n.a.createElement(I.a,{onClick:function(){return window.open(p.timetable,"_blank")},color:"primary"},"Website"),n.a.createElement(I.a,{onClick:function(){return m()},color:"secondary"},"Close")))},ue=a(169),pe={LAL:"Local authority library"},de=function(){function e(t){Object(Q.a)(this,e),Object.assign(this,t)}return Object($.a)(e,[{key:"fromJson",value:function(e){return this.localAuthority=e["Local authority"],this.localAuthorityCode=e["Local authority code"],this.name=e["Library name"],this.address1=e["Address 1"],this.address2=e["Address 2"],this.address3=e["Address 3"],this.postcode=e.Postcode,this.postcodeLongitude=e["Postcode longitude"],this.postcodeLatitude=e["Postcode latitude"],this.uprn=e["Unique property reference number"],this.uprnLongitude=e["Unique property reference number longitude"],this.uprnLongitude=e["Unique property reference number latitude"],this.statutory=e.Statutory,this.type=e["Library type"],this.typeDescription=pe[e["Library type"]],this.yearOpened=e["Year opened"],this.yearClosed=e["Year closed"],this.mondayStaffedHours=e["Monday staffed hours"],this.tuesdayStaffedHours=e["Tuesday staffed hours"],this.wednesdayStaffedHours=e["Wednesday staffed hours"],this.thursdayStaffedHours=e["Thursday staffed hours"],this.fridayStaffedHours=e["Friday staffed hours"],this.saturdaydayStaffedHours=e["Saturday staffed hours"],this.sundayStaffedHours=e["Sunday staffed hours"],this.mondayUnstaffedHours=e["Monday unstaffed hours"],this.tuesdayUnstaffedHours=e["Tuesday unstaffed hours"],this.wednesdayUnstaffedHours=e["Wednesday unstaffed hours"],this.thursdayUnstaffedHours=e["Thursday unstaffed hours"],this.fridayUnstaffedHours=e["Friday unstaffed hours"],this.saturdaydayUnstaffedHours=e["Saturday unstaffed hours"],this.sundayUnstaffedHours=e["Sunday unstaffed hours"],this.colocated=e["Co-located"],this.colocatedWith=e["Co-located with"],this.notes=e.Notes,this.url=e.URL,this.emailAddress=e["Email address"],this.longitude=e.Longitude,this.latitude=e.Latitude,this}}]),e}();function me(e,t,a){return fe.apply(this,arguments)}function fe(){return(fe=Object(N.a)(L.a.mark((function e(t,a,r){var n,o;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ue.api+"/libraries?page="+(t.page+1)+"&limit="+t.pageSize,t.orderBy&&t.orderBy.field&&(n=n+"&sort="+t.orderBy.field+"&direction="+t.orderDirection),a&&a.length>1&&(n=n+"&longitude="+a[0]+"&latitude="+a[1]),r&&""!==r&&(n=n+"&distance="+r),e.next=6,K.a.get(n);case 6:if(!((o=e.sent)&&o.data&&o.data.length>0)){e.next=11;break}return e.abrupt("return",{libraries:o.data.map((function(e){return(new de).fromJson(e)})),total:parseInt(o.headers["x-total-count"]),page:parseInt(o.headers["x-page"])});case 11:return e.abrupt("return",{libraries:[],total:0,page:1});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(e){return he.apply(this,arguments)}function he(){return(he=Object(N.a)(L.a.mark((function e(t){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.get(ue.api+"/libraries/"+t);case 2:if(!(a=e.sent)||!a.data){e.next=7;break}return e.abrupt("return",(new de).fromJson(a.data));case 7:return e.abrupt("return",{});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ye=Object(Z.a)((function(e){return{button:{margin:e.spacing(1)},dialog:{border:"1px solid #E0E0E0"},leftIcon:{marginRight:e.spacing(1)},list:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},progress:{margin:e.spacing(2)}}}));var ge=function(){var e=x(),t=Object(j.a)(e,2),a=t[0].currentLibraryId,o=(t[1],S()),i=Object(j.a)(o,2),l=i[0].libraryDialogOpen,c=i[1],s=Object(r.useState)({}),u=Object(j.a)(s,2),p=u[0],d=u[1];Object(r.useEffect)((function(){function e(){return(e=Object(N.a)(L.a.mark((function e(t){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be(t);case 2:a=e.sent,d(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}null!=a&&function(t){e.apply(this,arguments)}(a)}),[a]);var m=function(){c({type:"SetLibraryDialog",libraryDialogOpen:!1})},f=Object(F.a)(),b=ye(),h=Object(W.a)(f.breakpoints.down("sm"));return n.a.createElement(M.a,{fullScreen:h,disableBackdropClick:!0,open:l,onClose:m,"aria-labelledby":"dlg-title",BackdropProps:{invisible:!0},PaperProps:{elevation:0,className:b.dialog}},p?n.a.createElement(n.a.Fragment,null,n.a.createElement(z.a,{id:"dlg-title"},"Library"),n.a.createElement(B.a,null,n.a.createElement(I.a,{onClick:function(){c({type:"SetMapPosition",mapPosition:[p.longitude,p.latitude],mapZoom:14})},className:b.button,color:"primary",startIcon:n.a.createElement(G.a,null),component:C.b,to:"/map"},"Map"))):n.a.createElement(D.a,{className:b.progress,color:"primary",size:30}),n.a.createElement(T.a,null,n.a.createElement(I.a,{onClick:function(){return window.open(p.timetable,"_blank")},color:"primary"},"Website"),n.a.createElement(I.a,{onClick:function(){return m()},color:"secondary"},"Close")))},Ee=a(870),xe=a(530),Oe=a(364),ve=a(872),Se=a(881),ke=a(502),je=a(500),Ce=a(135),we=a(543),_e=a.n(we),Pe=a(372),Le=a.n(Pe),Ne=a(539),Ie=a.n(Ne),Me=a(302),Te=a.n(Me),Be=a(541),ze=a.n(Be),De=a(542),Ae=a.n(De),Re=a(540),Ze=a.n(Re),Fe=a(281),We=a.n(Fe),He=a(544),Ue=a.n(He),Je=a(556),Ye=a(269),qe=a(501),Ge=a(156),Qe=a(537),$e=a.n(Qe),Ve=a(538),Ke=a.n(Ve),Xe=a(169);function et(e){return tt.apply(this,arguments)}function tt(){return(tt=Object(N.a)(L.a.mark((function e(t){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.get(Xe.postcodeApi+t);case 2:return a=e.sent,e.abrupt("return",{location:[a.data.longitude,a.data.latitude],organisation:a.data.library_service_name});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var at=Object(Z.a)((function(e){return{grow:{flexGrow:1},iconButton:{padding:10},inputInput:{paddingTop:e.spacing(),paddingRight:e.spacing(),paddingBottom:e.spacing(),paddingLeft:e.spacing(2),fontWeight:e.typography.fontWeightBold},search:{position:"relative",border:"1px solid #E0E0E0",borderRadius:e.shape.borderRadius,backgroundColor:Object(Ge.fade)(e.palette.common.white,.8),"&:hover":{backgroundColor:Object(Ge.fade)(e.palette.common.white,.9)},marginLeft:0,marginRight:e.spacing(),display:"flex",maxWidth:240}}}));var rt=function(e){var t=e.settings,a=y(),o=Object(j.a)(a,2),i=(o[0].services,o[1],x()),l=Object(j.a)(i,2),c=l[0],s=c.searchType,u=c.searchPostcode,p=(c.searchDistance,l[1]),d=S(),m=Object(j.a)(d,2);Object(k.a)(m[0]);var f=m[1],b=Object(r.useState)(u),h=Object(j.a)(b,2),g=h[0],E=h[1],O=Object(r.useState)(null),v=Object(j.a)(O,2),C=v[0],w=v[1],_=function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){t.current=e})),t.current}({searchPostcode:u});Object(r.useEffect)((function(){_&&u!==_.searchPostcode&&E(u)}),[u]);var P=function(){return w(null)},I=function(e){P(),p({type:"SetSearchDistance",searchDistance:e}),"postcode"===s&&M()},M=function(){var e=Object(N.a)(L.a.mark((function e(){var t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f({type:"ToggleLoadingPostcode"}),""!==g){e.next=4;break}return f({type:"ShowNotification",notificationMessage:"You must enter a postcode"}),e.abrupt("return");case 4:if(f({type:"LoadingPostcode"}),!function(e){return/^[A-Z]{1,2}\d[A-Z\d]? ?\d[A-Z]{2}$/.test(e)}(g.trim())){e.next=13;break}return e.next=9,et(g.trim());case 9:t=e.sent,p({type:"SetPostcodeSearch",searchPostcode:g,searchPosition:t.location}),e.next=14;break;case 13:f({type:"ShowNotification",notificationMessage:"Could not find postcode"});case 14:f({type:"ToggleLoadingPostcode"});case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=at();return n.a.createElement("div",{className:T.search},n.a.createElement(Je.a,{placeholder:"Postcode",classes:{input:T.inputInput},value:g,onChange:function(e){return E(e.target.value.toUpperCase())}}),n.a.createElement("div",{className:T.grow}),"postcode"===s?n.a.createElement(je.a,{title:"Clear search"},n.a.createElement(Oe.a,{className:T.iconButton,onClick:function(){return p({type:"ClearAll"})}},n.a.createElement($e.a,null))):null,n.a.createElement(je.a,{title:"Search by postcode"},n.a.createElement(Oe.a,{color:"primary",className:T.iconButton,onClick:function(){return M()}},n.a.createElement(We.a,null))),t?n.a.createElement(je.a,{title:"Change search settings"},n.a.createElement(Oe.a,{className:T.iconButton,color:"secondary",onClick:function(e){!function(e){w(e.currentTarget)}(e)}},n.a.createElement(Ke.a,null))):null,n.a.createElement(Ye.a,{id:"mnu-settings",anchorEl:C,keepMounted:!0,open:Boolean(C),onClose:function(){return P()}},n.a.createElement(R.a,{disableSticky:!0},"Search distance"),n.a.createElement(qe.a,{onClick:function(){return I(1609)}},"1 mile"),n.a.createElement(qe.a,{onClick:function(){return I(4827)}},"3 miles"),n.a.createElement(qe.a,{onClick:function(){return I(8045)}},"5 miles"),n.a.createElement(qe.a,{onClick:function(){return I(16090)}},"10 miles"),n.a.createElement(qe.a,{onClick:function(){return I(32180)}},"20 miles"),n.a.createElement(qe.a,{onClick:function(){return I(80450)}},"50 miles")))},nt=Object(Z.a)((function(e){return{appBar:{zIndex:e.zIndex.drawer+1,backgroundColor:"rgba(250, 250, 250, 0.8)",position:"relative"},grow:{flexGrow:1},iconTitle:{marginLeft:e.spacing(1)},progress:{margin:e.spacing(1)},tabBar:{borderTop:"1px solid #e8e8e8",borderBottom:"1px solid #e8e8e8"},title:{margin:e.spacing(2),display:"inline-block",verticalAlign:"middle"},topIcon:{backgroundColor:"rgba(250, 250, 250, 0.8)",border:"1px solid #e5e5e5","&:hover":{backgroundColor:"rgba(250, 250, 250, 0.8)"}},topTitle:{position:"relative",zIndex:e.zIndex.drawer+1}}}));var ot=function(e){var t=e.loading,a=e.site,o=Object(r.useState)(!1),i=Object(j.a)(o,2),l=i[0],c=i[1],s=Object(r.useState)(a),u=Object(j.a)(s,2),p=u[0],d=u[1],m=Object(w.e)(),f=nt(),b=[{title:"Libraries at home",url:"https://www.librariesathome.co.uk",icon:n.a.createElement(Ie.a,null),links:[{title:n.a.createElement("span",{className:f.iconTitle},"Search"),short:n.a.createElement("span",{className:f.iconTitle},"Search"),icon:n.a.createElement(We.a,null),to:"/"},{title:n.a.createElement("span",{className:f.iconTitle},"Watch"),short:n.a.createElement("span",{className:f.iconTitle},"Watch"),icon:n.a.createElement(Ze.a,null),to:"/watch"},{title:n.a.createElement("span",{className:f.iconTitle},"Read"),short:n.a.createElement("span",{className:f.iconTitle},"Read"),icon:n.a.createElement(ze.a,null),to:"/read"},{title:n.a.createElement("span",{className:f.iconTitle},"Listen"),short:n.a.createElement("span",{className:f.iconTitle},"Listen"),icon:n.a.createElement(Ae.a,null),to:"/listen"}]},{title:"Mobile libraries",url:"https://www.mobilelibraries.org",icon:n.a.createElement(Le.a,null),links:[{title:n.a.createElement("span",{className:f.iconTitle},"Mobile vans"),short:n.a.createElement("span",{className:f.iconTitle},"Vans"),icon:n.a.createElement(Le.a,null),to:"/"},{title:n.a.createElement("span",{className:f.iconTitle},"Stop locations"),short:n.a.createElement("span",{className:f.iconTitle},"Stops"),icon:n.a.createElement(G.a,null),to:"/stops"},{title:n.a.createElement("span",{className:f.iconTitle},"Map"),short:n.a.createElement("span",{className:f.iconTitle},"Map"),icon:n.a.createElement(Te.a,null),to:"/map"}]},{title:"Library map",url:"https://www.librarymap.co.uk",icon:n.a.createElement(Te.a,null),links:[{title:n.a.createElement("span",{className:f.iconTitle},"Libraries"),short:n.a.createElement("span",{className:f.iconTitle},"Libraries"),icon:n.a.createElement(_e.a,null),to:"/"},{title:n.a.createElement("span",{className:f.iconTitle},"Library map"),short:n.a.createElement("span",{className:f.iconTitle},"Map"),icon:n.a.createElement(Te.a,null),to:"/map"}]}];return n.a.createElement(n.a.Fragment,null,n.a.createElement(_.a,{maxWidth:"lg",className:f.topTitle},n.a.createElement(Oe.a,{className:f.topIcon,color:"primary",onClick:function(){c(!l),d(a)}},n.a.createElement(Ue.a,null)),n.a.createElement(Ce.a,{color:"secondary",variant:"h6",component:"h1",className:f.title},b[a].title)),l?n.a.createElement(Ee.a,{position:"static",color:"default",elevation:0,className:f.appBar},n.a.createElement(_.a,{maxWidth:"lg"},n.a.createElement(Se.a,{className:f.tabBar,value:p,onChange:function(e,t){d(t)},variant:"scrollable",scrollButtons:"on",indicatorColor:"primary",textColor:"primary"},b.map((function(e,t){return n.a.createElement(ve.a,{key:"tb_site_"+t,label:e.title,icon:e.icon})}))))):null,n.a.createElement(Ee.a,{position:"static",color:"inherit",elevation:0,className:f.appBar},n.a.createElement(_.a,{maxWidth:"lg"},n.a.createElement(ke.a,null,n.a.createElement(xe.a,{smUp:!0},b[p].links.map((function(e,t){return n.a.createElement(je.a,{title:e.title,key:"icnb_menu_md_"+t},n.a.createElement(Oe.a,{component:C.b,to:p===a?e.to:b[p].url+e.to,disableRipple:m.pathname===e.to,disableFocusRipple:m.pathname===e.to,color:p===a&&m.pathname===e.to?"secondary":"primary"},e.icon))}))),n.a.createElement(xe.a,{xsDown:!0,mdUp:!0},b[p].links.map((function(e,t){return n.a.createElement(je.a,{title:e.title,key:"icnb_menu_lg_"+t},n.a.createElement(I.a,{component:C.b,to:p===a?e.to:b[p].url+e.to,disableRipple:m.pathname===e.to,disableFocusRipple:m.pathname===e.to,color:p===a&&m.pathname===e.to?"secondary":"primary",size:"large"},e.icon,e.short))}))),n.a.createElement(xe.a,{smDown:!0},b[p].links.map((function(e,t){return n.a.createElement(je.a,{title:e.title,key:"icnb_menu_lg_"+t},n.a.createElement(I.a,{component:C.b,to:p===a?e.to:b[p].url+e.to,disableRipple:m.pathname===e.to,disableFocusRipple:m.pathname===e.to,color:p===a&&m.pathname===e.to?"secondary":"primary",size:"large"},e.icon,e.title))}))),t?n.a.createElement(D.a,{className:f.progress,color:"primary",size:30}):null,n.a.createElement("span",{className:f.grow}),"/map"===m.pathname?n.a.createElement(rt,null):null))))},it=a(874),lt=a(875),ct=a(504),st=a(39),ut=a(375),pt=a.n(ut),dt=a(547),mt=a.n(dt),ft=a(546),bt=a.n(ft),ht=a(548),yt=a.n(ht),gt=a(882),Et=a(545),xt=a.n(Et),Ot=Object(Z.a)((function(e){return{avatar:{margin:0},avatarOn:{margin:0,cursor:"pointer",backgroundColor:e.palette.primary.main}}}));var vt=function(){var e=x(),t=Object(j.a)(e,1)[0].searchType,a=Ot();return n.a.createElement(je.a,{title:"Me"},n.a.createElement(gt.a,{className:"gps"===t?a.avatarOn:a.avatar},n.a.createElement(xt.a,null)))},St=a(503),kt=a(873),jt=Object(Z.a)((function(){return{dialog:{border:"1px solid #E0E0E0"}}}));var Ct=function(){var e=S(),t=Object(j.a)(e,2),a=t[0],r=a.mapSettings,o=a.mapSettingsDialogOpen,i=t[1],l=function(){i({type:"SetMapSettingsDialog",mapSettingsDialogOpen:!1})},c=jt(),s=Object(F.a)(),u=Object(W.a)(s.breakpoints.down("sm"));return n.a.createElement(M.a,{fullScreen:u,disableBackdropClick:!0,open:o,onClose:l,BackdropProps:{invisible:!0},PaperProps:{elevation:0,className:c.dialog}},n.a.createElement(z.a,null,"Map settings"),n.a.createElement(B.a,null,n.a.createElement(St.a,{control:n.a.createElement(kt.a,{checked:r.authorityBoundary,onChange:function(){i({type:"ToggleMapSetting",mapSetting:"authorityBoundary"})},name:"sw_authority_boundary",color:"primary"}),label:"Library service boundaries"})),n.a.createElement(T.a,null,n.a.createElement(I.a,{onClick:l,color:"secondary"},"Close")))},wt=a(169),_t=function(){function e(t){Object(Q.a)(this,e),Object.assign(this,t)}return Object($.a)(e,[{key:"fromJson",value:function(e,t){return this.transport=t,this.geo=e,this.display=!0,this}}]),e}();function Pt(e,t){return Lt.apply(this,arguments)}function Lt(){return(Lt=Object(N.a)(L.a.mark((function e(t,a){var r,n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wt.isochroneApi+a+"?longitude="+t[0]+"&latitude="+t[1],e.next=3,K.a.get(r);case 3:if(!(n=e.sent)||!n.data){e.next=8;break}return e.abrupt("return",(new _t).fromJson(n.data,a));case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Nt=Object(Z.a)((function(e){return{menu:{border:"1px solid #E0E0E0"},settings:{position:"absolute",bottom:e.spacing(4),right:e.spacing(4)}}})),It=a(169),Mt=Object(st.f)({minZoom:5,maxZoom:18,customAttribution:"Contains public sector information licensed under the Open Government Licence"}),Tt=[It.libraryTiles],Bt=[It.libraryBuildingsTiles],zt=[It.libraryAuthorityTiles],Dt=[It.stopTiles],At=[It.tripTiles];var Rt=function(){var e=y(),t=Object(j.a)(e,2),a=t[0].isochrones,o=t[1],i=x(),l=Object(j.a)(i,2),c=l[0],s=c.searchType,u=c.searchPosition,p=c.currentStopId,d=c.CurrentLibraryId,m=c.currentPoint,f=l[1],b=S(),h=Object(j.a)(b,2),g=h[0],E=g.mapZoom,O=g.mapPosition,v=g.mapSettings,k=g.mapSettingsDialogOpen,C=g.isochronesMenuOpen,w=g.isochronesMenuAnchor,_=h[1];Object(r.useEffect)((function(){}),[]);var P=function(e){e&&e.features&&e.features.length>0&&e.features[0].properties&&(f({type:"SetCurrentLibrary",currentLibraryId:e.features[0].properties.id,currentPoint:[e.features[0].geometry.coordinates[0].toFixed(2),e.features[0].geometry.coordinates[1].toFixed(2)]}),_({type:"SetIsochronesMenu",isochronesMenuOpen:!0,isochronesMenuAnchor:{left:e.point.x,top:e.point.y}}))},I=function(e){e&&e.features&&e.features.length>0&&e.features[0].properties&&(f({type:"SetCurrentStop",currentStopId:e.features[0].properties.id,currentPoint:[e.features[0].geometry.coordinates[0].toFixed(2),e.features[0].geometry.coordinates[1].toFixed(2)]}),_({type:"SetIsochronesMenu",isochronesMenuOpen:!0,isochronesMenuAnchor:{left:e.point.x,top:e.point.y}}))},M=function(){var e=Object(N.a)(L.a.mark((function e(t){var r;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a[m]||!a[m][t]){e.next=4;break}o({type:"SetIsochroneDisplay",point:m,transport:t,display:!a[m][t].display}),e.next=8;break;case 4:return e.next=6,Pt(m,t);case 6:r=e.sent,o({type:"AddIsochrone",point:m,transport:t,isochrone:r});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){return _({type:"SetIsochronesMenu",isochronesMenuOpen:!1,isochronesMenuAnchor:null})},B=Nt();return n.a.createElement(n.a.Fragment,null,n.a.createElement(Mt,{style:"style.json",center:O,zoom:E,maxZoom:18,pitch:[0],bearing:[0],fitBounds:null,containerStyle:{top:0,bottom:0,right:0,left:0,height:"100vh",width:"100vw",position:"absolute"}},Object.keys(a).map((function(e){return Object.keys(a[e]).filter((function(t){return a[e][t].display})).map((function(t,r){return n.a.createElement("span",{key:"sp_isotransport_"+r},n.a.createElement(st.a,{data:a[e][t].geo,fillPaint:{"fill-opacity":.1,"fill-antialias":!0,"fill-color":"#455a64"},fillOnClick:function(e){}}),n.a.createElement(st.a,{data:a[e][t].geo,linePaint:{"line-opacity":.4,"line-width":2,"line-color":"#455a64"}}),n.a.createElement(st.a,{data:a[e][t].geo,symbolLayout:{"text-field":["concat",["to-string",["/",["get","value"],60]]," mins"],"text-font":["Source Sans Pro Bold"],"symbol-placement":"line","text-allow-overlap":!1,"text-padding":2,"text-max-angle":90,"text-size":{base:1.2,stops:[[8,12],[22,30]]},"text-letter-spacing":.1},symbolPaint:{"text-halo-color":"rgba(255, 255, 255, 0.8)","text-halo-width":8,"text-halo-blur":3,"text-color":"#455a64"}}))}))})),n.a.createElement(st.d,{id:"src_libraries_buildings",tileJsonSource:{type:"vector",tiles:Bt}}),n.a.createElement(st.b,{id:"lyr_library_buildings_lines",type:"line",sourceId:"src_libraries_buildings",sourceLayer:"library_buildings",minZoom:15,layout:{"line-join":"round","line-cap":"square"},paint:{"line-color":"#455a64","line-opacity":1,"line-width":["interpolate",["linear"],["zoom"],15,3,18,4]}}),n.a.createElement(st.b,{id:"lyr_library_buildings_fill",type:"fill",sourceId:"src_libraries_buildings",sourceLayer:"library_buildings",minZoom:15,paint:{"fill-color":"#455a64","fill-opacity":.4}}),n.a.createElement(st.d,{id:"src_library_authorities",tileJsonSource:{type:"vector",tiles:zt}}),v.authorityBoundary?n.a.createElement(n.a.Fragment,null,n.a.createElement(st.b,{id:"lyr_library_authorities_lines",type:"line",sourceId:"src_library_authorities",sourceLayer:"library_authority_boundaries",minZoom:6,layout:{"line-join":"round","line-cap":"square"},paint:{"line-color":"#a7a39b","line-opacity":1,"line-width":["interpolate",["linear"],["zoom"],6,1,18,4]}}),n.a.createElement(st.b,{id:"lyr_library_authorities_fill",type:"fill",sourceId:"src_library_authorities",sourceLayer:"library_authority_boundaries",minZoom:6,paint:{"fill-color":"#ccc","fill-opacity":.1}})):null,n.a.createElement(st.d,{id:"src_trips",tileJsonSource:{type:"vector",tiles:At}}),n.a.createElement(st.b,{id:"lyr_trips_lines",type:"line",sourceId:"src_trips",sourceLayer:"trip",minZoom:14,layout:{"line-join":"round","line-cap":"square"},paint:{"line-color":"#a7a39b","line-offset":["interpolate",["linear"],["zoom"],14,1,18,4],"line-opacity":1,"line-width":["interpolate",["linear"],["zoom"],14,1,18,4],"line-dasharray":[2,.5]}}),n.a.createElement(st.d,{id:"src_stops",tileJsonSource:{type:"vector",tiles:Dt}}),n.a.createElement(st.b,{id:"lyr_stops_circles",type:"circle",sourceId:"src_stops",sourceLayer:"stop",minZoom:5,layout:{},paint:{"circle-radius":["interpolate",["linear"],["zoom"],5,2,18,8],"circle-color":"#455a64","circle-stroke-width":["interpolate",["linear"],["zoom"],5,1,18,3],"circle-stroke-color":"#ffffff","circle-opacity":.5},onClick:I}),n.a.createElement(st.b,{id:"lyr_stops_labels",type:"symbol",sourceId:"src_stops",sourceLayer:"stop",minZoom:13,layout:{"text-ignore-placement":!1,"text-field":["concat","Mobile: ",["get","name"]],"text-font":["Source Sans Pro Bold"],"text-line-height":1,"text-size":["interpolate",["linear"],["zoom"],13,12,18,18],"text-offset":["interpolate",["linear"],["zoom"],13,["literal",[0,1.5]],18,["literal",[0,2]]]},paint:{"text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1,"text-halo-blur":1,"text-color":"#6a6f73"},onClick:I}),n.a.createElement(st.b,{id:"lyr_stops_next_visiting",type:"symbol",sourceId:"src_stops",sourceLayer:"stop",minZoom:14,layout:{"text-ignore-placement":!1,"text-field":["to-string",["get","next_visiting"]],"text-font":["Source Sans Pro Bold"],"text-line-height":1,"text-size":["interpolate",["linear"],["zoom"],14,10,18,16],"text-offset":["interpolate",["linear"],["zoom"],13,["literal",[0,-1.5]],18,["literal",[0,-2]]]},paint:{"text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1,"text-halo-blur":1,"text-color":"#6a6f73"},onClick:I}),n.a.createElement(st.d,{id:"src_libraries",tileJsonSource:{type:"vector",tiles:Tt}}),n.a.createElement(st.b,{id:"lyr_libraries_closed_name_labels",type:"symbol",sourceId:"src_libraries",sourceLayer:"libraries",minZoom:12,filter:["has","Year closed"],layout:{"text-ignore-placement":!1,"text-field":["to-string",["get","Library name"]],"text-font":["Source Sans Pro Bold"],"text-line-height":1,"text-size":["interpolate",["linear"],["zoom"],12,10,18,14],"text-offset":["interpolate",["linear"],["zoom"],12,["literal",[0,1.5]],18,["literal",[0,2]]]},paint:{"text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":0,"text-halo-blur":0,"text-color":"#d32f2f","text-opacity":.9},onClick:P}),n.a.createElement(st.b,{id:"lyr_libraries_closed_labels",type:"symbol",sourceId:"src_libraries",sourceLayer:"libraries",minZoom:12,filter:["has","Year closed"],layout:{"text-ignore-placement":!1,"text-field":["concat","Closed ",["get","Year closed"]],"text-font":["Source Sans Pro Bold"],"text-line-height":1,"text-size":["interpolate",["linear"],["zoom"],12,10,18,14],"text-offset":["interpolate",["linear"],["zoom"],12,["literal",[0,-1.5]],18,["literal",[0,-2]]]},paint:{"text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":0,"text-halo-blur":1,"text-color":"#d32f2f","text-opacity":.9},onClick:P}),n.a.createElement(st.b,{id:"lyr_libraries_closed_circles",type:"circle",sourceId:"src_libraries",sourceLayer:"libraries",minZoom:11,filter:["has","Year closed"],paint:{"circle-radius":["interpolate",["linear"],["zoom"],12,3,18,8],"circle-color":"#b71c1c","circle-stroke-width":["interpolate",["linear"],["zoom"],12,1,18,3],"circle-stroke-color":"#ffffff","circle-stroke-opacity":.9,"circle-opacity":.6},onClick:P}),n.a.createElement(st.b,{id:"lyr_libraries_open_type_labels",type:"symbol",sourceId:"src_libraries",sourceLayer:"libraries",minZoom:13,filter:["!",["has","Year closed"]],layout:{"text-ignore-placement":!1,"text-field":["match",["get","Library type"],"LAL","Local authority library","LAL-","Local authority run - unstaffed","CL","Commissioned library","CRL","Community run library","ICL","Independent community library","Unknown library"],"text-font":["Source Sans Pro Bold"],"text-line-height":1,"text-size":["interpolate",["linear"],["zoom"],13,12,18,16],"text-offset":["interpolate",["linear"],["zoom"],13,["literal",[0,-1.5]],18,["literal",[0,-2]]]},paint:{"text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1,"text-halo-blur":1,"text-color":"#6a6f73"},onClick:P}),n.a.createElement(st.b,{id:"lyr_libraries_open_name_labels",type:"symbol",sourceId:"src_libraries",sourceLayer:"libraries",minZoom:10,filter:["!",["has","Year closed"]],layout:{"text-ignore-placement":!1,"text-field":["to-string",["get","Library name"]],"text-font":["Source Sans Pro Bold"],"text-line-height":1,"text-size":["interpolate",["linear"],["zoom"],10,14,18,18],"text-offset":["interpolate",["linear"],["zoom"],10,["literal",[0,1.5]],18,["literal",[0,2]]]},paint:{"text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1,"text-halo-blur":1,"text-color":"#6a6f73","text-opacity":1},onClick:P}),n.a.createElement(st.b,{id:"lyr_libraries_open_circles",type:"circle",sourceId:"src_libraries",sourceLayer:"libraries",minZoom:5,filter:["!",["has","Year closed"]],paint:{"circle-radius":["interpolate",["linear"],["zoom"],5,3,18,12],"circle-color":["match",["get","Library type"],"LAL","#1b5e20","LAL-","#388e3c","CL","#0d47a1","CRL","#e65100","ICL","#bf360c","#bf360c"],"circle-stroke-width":["interpolate",["linear"],["zoom"],5,1,18,4],"circle-stroke-color":"#ffffff","circle-stroke-opacity":["interpolate",["linear"],["zoom"],5,.8,18,1],"circle-opacity":["interpolate",["linear"],["zoom"],5,.4,18,.9]},onClick:P}),u&&u.length>1?n.a.createElement(st.c,{key:"mk_me",coordinates:[u[0],u[1]]},n.a.createElement(vt,{searchType:s})):null,n.a.createElement(st.e,{position:"bottom-left"})),n.a.createElement(je.a,{title:"Map settings"},n.a.createElement(it.a,{size:"small",className:B.settings,color:"primary",style:{color:"white",border:"1px solid #FFFFFF"},onClick:function(){return _({type:"SetMapSettingsDialog",mapSettingsDialogOpen:!0})}},n.a.createElement(pt.a,null))),n.a.createElement(Ct,{mapSettings:v,mapSettingsDialogOpen:k}),n.a.createElement(Ye.a,{id:"mnu-isochrones",anchorPosition:w,anchorReference:"anchorPosition",elevation:0,className:B.menu,keepMounted:!0,open:C,onClose:T},n.a.createElement(qe.a,{onClick:function(){T(),p&&_({type:"SetStopDialog",stopDialogOpen:!0}),d&&_({type:"SetLibraryDialog",libraryDialogOpen:!0})}},n.a.createElement(lt.a,null,n.a.createElement(pt.a,{fontSize:"small"})),n.a.createElement(ct.a,{primary:"More info"})),n.a.createElement(qe.a,{onClick:function(){return M("foot-walking")}},n.a.createElement(lt.a,null,n.a.createElement(bt.a,{fontSize:"small",color:a[m]&&a[m]["foot-walking"]&&a[m]["foot-walking"].display?"primary":"secondary"})),n.a.createElement(ct.a,{primary:"Walking distance"})),n.a.createElement(qe.a,{onClick:function(){return M("cycling-regular")}},n.a.createElement(lt.a,null,n.a.createElement(mt.a,{fontSize:"small",color:a[m]&&a[m]["cycling-regular"]&&a[m]["cycling-regular"].display?"primary":"secondary"})),n.a.createElement(ct.a,{primary:"Cycling distance"})),n.a.createElement(qe.a,{onClick:function(){return M("driving-car")}},n.a.createElement(lt.a,null,n.a.createElement(yt.a,{fontSize:"small",color:a[m]&&a[m]["driving-car"]&&a[m]["driving-car"].display?"primary":"secondary"})),n.a.createElement(ct.a,{primary:"Driving distance"}))))},Zt=a(876),Ft=a(549),Wt=a.n(Ft);var Ht=function(){var e=S(),t=Object(j.a)(e,2),a=t[0],r=a.notificationOpen,o=a.notificationMessage,i=t[1],l=function(){i({type:"SetNotification",notificationOpen:!1})};return n.a.createElement(Zt.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:r,autoHideDuration:3e3,onClose:l,ContentProps:{"aria-describedby":"message-id"},message:n.a.createElement("span",{id:"message-id"},o),action:[n.a.createElement(Oe.a,{key:"close","aria-label":"close",onClick:l},n.a.createElement(Wt.a,{color:"inherit"}))]})},Ut=a(532),Jt=a(186),Yt=a(223),qt=a.n(Yt),Gt=a(295),Qt=a.n(Gt),$t=a(294),Vt=a.n($t),Kt=a(293),Xt=a.n(Kt),ea=a(291),ta=a.n(ea),aa=a(290),ra=a.n(aa),na=a(292),oa=a.n(na);var ia=Object(Z.a)((function(e){return{hoursChip:{margin:e.spacing(1)},table:{backgroundColor:"rgba(0, 0, 0, 0)",border:"1px solid #E0E0E0"}}}));var la=function(){var e=x(),t=Object(j.a)(e,1)[0],a=t.searchDistance,o=t.searchPosition,i=n.a.createRef();Object(r.useEffect)((function(){i.current.onQueryChange()}),[o,a]);var l=ia(),c=Object(F.a)();return n.a.createElement("div",null,n.a.createElement(R.a,{disableSticky:!0},"Libraries"),n.a.createElement(qt.a,{tableRef:i,components:{Container:function(e){return n.a.createElement(Jt.a,Object.assign({},e,{elevation:0,className:l.table}))}},icons:{Filter:ra.a,FirstPage:ta.a,LastPage:oa.a,NextPage:Xt.a,PreviousPage:Vt.a,SortArrow:Qt.a},options:{padding:Object(W.a)(c.breakpoints.up("sm"))?"default":"dense",search:!1,loadingType:"overlay",actionsColumnIndex:0,filtering:!1,toolbar:!1,headerStyle:{backgroundColor:"#fafafa",color:"#737373",border:"0px"}},columns:[{title:"Name",field:"name",filtering:!1,hidden:!1,cellStyle:{borderBottom:"1px solid #f5f5f5",backgroundColor:"#ffffff"}},{title:"Service",field:"localAuthority",filtering:!1,hidden:!1,cellStyle:{borderBottom:"1px solid #f5f5f5",backgroundColor:"#ffffff"}},{title:"Address",field:"address1",filtering:!1,hidden:!1,cellStyle:{borderBottom:"1px solid #f5f5f5",backgroundColor:"#ffffff"},render:function(e){return[e.address1,e.address2,e.address3].filter(Boolean).join(", ")}},{title:"Postcode",field:"postcode",filtering:!1,hidden:!1,cellStyle:{borderBottom:"1px solid #f5f5f5",backgroundColor:"#ffffff"}},{title:"Today",field:"mondayStaffedHours",filtering:!1,hidden:!1,cellStyle:{borderBottom:"1px solid #f5f5f5",backgroundColor:"#ffffff"},render:function(e){return function(e){var t=e[ee()().format("dddd").toLowerCase()+"StaffedHours"];return t?t.split(","):[]}(e).map((function(e,t){return n.a.createElement(Ut.a,{key:"chp_"+t,color:"secondary",className:l.hoursChip,size:"small",label:e})}))}}],data:function(e){return new Promise((function(t){function r(){return(r=Object(N.a)(L.a.mark((function r(){var n;return L.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,me(e,o,a);case 2:n=r.sent,t({data:n.libraries,page:n.page-1,totalCount:n.total});case 4:case"end":return r.stop()}}),r)})))).apply(this,arguments)}!function(){r.apply(this,arguments)}()}))}}))},ca=Object(Z.a)((function(e){return{hoursChip:{margin:e.spacing(1)},table:{backgroundColor:"rgba(0, 0, 0, 0)",border:"1px solid #E0E0E0"}}}));var sa=function(){var e=x(),t=Object(j.a)(e,1)[0],a=t.searchDistance,o=t.searchPosition,i=n.a.createRef();Object(r.useEffect)((function(){i.current.onQueryChange()}),[o,a]);var l=ca(),c=Object(F.a)();return n.a.createElement("div",null,n.a.createElement(R.a,{disableSticky:!0},"Mobile library stops"),n.a.createElement(qt.a,{tableRef:i,components:{Container:function(e){return n.a.createElement(Jt.a,Object.assign({},e,{elevation:0,className:l.table}))}},icons:{Filter:ra.a,FirstPage:ta.a,LastPage:oa.a,NextPage:Xt.a,PreviousPage:Vt.a,SortArrow:Qt.a},options:{padding:Object(W.a)(c.breakpoints.up("sm"))?"default":"dense",search:!1,loadingType:"overlay",actionsColumnIndex:0,filtering:!1,toolbar:!1,headerStyle:{backgroundColor:"#fafafa",color:"#737373",border:"0px"}},columns:[{title:"Name",field:"name",filtering:!1,hidden:!1,cellStyle:{borderBottom:"1px solid #f5f5f5",backgroundColor:"#ffffff"}},{title:"Service",field:"organisationName",filtering:!1,hidden:!1,cellStyle:{borderBottom:"1px solid #f5f5f5",backgroundColor:"#ffffff"}},{title:"Community",field:"community",filtering:!1,hidden:!1,cellStyle:{borderBottom:"1px solid #f5f5f5",backgroundColor:"#ffffff"}},{title:"Address",field:"address",filtering:!1,hidden:!1,cellStyle:{borderBottom:"1px solid #f5f5f5",backgroundColor:"#ffffff"}}],data:function(e){return new Promise((function(t){function r(){return(r=Object(N.a)(L.a.mark((function r(){var n;return L.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,re(e,o,a);case 2:n=r.sent,t({data:n.stops,page:n.page-1,totalCount:n.total});case 4:case"end":return r.stop()}}),r)})))).apply(this,arguments)}!function(){r.apply(this,arguments)}()}))}}))},ua=Object(Z.a)((function(e){return{divider:{margin:e.spacing(8)},search:{alignContent:"center",textAlign:"center",display:"table",marginLeft:"auto",marginRight:"auto",marginBottom:"10px"},subtitle:{textAlign:"center",marginBottom:"5px"},title:{textAlign:"center"}}}));var pa=function(){var e=x(),t=Object(j.a)(e,1)[0].searchDistance,a=ua();return n.a.createElement("div",null,n.a.createElement(Ce.a,{component:"h2",variant:"h6",color:"secondary",className:a.title},"Your library"),n.a.createElement(Ce.a,{component:"p",variant:"body1",className:a.subtitle},"Search by postcode to find libraries within ",t/1609," mile(s)"),n.a.createElement("div",{className:a.search},n.a.createElement(rt,{settings:!0})),n.a.createElement(la,null),n.a.createElement(A.a,{className:a.divider}),n.a.createElement(sa,null))},da=Object(Z.a)((function(e){return{content:{flexGrow:1,padding:e.spacing(2)},root:{flexGrow:1}}}));var ma=function(){var e=y(),t=Object(j.a)(e,2);Object(k.a)(t[0]),t[1],Object(r.useEffect)((function(){}),[]);var a=da();return n.a.createElement(C.a,null,n.a.createElement("div",{className:a.root},n.a.createElement(ot,{loading:!1,site:2}),n.a.createElement(_.a,{maxWidth:"lg"},n.a.createElement("main",{className:a.content},n.a.createElement(w.a,{path:"/",exact:!0,render:function(){return n.a.createElement(pa,null)}}),n.a.createElement(w.a,{path:"/map",exact:!0,render:function(){return n.a.createElement(Rt,null)}}),n.a.createElement(w.a,{path:["/http:","/https:"],component:function(e){return window.location.replace(e.location.pathname.substr(1)),null}}))),n.a.createElement(Ht,null)),n.a.createElement(se,null),n.a.createElement(ge,null))},fa={isochrones:{}},ba=function(e,t){var a=e.isochrones;switch(t.type){case"AddIsochrone":return a[t.point]||(a[t.point]={}),a[t.point][t.transport]=t.isochrone,console.log(a),Object(l.a)(Object(l.a)({},e),{},{isochrones:a});case"SetIsochroneDisplay":return a[t.point][t.transport].display=t.display,Object(l.a)(Object(l.a)({},e),{},{isochrones:a});case"SetIsochroneLoading":return a[t.point]||(a[t.point]={}),a[t.point][t.transport]={geo:null,display:!1,loading:!0},Object(l.a)(Object(l.a)({},e),{},{isochrones:a});default:return e}},ha={searchPostcode:"",searchType:"",searchDistance:1609,searchPosition:[],currentStopId:null,currentLibraryId:null,currentPoint:[]},ya=function(e,t){switch(t.type){case"SetCurrentStop":return Object(l.a)(Object(l.a)({},e),{},{currentStopId:t.currentStopId,currentPoint:t.currentPoint});case"SetCurrentLibrary":return Object(l.a)(Object(l.a)({},e),{},{currentLibraryId:t.currentLibraryId,currentPoint:t.currentPoint});case"SetSearchDistance":return Object(l.a)(Object(l.a)({},e),{},{searchDistance:t.searchDistance});case"SetPostcodeSearch":return Object(l.a)(Object(l.a)({},e),{},{searchPostcode:t.searchPostcode,searchPosition:t.searchPosition,searchType:"postcode"});case"ClearAll":return Object(l.a)(Object(l.a)({},e),{},{searchPostcode:"",searchPosition:[],searchType:""});default:return e}},ga={notificationOpen:!1,notificationMessage:"",mapZoom:[7],mapPosition:[-1.155414,52.691432],mapSettings:{authorityBoundary:!1},mapSettingsDialogOpen:!1,libraryDialogOpen:!1,stopDialogOpen:!1,loadingPostcode:!1,isochronesMenuOpen:!1,isochronesMenuAnchor:null},Ea=function(e,t){switch(t.type){case"SetNotificationMessage":return Object(l.a)(Object(l.a)({},e),{},{notificationMessage:t.notificationMessage});case"SetNotification":return Object(l.a)(Object(l.a)({},e),{},{notificationOpen:t.notificationOpen});case"ShowNotification":return Object(l.a)(Object(l.a)({},e),{},{notificationOpen:!0,notificationMessage:t.notificationMessage});case"SetStopDialog":return Object(l.a)(Object(l.a)({},e),{},{stopDialogOpen:t.stopDialogOpen});case"SetLibraryDialog":return Object(l.a)(Object(l.a)({},e),{},{libraryDialogOpen:t.libraryDialogOpen});case"SetMapSettingsDialog":return Object(l.a)(Object(l.a)({},e),{},{mapSettingsDialogOpen:t.mapSettingsDialogOpen});case"ToggleMapSetting":var a=e.mapSettings;return a[t.mapSetting]=!a[t.mapSetting],Object(l.a)(Object(l.a)({},e),{},{mapSettings:a});case"SetPostcodeSearch":return Object(l.a)(Object(l.a)({},e),{},{loadingPostcode:!1,mapPosition:t.mapPosition,mapZoom:[13]});case"SetMapPosition":return Object(l.a)(Object(l.a)({},e),{},{mapPosition:t.mapPosition,mapZoom:[t.mapZoom]});case"SetIsochronesMenu":return Object(l.a)(Object(l.a)({},e),{},{isochronesMenuOpen:t.isochronesMenuOpen,isochronesMenuAnchor:t.isochronesMenuAnchor});default:return e}},xa=Object(m.a)({palette:{primary:{main:d.a[800]},secondary:{main:u.a[600]}},overrides:{MuiButton:{text:{textTransform:"none"}},MuiTab:{root:{textTransform:"none"}},MuiTableCell:{root:{borderBottom:"none"}}}});var Oa=function(){return n.a.createElement(h,{initialState:fa,reducer:ba},n.a.createElement(E,{initialState:ha,reducer:ya},n.a.createElement(v,{initialState:ga,reducer:Ea},n.a.createElement(f.a,{theme:xa},n.a.createElement(c.a,null),n.a.createElement(ma,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(Oa,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[560,1,2]]]);
//# sourceMappingURL=main.9756d66c.chunk.js.map