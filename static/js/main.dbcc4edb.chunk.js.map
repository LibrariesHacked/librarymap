{"version":3,"sources":["context/applicationState.js","context/searchState.js","context/viewState.js","models/stop.js","StopDetails.js","models/library.js","helpers/hours.js","LibraryDetails.js","helpers/geo.js","helpers/url.js","PostcodeSearch.js","AppHeader.js","Footer.js","MeAvatar.js","MapSettings.js","models/isochrone.js","LibraryMap.js","Notification.js","Libraries.js","MobileLibraries.js","ServiceFilter.js","Search.js","MarkdownPage.js","pages/data.md","models/service.js","LibraryMapApplication.js","App.js","serviceWorker.js","index.js"],"names":["ApplicationStateContext","createContext","ApplicationStateProvider","reducer","initialState","children","Provider","value","useReducer","useApplicationStateValue","useContext","SearchStateContext","SearchStateProvider","useSearchStateValue","ViewStateContext","ViewStateProvider","useViewStateValue","config","require","Stop","obj","Object","assign","this","json","id","routeIds","route_ids","routeNames","route_names","mobileIds","mobile_ids","mobileNames","mobile_names","organisationId","organisation_id","organisationName","organisation_name","name","community","address","postcode","arrivalTimes","arrival_times","departureTimes","departure_times","routeStart","moment","route_start","routeEnd","route_end","routeDays","route_days","routeFrequencies","route_frequencies","routeSchedule","route_schedule","map","s","timetable","longitude","latitude","getQueryStops","query","searchPosition","distance","serviceFilter","a","url","mobilesApi","page","pageSize","orderBy","field","orderDirection","length","join","axios","get","response","data","stops","fromJson","total","parseInt","headers","getStopById","useStyles","makeStyles","theme","button","margin","spacing","dialog","border","dialogContentActions","backgroundColor","borderRadius","padding","leftIcon","marginRight","list","width","maxWidth","palette","background","paper","progress","tablePaper","StopDetails","currentStopId","dispatchSearch","stopDialogOpen","dispatchView","useState","stop","setStop","useEffect","stopId","stopModel","stopData","getStop","close","type","currentPoint","useTheme","classes","fullScreen","useMediaQuery","breakpoints","down","Dialog","disableBackdropClick","open","onClose","aria-labelledby","BackdropProps","invisible","PaperProps","elevation","className","keys","DialogTitle","DialogContent","Typography","component","variant","ListSubheader","TableContainer","Paper","Table","size","TableHead","TableRow","TableCell","align","TableBody","rs","idx","scope","format","Button","onClick","window","color","startIcon","mapPosition","mapZoom","Link","to","CircularProgress","DialogActions","endIcon","libraryTypes","LAL","CL","CRL","IL","Library","localAuthority","localAuthorityCode","address1","address2","address3","Postcode","postcodeLongitude","postcodeLatitude","uprn","uprnLongitude","statutory","Statutory","typeDescription","yearOpened","yearClosed","mondayStaffedHours","tuesdayStaffedHours","wednesdayStaffedHours","thursdayStaffedHours","fridayStaffedHours","saturdaydayStaffedHours","sundayStaffedHours","mondayUnstaffedHours","tuesdayUnstaffedHours","wednesdayUnstaffedHours","thursdayUnstaffedHours","fridayUnstaffedHours","saturdaydayUnstaffedHours","sundayUnstaffedHours","colocated","colocatedWith","notes","Notes","URL","emailAddress","Longitude","Latitude","getQueryLibraries","closed","api","sortMappings","libraries","getLibraryById","days","getDayHours","place","day","staffedHours","unstaffedHours","staffed","split","filter","h","unstaffed","getAllHours","weeklyHours","forEach","push","table","borderColor","outline","main","LibraryDetails","currentLibraryId","libraryDialogOpen","library","setLibrary","libraryId","libraryModel","libraryData","getLibrary","l","Boolean","hoursHelper","disableSticky","getPosition","options","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","enableHighAccuracy","timeout","maximumAge","position","coords","getCurrentPostcode","lon","lat","uri","res","status","postcodes","result","console","log","getPostcode","postcodeApi","location","library_service_name","library_service","getServiceDataFromPostcode","services","postcodeData","servicesFiltered","Code","service","getNearestLibrary","libraryApi","getNearestMobileLibrary","mobileLibraryApi","validatePostcode","test","trim","clearService","history","URLSearchParams","search","delete","pathname","grow","flexGrow","iconButton","iconProgress","inputInput","paddingTop","paddingRight","paddingBottom","paddingLeft","fontWeight","typography","fontWeightBold","shape","fade","common","white","marginLeft","display","withRouter","props","settings","searchType","searchPostcode","loadingPostcode","loadingLocation","tempPostcode","setTempPostcode","anchor","setAnchor","prevProps","ref","useRef","current","usePrevious","getLocation","geoHelper","pos","getLocationPostcode","postcodeSearch","closeSettingsMenu","setSearchDistance","searchDistance","clearSearch","urlHelper","notificationMessage","notificationSeverity","InputBase","placeholder","input","onChange","e","target","toUpperCase","onKeyDown","keyCode","inputProps","Tooltip","title","IconButton","aria-label","Box","Divider","orientation","flexItem","currentTarget","openSettingsMenu","Menu","anchorEl","keepMounted","MenuItem","appBar","zIndex","drawer","appBarTransparent","topIcon","topTitle","AppHeader","site","currentServiceSystemName","appsOpen","setAppsOpen","tabValue","setTabValue","useLocation","currentServicePath","path","sites","icon","links","short","appBarClass","Toolbar","AppBar","Tabs","v","scrollButtons","indicatorColor","textColor","Tab","label","Hidden","mdUp","link","disableRipple","disableFocusRipple","smDown","root","marginTop","marginBottom","bullet","grid","loveIcon","footerText","verticalAlign","footerRight","textAlign","tapTarget","lineHeight","fontSize","Footer","Grid","container","item","xs","sm","md","lg","xl","href","avatar","avatarOn","cursor","primary","MeAvatar","Avatar","MapSettings","mapSettings","mapSettingsDialogOpen","displayClosedLibraries","closeDialog","FormControlLabel","control","Switch","checked","mapSetting","mobileLibraryStops","authorityBoundary","Isochrone","transport","geo","getIsochrone","point","travel","n","isochroneApi","interval","duration","listItemRoot","minWidth","menu","bottom","right","Map","ReactMapboxGl","minZoom","maxZoom","customAttribution","libraryTiles","libraryBuildingsTiles","libraryAuthorityTiles","stopTiles","tripTiles","LibraryMap","isochrones","dispatchApplication","currentService","mapBounds","isochronesMenuOpen","isochronesMenuAnchor","clickLibrary","features","properties","left","x","top","y","clickStop","toggleIsochrone","isochroneModel","isochrone","closeIsochronesMenu","travelIcons","style","center","zoom","pitch","bearing","fitBounds","containerStyle","height","geojson","JSON","parse","linePaint","fillPaint","t","colour","fillOnClick","symbolLayout","base","symbolPaint","tileJsonSource","tiles","sourceId","sourceLayer","layout","paint","coordinates","Fab","anchorPosition","anchorReference","dense","ListItemIcon","ListItemText","description","Notification","notificationOpen","handleClose","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","ContentProps","message","action","closedChip","Libraries","tableRef","React","createRef","onQueryChange","Checkbox","components","Container","icons","Filter","FilterList","FirstPage","LastPage","NextPage","ChevronRight","PreviousPage","ChevronLeft","SortArrow","ArrowUpward","up","loadingType","actionsColumnIndex","filtering","toolbar","headerStyle","columns","sorting","render","rowData","cellStyle","borderBottom","hidden","Chip","hours","toLowerCase","hoursUnstaffed","totalCount","getLibraries","hoursChip","MobileLibraries","stopHelper","getStops","chip","serviceLookup","serviceMenuAnchor","setServiceMenuAnchor","closeServiceMenu","chooseService","bbox","bounds","systemName","currentUrlParams","set","toString","element","onDelete","sort","b","localeCompare","code","alignContent","subtitle","Search","listItem","wordBreak","overflowX","WebkitOverflowScrolling","borderCollapse","borderSpacing","overflow","fontFamily","divider","body2","text","pxToRem","fontWeightMedium","whiteSpace","overrides","h1","gutterBottom","h2","h3","h4","paragraph","p","li","withStyles","MarkdownPage","pageText","setPageText","fetch","pageData","fetchPage","MemoMarkdownPage","memo","Service","utla19cd","utla19nm","nameWales","utla19nmw","reverse","replace","getServices","servicesApi","content","LibraryMapApplication","serviceModel","serviceSystemNameLookup","serviceName","loading","exact","Data","substr","initialApplicationState","applicationReducer","state","initialSearchState","serviceFilterBbox","serviceFilterBoundary","searchReducer","initialViewState","loadingServices","viewReducer","createMuiTheme","orange","secondary","blueGrey","MuiButton","textTransform","MuiTypography","MuiTab","App","ThemeProvider","CssBaseline","hostname","match","ReactDOM","document","getElementById","serviceWorker","ready","then","registration","unregister","catch","error"],"mappings":"msDAEaA,EAA0BC,0BAE1BC,EAA2B,SAAC,GAAD,IAAGC,EAAH,EAAGA,QAASC,EAAZ,EAAYA,aAAcC,EAA1B,EAA0BA,SAA1B,OACtC,cAACL,EAAwBM,SAAzB,CAAkCC,MAAOC,qBAAWL,EAASC,GAA7D,SACGC,KAIQI,EAA2B,kBAAMC,qBAAWV,ICR5CW,EAAqBV,0BAErBW,EAAsB,SAAC,GAAD,IAAGT,EAAH,EAAGA,QAASC,EAAZ,EAAYA,aAAcC,EAA1B,EAA0BA,SAA1B,OACjC,cAACM,EAAmBL,SAApB,CAA6BC,MAAOC,qBAAWL,EAASC,GAAxD,SACGC,KAIQQ,EAAsB,kBAAMH,qBAAWC,ICRvCG,EAAmBb,0BAEnBc,EAAoB,SAAC,GAAD,IAAGZ,EAAH,EAAGA,QAASC,EAAZ,EAAYA,aAAcC,EAA1B,EAA0BA,SAA1B,OAC/B,cAACS,EAAiBR,SAAlB,CAA2BC,MAAOC,qBAAWL,EAASC,GAAtD,SACGC,KAIQW,EAAoB,kBAAMN,qBAAWI,I,kYCP5CG,GAASC,EAAQ,KAEVC,GAAb,WACE,WAAaC,GAAM,qBACjBC,OAAOC,OAAOC,KAAMH,GAFxB,6CAKE,SAAUI,GAsBR,OArBAD,KAAKE,GAAKD,EAAKC,GACfF,KAAKG,SAAWF,EAAKG,UACrBJ,KAAKK,WAAaJ,EAAKK,YACvBN,KAAKO,UAAYN,EAAKO,WACtBR,KAAKS,YAAcR,EAAKS,aACxBV,KAAKW,eAAiBV,EAAKW,gBAC3BZ,KAAKa,iBAAmBZ,EAAKa,kBAC7Bd,KAAKe,KAAOd,EAAKc,KACjBf,KAAKgB,UAAYf,EAAKe,UACtBhB,KAAKiB,QAAUhB,EAAKgB,QACpBjB,KAAKkB,SAAWjB,EAAKiB,SACrBlB,KAAKmB,aAAelB,EAAKmB,cACzBpB,KAAKqB,eAAiBpB,EAAKqB,gBAC3BtB,KAAKuB,WAAaC,KAAOvB,EAAKwB,aAC9BzB,KAAK0B,SAAWF,KAAOvB,EAAK0B,WAC5B3B,KAAK4B,UAAY3B,EAAK4B,WACtB7B,KAAK8B,iBAAmB7B,EAAK8B,kBAC7B/B,KAAKgC,cAAgB/B,EAAKgC,eAAeC,KAAI,SAAAC,GAAC,OAAIX,KAAOW,MACzDnC,KAAKoC,UAAYnC,EAAKmC,UACtBpC,KAAKqC,UAAYpC,EAAKoC,UACtBrC,KAAKsC,SAAWrC,EAAKqC,SACdtC,SA3BX,KA+BO,SAAeuC,GAAtB,yC,8CAAO,WAA8BC,EAAOC,EAAgBC,EAAUC,GAA/D,iBAAAC,EAAA,6DACDC,EAAMnD,GAAOoD,WAAa,gBAAkBN,EAAMO,KAAO,GAAK,UAAYP,EAAMQ,SAChFR,EAAMS,SAAWT,EAAMS,QAAQC,QAAOL,EAAMA,EAAM,SAAWL,EAAMS,QAAQC,MAAQ,cAAgBV,EAAMW,gBAEzGV,GAAkBA,EAAeW,OAAS,IAAGP,EAAMA,EAAM,cAAgBJ,EAAe,GAAK,aAAeA,EAAe,IAC3HC,GAAyB,KAAbA,IAAiBG,EAAMA,EAAM,aAAeH,GAExDC,EAAcS,OAAS,IAAGP,EAAMA,EAAM,kBAAoBF,EAAcU,KAAK,MAP5E,SASkBC,KAAMC,IAAIV,GAT5B,aASCW,EATD,SAUWA,EAASC,MAAQD,EAASC,KAAKL,OAAS,GAVnD,0CAWI,CACLM,MAAOF,EAASC,KAAKvB,KAAI,SAAAC,GAAC,OAAK,IAAIvC,IAAQ+D,SAASxB,MACpDyB,MAAOC,SAASL,EAASM,QAAQ,kBACjCf,KAAMc,SAASL,EAASM,QAAQ,aAd/B,iCAiBI,CAAEJ,MAAO,GAAIE,MAAO,EAAGb,KAAM,IAjBjC,6C,sBA8BA,SAAegB,GAAtB,mC,8CAAO,WAA4B7D,GAA5B,eAAA0C,EAAA,sEACkBU,KAAMC,IAAI7D,GAAOoD,WAAa,UAAY5C,GAD5D,YACCsD,EADD,UAEWA,EAASC,KAFpB,0CAGK,IAAI7D,IAAQ+D,SAASH,EAASC,OAHnC,gCAKI,IALJ,4C,sBCjCP,IAAM/D,GAASC,EAAQ,KAEjBqE,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCC,OAAQ,CACNC,OAAQF,EAAMG,QAAQ,IAExBC,OAAQ,CACNC,OAAQ,qBAEVC,qBAAsB,CACpBC,gBAAiB,UACjBF,OAAQ,oBACRG,aAAc,EACdC,QAAS,GAEXC,SAAU,CACRC,YAAaX,EAAMG,QAAQ,IAE7BS,KAAM,CACJC,MAAO,OACPC,SAAU,IACVP,gBAAiBP,EAAMe,QAAQC,WAAWC,OAE5CC,SAAU,CACRhB,OAAQF,EAAMG,QAAQ,IAExBgB,WAAY,OA4FCC,OAxFf,WAAyB,IAAD,EACsBhG,IADtB,mBACbiG,EADa,KACbA,cAAiBC,EADJ,OAEqB/F,IAFrB,mBAEbgG,EAFa,KAEbA,eAAkBC,EAFL,OAIEC,mBAAS,IAJX,mBAIfC,EAJe,KAITC,EAJS,KAMtBC,qBAAU,WAAM,4CACd,WAAwBC,GAAxB,eAAAnD,EAAA,sEACyBoD,GAAsBD,GAD/C,OACQE,EADR,OAEEJ,EAAQI,GAFV,4CADc,sBAKO,MAAjBV,GALW,SAAD,2BAKaW,CAAQX,KAClC,CAACA,IAEJ,IAUMY,EAAQ,WACZX,EAAe,CAAEY,KAAM,iBAAkBb,cAAe,KAAMc,aAAc,OAC5EX,EAAa,CAAEU,KAAM,gBAAiBX,gBAAgB,KAGlDvB,EAAQoC,cACRC,EAAUvC,KACVwC,EAAaC,YAAcvC,EAAMwC,YAAYC,KAAK,OAExD,OACE,eAACC,EAAA,EAAD,CACEJ,WAAYA,EACZK,sBAAoB,EACpBC,KAAMrB,EACNsB,QAASZ,EACTa,kBAAgB,YAChBC,cAAe,CAAEC,WAAW,GAC5BC,WAAY,CAAEC,UAAW,EAAGC,UAAWd,EAAQjC,QAPjD,UASGxE,OAAOwH,KAAK1B,GAAMxC,OAAS,GAAKwC,EAAKhE,UAElC,qCACE,cAAC2F,EAAA,EAAD,CAAarH,GAAG,YAAhB,SAA6B0F,EAAK7E,OAClC,eAACyG,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAYC,UAAU,KAAKC,QAAQ,YAAnC,SAAgD,0BAA4B/B,EAAK5E,UAAY,IAAM4E,EAAK/E,mBACxG,cAAC4G,EAAA,EAAD,CAAYC,UAAU,IAAIC,QAAQ,QAAlC,SAA2C/B,EAAK3E,UAChD,cAAC2G,EAAA,EAAD,wBACA,cAACC,EAAA,EAAD,CAAgBH,UAAWI,IAAOV,UAAW,EAAGC,UAAWd,EAAQlB,WAAnE,SACE,eAAC0C,EAAA,EAAD,CAAOC,KAAK,QAAZ,UACE,cAACC,EAAA,EAAD,UACE,eAACC,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,wBACA,cAACA,EAAA,EAAD,CAAWC,MAAM,QAAjB,6BAGJ,cAACC,EAAA,EAAD,UACGzC,EAAK9D,iBAAiBI,KAAI,SAACoG,EAAIC,GAAL,OACzB,eAACL,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAWT,UAAU,KAAKc,MAAM,MAAhC,SACGF,IAEH,cAACH,EAAA,EAAD,CAAWC,MAAM,QAAjB,SAA0BxC,EAAK5D,cAAc,GAAGyG,OAAO,0BAJ1C,SAAWF,aAUlC,uBACA,sBAAKlB,UAAWd,EAAQ/B,qBAAxB,UACE,cAACkE,EAAA,EAAD,CAAQC,QAAS,kBAvDLC,OAAO9B,KAAKlB,EAAKxD,UAAW,WAuDFyG,MAAM,UAAUC,UAAW,cAAC,KAAD,IAAjE,2BACA,cAACJ,EAAA,EAAD,CAAQC,QA5DE,kBAAMC,OAAO9B,KAAKpH,GAAOoD,WAAa,UAAY8C,EAAK1F,GAAK,SA4DpCmH,UAAWd,EAAQpC,OAAQ0E,MAAM,UAAUC,UAAW,cAAC,KAAD,IAAxF,0BACA,cAACJ,EAAA,EAAD,CAAQC,QA3DH,kBAAMC,OAAO9B,KAAKpH,GAAOoD,WAAa,UAAY8C,EAAK1F,GAAK,OAAQ,WA2D5CmH,UAAWd,EAAQpC,OAAQ0E,MAAM,UAAUC,UAAW,cAAC,KAAD,IAAnF,mBACA,cAACJ,EAAA,EAAD,CAAQC,QAxDF,WAClBjD,EAAa,CAAEU,KAAM,iBAAkB2C,YAAa,CAACnD,EAAKvD,UAAWuD,EAAKtD,UAAW0G,QAAS,MAuDpD3B,UAAWd,EAAQpC,OAAQ0E,MAAM,UAAUC,UAAW,cAAC,KAAD,IAAoBpB,UAAWuB,IAAMC,GAAG,OAA5H,iCAIJ,cAACC,EAAA,EAAD,CAAkB9B,UAAWd,EAAQnB,SAAUyD,MAAM,UAAUb,KAAM,KAC3E,cAACoB,EAAA,EAAD,UACE,cAACV,EAAA,EAAD,CAAQC,QAAS,kBAAMxC,KAAS0C,MAAM,YAAYQ,QAAS,cAAC,IAAD,IAA3D,yBC/IF3J,GAASC,EAAQ,KAEjB2J,GAAe,CACnBC,IAAK,0BACL,OAAQ,kCACRC,GAAI,uBACJC,IAAK,wBACLC,GAAI,uBAGOC,GAAb,WACE,WAAa9J,GAAM,qBACjBC,OAAOC,OAAOC,KAAMH,GAFxB,6CAKE,SAAUI,GAwCR,OAvCAD,KAAKE,GAAKD,EAAKC,GACfF,KAAK4J,eAAiB3J,EAAK,mBAC3BD,KAAK6J,mBAAqB5J,EAAK,wBAC/BD,KAAKe,KAAOd,EAAK,gBACjBD,KAAK8J,SAAW7J,EAAK,aACrBD,KAAK+J,SAAW9J,EAAK,aACrBD,KAAKgK,SAAW/J,EAAK,aACrBD,KAAKkB,SAAWjB,EAAKgK,SACrBjK,KAAKkK,kBAAoBjK,EAAK,sBAC9BD,KAAKmK,iBAAmBlK,EAAK,qBAC7BD,KAAKoK,KAAOnK,EAAK,oCACjBD,KAAKqK,cAAgBpK,EAAK,8CAC1BD,KAAKqK,cAAgBpK,EAAK,6CAC1BD,KAAKsK,UAAYrK,EAAKsK,UACtBvK,KAAKoG,KAAOnG,EAAK,gBACjBD,KAAKwK,gBAAkBlB,GAAarJ,EAAK,iBACzCD,KAAKyK,WAAaxK,EAAK,eACvBD,KAAK0K,WAAazK,EAAK,eACvBD,KAAK2K,mBAAqB1K,EAAK,wBAC/BD,KAAK4K,oBAAsB3K,EAAK,yBAChCD,KAAK6K,sBAAwB5K,EAAK,2BAClCD,KAAK8K,qBAAuB7K,EAAK,0BACjCD,KAAK+K,mBAAqB9K,EAAK,wBAC/BD,KAAKgL,wBAA0B/K,EAAK,0BACpCD,KAAKiL,mBAAqBhL,EAAK,wBAC/BD,KAAKkL,qBAAuBjL,EAAK,0BACjCD,KAAKmL,sBAAwBlL,EAAK,2BAClCD,KAAKoL,wBAA0BnL,EAAK,6BACpCD,KAAKqL,uBAAyBpL,EAAK,4BACnCD,KAAKsL,qBAAuBrL,EAAK,0BACjCD,KAAKuL,0BAA4BtL,EAAK,4BACtCD,KAAKwL,qBAAuBvL,EAAK,0BACjCD,KAAKyL,UAAYxL,EAAK,cACtBD,KAAK0L,cAAgBzL,EAAK,mBAC1BD,KAAK2L,MAAQ1L,EAAK2L,MAClB5L,KAAK6C,IAAM5C,EAAK4L,IAChB7L,KAAK8L,aAAe7L,EAAK,iBACzBD,KAAKqC,UAAYpC,EAAK8L,UACtB/L,KAAKsC,SAAWrC,EAAK+L,SACdhM,SA7CX,KAiDO,SAAeiM,GAAtB,2C,8CAAO,WAAkCzJ,EAAOC,EAAgBC,EAAUC,EAAeuJ,GAAlF,mBAAAtJ,EAAA,6DACDC,EAAMnD,GAAOyM,IAAM,oBAAsB3J,EAAMO,KAAO,GAAK,UAAYP,EAAMQ,SAAW,WAAakJ,EACnGE,EAAe,CACnBrL,KAAM,eACN6I,eAAgB,mBAEdpH,EAAMS,SAAWT,EAAMS,QAAQC,QAAOL,EAAMA,EAAM,SAAWuJ,EAAa5J,EAAMS,QAAQC,OAAS,cAAgBV,EAAMW,gBAEvHV,GAAkBA,EAAeW,OAAS,IAAGP,EAAMA,EAAM,cAAgBJ,EAAe,GAAK,aAAeA,EAAe,IAC3HC,GAAyB,KAAbA,IAAiBG,EAAMA,EAAM,aAAeH,GAExDC,EAAcS,OAAS,IAAGP,EAAMA,EAAM,kBAAoBF,EAAcU,KAAK,MAX5E,SAakBC,KAAMC,IAAIV,GAb5B,aAaCW,EAbD,SAcWA,EAASC,MAAQD,EAASC,KAAKL,OAAS,GAdnD,0CAeI,CACLiJ,UAAW7I,EAASC,KAAKvB,KAAI,SAAAC,GAAC,OAAK,IAAIwH,IAAWhG,SAASxB,MAC3DyB,MAAOC,SAASL,EAASM,QAAQ,kBACjCf,KAAMc,SAASL,EAASM,QAAQ,aAlB/B,iCAqBI,CAAEuI,UAAW,GAAIzI,MAAO,EAAGb,KAAM,IArBrC,6C,sBAkCA,SAAeuJ,GAAtB,mC,8CAAO,WAA+BpM,GAA/B,eAAA0C,EAAA,sEACkBU,KAAMC,IAAI7D,GAAOyM,IAAM,cAAgBjM,GADzD,YACCsD,EADD,UAEWA,EAASC,KAFpB,0CAGK,IAAIkG,IAAWhG,SAASH,EAASC,OAHtC,gCAKI,IALJ,4C,sBC7FP,IAAM8I,GAAO,CAAC,SAAU,UAAW,YAAa,WAAY,SAAU,WAAY,UAE3E,SAASC,GAAaC,EAAOC,GAClC,IAAMC,EAAgD,KAAhCF,EAAMC,EAAM,gBAAyBD,EAAMC,EAAM,gBAAkB,KACnFE,EAAoD,KAAlCH,EAAMC,EAAM,kBAA2BD,EAAMC,EAAM,kBAAoB,KAC/F,MAAO,CAAEA,IAAKA,EAAKG,QAAUF,EAAeA,EAAaG,MAAM,KAAKC,QAAO,SAAAC,GAAC,MAAU,gBAANA,KAAqB9K,KAAI,SAAA8K,GAAC,OAAIA,EAAEF,MAAM,QAAQ,KAAOG,UAAYL,EAAiBA,EAAeE,MAAM,KAAKC,QAAO,SAAAC,GAAC,MAAU,gBAANA,KAAqB9K,KAAI,SAAA8K,GAAC,OAAIA,EAAEF,MAAM,QAAQ,MAQjP,SAASI,GAAaT,GAC3B,IAAMU,EAAc,GAIpB,OAHAZ,GAAKa,SAAQ,SAAAV,GACXS,EAAYE,KAAKb,GAAYC,EAAOC,OAE/BS,ECWT,IAAMnJ,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCC,OAAQ,CACNC,OAAQF,EAAMG,QAAQ,IAExBC,OAAQ,CACNC,OAAQ,qBAEVC,qBAAsB,CACpBC,gBAAiB,UACjBF,OAAQ,oBACRG,aAAc,EACdC,QAAS,GAEXC,SAAU,CACRC,YAAaX,EAAMG,QAAQ,IAE7BS,KAAM,CACJC,MAAO,OACPC,SAAU,IACVP,gBAAiBP,EAAMe,QAAQC,WAAWC,OAE5CC,SAAU,CACRhB,OAAQF,EAAMG,QAAQ,IAExBiJ,MAAO,GAEPjI,WAAY,CACVV,QAAST,EAAMG,QAAQ,GACvBE,OAAQ,YACRgJ,YAAarJ,EAAMe,QAAQuI,QAAQC,UA8ExBC,OA1Ef,WAA4B,IAAD,EACsBpO,IADtB,mBAChBqO,EADgB,KAChBA,iBAAoBnI,EADJ,OAEqB/F,IAFrB,mBAEhBmO,EAFgB,KAEhBA,kBAAqBlI,EAFL,OAIKC,mBAAS,IAJd,mBAIlBkI,EAJkB,KAITC,EAJS,KAMzBhI,qBAAU,WAAM,4CACd,WAA2BiI,GAA3B,eAAAnL,EAAA,sEAC4BoL,GAA4BD,GADxD,OACQE,EADR,OAEEH,EAAWG,GAFb,4CADc,sBAKU,MAApBN,GALW,SAAD,2BAKgBO,CAAWP,KACxC,CAACA,IAEJ,IAMMxH,EAAQ,WACZX,EAAe,CAAEY,KAAM,oBAAqBuH,iBAAkB,KAAMtH,aAAc,OAClFX,EAAa,CAAEU,KAAM,mBAAoBwH,mBAAmB,KAGxD1J,EAAQoC,cACRC,EAAUvC,KACVwC,EAAaC,YAAcvC,EAAMwC,YAAYC,KAAK,OAExD,OACE,eAACC,EAAA,EAAD,CACEJ,WAAYA,EACZK,sBAAoB,EACpBC,KAAM8G,EACN7G,QAASZ,EACTa,kBAAgB,YAChBC,cAAe,CAAEC,WAAW,GAC5BC,WAAY,CAAEC,UAAW,EAAGC,UAAWd,EAAQjC,QAPjD,UASGxE,OAAOwH,KAAKuG,GAASzK,OAAS,EAE3B,qCACE,cAACmE,EAAA,EAAD,CAAarH,GAAG,YAAhB,SAA6B2N,EAAQ9M,OACrC,eAACyG,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAYC,UAAU,KAAKC,QAAQ,YAAnC,SAAgDkG,EAAQrD,gBAAkB,OAASqD,EAAQjE,eAAiB,OAC5G,cAACnC,EAAA,EAAD,CAAYC,UAAU,IAAIC,QAAQ,QAAlC,SAA2C,CAACkG,EAAQ/D,SAAU+D,EAAQ9D,SAAU8D,EAAQ7D,SAAU6D,EAAQ3M,UAAU6L,QAAO,SAAAoB,GAAC,OAAIC,QAAQD,MAAI9K,KAAK,QACjJ,cAACwE,EAAA,EAAD,CAAgBH,UAAWI,IAAOV,UAAW,EAAGC,UAAWd,EAAQlB,WAAnE,SACE,cAAC0C,EAAA,EAAD,CAAOC,KAAK,QAAQX,UAAWd,EAAQ+G,MAAvC,SACE,cAACjF,EAAA,EAAD,UACGgG,GAAwBR,GAAS3L,KAAI,SAACoG,EAAIC,GAAL,OACpC,eAACL,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,UAAYG,EAAGoE,MACf,cAACvE,EAAA,EAAD,UAAYG,EAAGuE,YAFF,SAAWtE,YAQlC,uBACA,cAACX,EAAA,EAAD,CAAe0G,eAAa,EAA5B,qBACA,sBAAKjH,UAAWd,EAAQ/B,qBAAxB,UACE,cAACkE,EAAA,EAAD,CAAQC,QAAS,kBA/CLC,OAAO9B,KAAK+G,EAAQhL,IAAK,WA+CCgG,MAAM,UAAUC,UAAW,cAAC,KAAD,IAAjE,2BACA,cAACJ,EAAA,EAAD,CAAQC,QA9CC,WACrBjD,EAAa,CAAEU,KAAM,iBAAkB2C,YAAa,CAAC8E,EAAQxL,UAAWwL,EAAQvL,UAAW0G,QAAS,MA6CvD3B,UAAWd,EAAQpC,OAAQ0E,MAAM,UAAUC,UAAW,cAAC,KAAD,IAAoBpB,UAAWuB,IAAMC,GAAG,OAA/H,iCAIJ,cAACC,EAAA,EAAD,CAAkB9B,UAAWd,EAAQnB,SAAUyD,MAAM,UAAUb,KAAM,KAC3E,cAACoB,EAAA,EAAD,UACE,cAACV,EAAA,EAAD,CAAQC,QAAS,kBAAMxC,KAAS0C,MAAM,YAAYQ,QAAS,cAAC,IAAD,IAA3D,yB,wYClIF3J,GAASC,EAAQ,KAEV4O,GAAc,WAAmB,IAAlBC,EAAiB,uDAAP,GACpC,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAC3BC,UAAUC,YAAYC,mBAAmBJ,EAASC,EAAQH,OAIjDM,GAAkB,uCAAG,8BAAAlM,EAAA,6DAC5B4L,EAAU,CACZO,oBAAoB,EACpBC,QAAS,IACTC,WAAY,GAJkB,SAOTV,GAAYC,GAPH,cAO1BU,EAP0B,yBAQzB,CAACA,EAASC,OAAO9M,UAAW6M,EAASC,OAAO7M,WARnB,2CAAH,qDAWlB8M,GAAkB,uCAAG,WAAOC,EAAKC,GAAZ,mBAAA1M,EAAA,6DAC1B2M,EAD0B,iDACsBF,EADtB,gBACiCC,GADjC,kBAGZhM,KAAMC,IAAIgM,GAHE,UAIX,OADbC,EAHwB,QAItBC,OAJsB,sBAKtBC,EAAYF,EAAI/L,KAAKkM,QACbvM,OAAS,GANK,yCAOnBsM,EAAU,GAAGxO,UAPM,yDAW9B0O,QAAQC,IAAR,MAX8B,0DAAH,wDAelBC,GAAW,uCAAG,WAAO5O,GAAP,eAAA0B,EAAA,sEACFU,KAAMC,IAAI7D,GAAOqQ,YAAc7O,GAD7B,cACnBsC,EADmB,yBAElB,CACLwM,SAAU,CAACxM,EAASC,KAAKpB,UAAWmB,EAASC,KAAKnB,UAClD2N,qBAAsBzM,EAASC,KAAKwM,qBACpCC,gBAAiB1M,EAASC,KAAKyM,kBALR,2CAAH,sDASXC,GAA0B,uCAAG,WAAOjP,EAAUkP,GAAjB,iBAAAxN,EAAA,sEACbkN,GAAY5O,GADC,UAClCmP,EADkC,UAElCC,EAAmBF,EAASrD,QAAO,SAAA5K,GAAC,OAAIA,EAAEoO,OAASF,EAAaH,oBACjD9M,OAAS,GAHU,yCAGA,CAAEoN,QAASF,EAAiB,GAAIN,SAAUK,EAAaL,WAHvD,gCAIjC,IAJiC,2CAAH,wDAO1BS,GAAiB,uCAAG,WAAOT,GAAP,eAAApN,EAAA,sEACRU,KAAMC,IAAI7D,GAAOgR,WAAa,aAAeV,EAAS,GAAK,cAAgBA,EAAS,IAD5E,cACzBxM,EADyB,yBAEvBA,GAAYA,EAASC,MAAQD,EAASC,KAAKL,OAAS,EAAII,EAASC,KAAK,GAAK,MAFpD,2CAAH,sDAKjBkN,GAAuB,uCAAG,WAAOX,GAAP,eAAApN,EAAA,sEACdU,KAAMC,IAAI7D,GAAOkR,iBAAmB,aAAeZ,EAAS,GAAK,cAAgBA,EAAS,IAD5E,cAC/BxM,EAD+B,yBAE7BA,GAAYA,EAASC,MAAQD,EAASC,KAAKL,OAAS,EAAII,EAASC,KAAK,GAAK,MAF9C,2CAAH,sDAKvBoN,GAAmB,SAAC3P,GAC/B,MAAO,qCAAqC4P,KAAK5P,EAAS6P,SCzDrD,SAASC,GAAcC,GACH,IAAIC,gBAAgBtI,OAAOoH,SAASmB,QAC5CC,OAAO,WACxBH,EAAQ5D,KAAKzE,OAAOoH,SAASqB,UCkB/B,IAAMrN,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCoN,KAAM,CACJC,SAAU,GAEZC,WAAY,CACV7M,QAAST,EAAMG,WAEjBoN,aAAc,CACZrN,OAAQF,EAAMG,WAEhBqN,WAAY,CACVC,WAAYzN,EAAMG,UAClBuN,aAAc1N,EAAMG,UACpBwN,cAAe3N,EAAMG,UACrByN,YAAa5N,EAAMG,QAAQ,GAC3B0N,WAAY7N,EAAM8N,WAAWC,gBAE/Bd,OAAQ,CACNjC,SAAU,WACV3K,OAAQ,oBACRgJ,YAAarJ,EAAMe,QAAQuI,QAAQC,KACnC/I,aAAcR,EAAMgO,MAAMxN,aAC1BD,gBAAiB0N,gBAAKjO,EAAMe,QAAQmN,OAAOC,MAAO,IAClD,UAAW,CACT5N,gBAAiB0N,gBAAKjO,EAAMe,QAAQmN,OAAOC,MAAO,KAEpDC,WAAY,EACZzN,YAAaX,EAAMG,UACnBkO,QAAS,OACTvN,SAAU,SA0KCwN,oBA9Jf,SAAyBC,GAAQ,IACvBC,EAAaD,EAAbC,SADsB,EAE2CpT,IAF3C,0BAErBqT,EAFqB,EAErBA,WAAYC,EAFS,EAETA,eAAgBnQ,EAFP,EAEOA,eAAkB+C,EAFzB,OAG+B/F,IAH/B,0BAGrBoT,EAHqB,EAGrBA,gBAAiBC,EAHI,EAGJA,gBAAmBpN,EAHf,OAKUC,mBAASiN,GAAkB,IALrC,mBAKvBG,EALuB,KAKTC,EALS,OAMFrN,mBAAS,MANP,mBAMvBsN,EANuB,KAMfC,EANe,KAQxBC,EAhBR,SAAsBnU,GACpB,IAAMoU,EAAMC,mBAIZ,OAHAvN,qBAAU,WACRsN,EAAIE,QAAUtU,KAEToU,EAAIE,QAWOC,CAAY,CAAEX,mBAEhC9M,qBAAU,WACJqN,GAAaP,IAAmBO,EAAUP,gBAAgBI,EAAgBJ,KAC7E,CAACA,EAAgBO,IAEpB,IAAMK,EAAW,uCAAG,8BAAA5Q,EAAA,yDACbkQ,EADa,oBAEhBpN,EAAa,CAAEU,KAAM,4BACR3D,EAAeW,OAAS,GAHrB,qBAGyBX,EAHzB,sCAGiDgR,KAHjD,iCAGVC,EAHU,KAIhBlO,EAAe,CAAEY,KAAM,cAAe3D,eAAgBiR,IAJtC,UAKOC,EAAoBD,GAL3B,QAKVxS,EALU,OAMhBwE,EAAa,CAAEU,KAAM,0BACjBlF,GAAyB,KAAbA,GAAiB0S,EAAe1S,GAPhC,4CAAH,qDAWXyS,EAAmB,uCAAG,WAAO3D,GAAP,eAAApN,EAAA,2DACtBoN,EAAS5M,OAAS,GADI,gCAEDqQ,GAAA,MAAAA,EAAS,aAAuBzD,IAF/B,cAElB9O,EAFkB,OAGxB8R,EAAgB9R,GAHQ,kBAIjBA,GAJiB,2CAAH,sDAUnB2S,EAAoB,kBAAMX,EAAU,OAEpCY,EAAoB,SAACC,GACzBF,IACArO,EAAe,CAAEY,KAAM,oBAAqB2N,eAAgBA,IACzC,aAAfpB,GAA2BiB,EAAeb,IAG1CiB,EAAc,WAClBhB,EAAgB,IAChBxN,EAAe,CAAEY,KAAM,aACvB6N,GAAuBxB,EAAMxB,UAGzB2C,EAAc,uCAAG,0CAAAhR,EAAA,0DAAO1B,EAAP,+BAAkB6R,IACT,KAAb7R,EADI,uBAEnBwE,EAAa,CAAEU,KAAM,mBAAoB8N,oBAAqB,2CAA4CC,qBAAsB,YAF7G,6BAKrBzO,EAAa,CAAEU,KAAM,0BACrBV,EAAa,CAAEU,KAAM,qBACjBqN,GAA2BvS,GAPV,wBAQnB8S,IARmB,UASGP,GAAsBvS,EAAS6P,QATlC,SASbP,EATa,SAUJA,EAAQR,UAAYQ,EAAQR,SAAS5M,OAAS,GAC3DoC,EAAe,CAAEY,KAAM,oBAAqBwM,eAAgB1R,EAAUuB,eAAgB+N,EAAQR,WAC9FtK,EAAa,CAAEU,KAAM,iBAAkB2C,YAAayH,EAAQR,SAAUhH,QAAS,MAE/EtD,EAAa,CAAEU,KAAM,mBAAoB8N,oBAAqB,kCAAmCC,qBAAsB,UAdtG,wBAiBnBzO,EAAa,CAAEU,KAAM,mBAAoB8N,oBAAqB,kCAAmCC,qBAAsB,UAjBpG,QAmBrBzO,EAAa,CAAEU,KAAM,0BAnBA,4CAAH,qDAsBdG,EAAUvC,KAEhB,OACE,sBAAKqD,UAAWd,EAAQ4K,OAAxB,UACE,cAACiD,GAAA,EAAD,CACEC,YAAY,WACZ9N,QAAS,CACP+N,MAAO/N,EAAQmL,YAEjB1S,MAAO+T,EACPwB,SAAU,SAACC,GAAD,OAAOxB,EAAgBwB,EAAEC,OAAOzV,MAAM0V,gBAChDC,UAAW,SAACH,GAA0B,KAAdA,EAAEI,SAAgBhB,KAC1CiB,WAAY,CAAE,aAAc,wBAEd,aAAflC,EAEG,cAACmC,GAAA,EAAD,CAASC,MAAM,eAAf,SACE,cAACC,GAAA,EAAD,CACEC,aAAW,eACX5N,UAAWd,EAAQiL,WACnB7I,QAAS,kBAAMqL,KAHjB,SAKE,cAAC,KAAD,QAIJ,KACJ,qBAAK3M,UAAWd,EAAQ+K,OACxB,cAACwD,GAAA,EAAD,CAASC,MAAM,qBAAf,SACIlC,EAUI,cAACqC,GAAA,EAAD,CAAKhG,SAAS,WAAWqD,QAAQ,cAAclL,UAAWd,EAAQkL,aAAlE,SAAgF,cAACtI,EAAA,EAAD,CAAkBnB,KAAM,OAR1G,cAACgN,GAAA,EAAD,CACEC,aAAW,SACXpM,MAAM,UACNxB,UAAWd,EAAQiL,WACnB7I,QAAS,kBAAMiL,KAJjB,SAME,cAAC,KAAD,QAIR,cAACuB,GAAA,EAAD,CAASC,YAAY,WAAWC,UAAQ,IACxC,cAACP,GAAA,EAAD,CAASC,MAAM,4BAAf,SACIjC,EAUI,cAACoC,GAAA,EAAD,CAAKhG,SAAS,WAAWqD,QAAQ,cAAclL,UAAWd,EAAQkL,aAAlE,SAAgF,cAACtI,EAAA,EAAD,CAAkBnB,KAAM,OAR1G,cAACgN,GAAA,EAAD,CACEC,aAAW,6BACXpM,MAAM,UACNxB,UAAWd,EAAQiL,WACnB7I,QAAS,kBAAM6K,KAJjB,SAME,cAAC,KAAD,QAIPd,EAEG,cAACoC,GAAA,EAAD,CAASC,MAAM,yBAAf,SACE,cAACC,GAAA,EAAD,CACEC,aAAW,4BACX5N,UAAWd,EAAQiL,WACnB3I,MAAM,YACNF,QAAS,SAAC6L,IApGG,SAACA,GAAMtB,EAAUsB,EAAEc,eAoGdC,CAAiBf,IAJrC,SAME,cAAC,KAAD,QAGF,KACN,eAACgB,GAAA,EAAD,CACEtV,GAAG,eACHuV,SAAUxC,EACVyC,aAAW,EACX5O,KAAMsH,QAAQ6E,GACdlM,QAAS,kBAAM8M,KALjB,UAOE,cAACjM,EAAA,EAAD,CAAe0G,eAAa,EAA5B,6BACA,cAACqH,GAAA,EAAD,CAAUhN,QAAS,kBAAMmL,EAAkB,OAA3C,oBACA,cAAC6B,GAAA,EAAD,CAAUhN,QAAS,kBAAMmL,EAAkB,OAA3C,qBACA,cAAC6B,GAAA,EAAD,CAAUhN,QAAS,kBAAMmL,EAAkB,OAA3C,qBACA,cAAC6B,GAAA,EAAD,CAAUhN,QAAS,kBAAMmL,EAAkB,QAA3C,sBACA,cAAC6B,GAAA,EAAD,CAAUhN,QAAS,kBAAMmL,EAAkB,QAA3C,sBACA,cAAC6B,GAAA,EAAD,CAAUhN,QAAS,kBAAMmL,EAAkB,QAA3C,+BC7LF9P,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvC0R,OAAQ,CACNC,OAAQ3R,EAAM2R,OAAOC,OAAS,EAC9B5G,SAAU,YAEZ6G,kBAAmB,CACjBF,OAAQ3R,EAAM2R,OAAOC,OAAS,EAC9BrR,gBAAiB,2BACjByK,SAAU,YAEZoC,KAAM,CACJC,SAAU,GAEZyE,QAAS,CACPvR,gBAAiB,yBACjB,UAAW,CACTA,gBAAiB,2BAGrBwR,SAAU,CACR/G,SAAU,WACV2G,OAAQ3R,EAAM2R,OAAOC,OAAS,OAqMnBI,OAjMf,SAAoBzD,GAAQ,IAClB0D,EAAS1D,EAAT0D,KADiB,EAEc7W,IAA9B8W,EAFgB,oBAEhBA,yBAFgB,EAIOzQ,oBAAS,GAJhB,mBAIlB0Q,EAJkB,KAIRC,EAJQ,OAKO3Q,mBAASwQ,GALhB,mBAKlBI,EALkB,KAKRC,EALQ,KAOnBxG,EAAWyG,cACXlQ,EAAUvC,KAEV0S,EAAqB,SAACC,GAC1B,OAAIP,EAAiCO,EAAO,YAAcP,EACnDO,GAGHC,EAAQ,CACZ,CACE7B,MAAO,cACPlS,IAAK,4BACLgU,KAAM,cAAC,KAAD,IACNC,MAAO,CACL,CACE/B,MAAO,oBACPgC,MAAO,MACPF,KAAM,cAAC,KAAD,IACN3N,GAAI,OAIV,CACE6L,MAAO,oBACPlS,IAAK,oCACLgU,KAAM,cAAC,KAAD,IACNC,MAAO,CACL,CACE/B,MAAO,eACPgC,MAAO,OACPF,KAAM,cAAC,KAAD,IACN3N,GAAIwN,EAAmB,MAEzB,CACE3B,MAAO,mBACPgC,MAAO,QACPF,KAAM,cAAC,KAAD,IACN3N,GAAI,UAEN,CACE6L,MAAO,aACPgC,MAAO,OACPF,KAAM,cAAC,KAAD,IACN3N,GAAI,SAEN,CACE6L,MAAO,kBACPgC,MAAO,SACPF,KAAM,cAAC,KAAD,IACN3N,GAAI,aAIV,CACE6L,MAAO,mBACPlS,IAAK,kCACLgU,KAAM,cAAC,KAAD,IACNC,MAAO,CACL,CACE/B,MAAO,eACPgC,MAAO,QACPF,KAAM,cAAC,KAAD,IACN3N,GAAI,KAEN,CACE6L,MAAO,cACPgC,MAAO,OACPF,KAAM,cAAC,KAAD,IACN3N,GAAI,YAEN,CACE6L,MAAO,eACPgC,MAAO,MACPF,KAAM,cAAC,KAAD,IACN3N,GAAI,UAIV,CACE6L,MAAO,cACPlS,IAAK,+BACLgU,KAAM,cAAC,KAAD,IACNC,MAAO,CACL,CACE/B,MAAO,kBACPgC,MAAO,OACPF,KAAM,cAAC,KAAD,IACN3N,GAAIwN,EAAmB,MAEzB,CACE3B,MAAO,mBACPgC,MAAO,MACPF,KAAM,cAAC,KAAD,IACN3N,GAAIwN,EAAmB,YAMzBM,EAAqC,SAAtBhH,EAASqB,SAAsB9K,EAAQwP,kBAAoBxP,EAAQqP,OAExF,OACE,qCACE,cAAC,IAAD,CAAW5Q,SAAS,KAAKqC,UAAWd,EAAQ0P,SAA5C,SACE,eAACgB,GAAA,EAAD,WACE,cAACjC,GAAA,EAAD,CAAYC,aAAW,mBAAmB5N,UAAWd,EAAQyP,QAASnN,MAAM,UAAUF,QAAS,WAAQ2N,GAAaD,GAAWG,EAAYL,IAA3I,SACGE,EAAW,cAAC,IAAD,IAAiB,cAAC,KAAD,MAE/B,sBAAMhP,UAAWd,EAAQ+K,YAG5B+E,EACC,cAACa,GAAA,EAAD,CAAQhI,SAAS,SAASrG,MAAM,cAAczB,UAAW,EAAGC,UAAW2P,EAAvE,SACE,cAAC,IAAD,CAAWhS,SAAS,KAApB,SACE,cAACmS,GAAA,EAAD,CACEnY,MAAOuX,EACPhC,SAAU,SAACC,EAAG4C,GAAQZ,EAAYY,IAClCzP,QAAQ,aACR0P,cAAc,KACdC,eAAe,UACfC,UAAU,YANZ,SAQGX,EAAM1U,KAAI,SAACC,EAAGoG,GACb,OACE,cAACiP,GAAA,EAAD,CAA4BC,MAAOtV,EAAE4S,MAAO8B,KAAM1U,EAAE0U,MAA1C,WAAatO,YAM/B,KACJ,cAAC2O,GAAA,EAAD,CACEhI,SAAS,SACTrG,MAAM,cACNzB,UAAW,EACXC,UAAW2P,EAJb,SAME,cAAC,IAAD,CAAWhS,SAAS,KAApB,SACE,eAACiS,GAAA,EAAD,WACE,cAACS,GAAA,EAAD,CAAQC,MAAI,EAAZ,SACGf,EAAML,GAAUO,MAAM5U,KAAI,SAAC0V,EAAMrP,GAChC,OACE,cAACuM,GAAA,EAAD,CAASC,MAAO6C,EAAK7C,MAArB,SACE,cAACrM,EAAA,EAAD,CACEhB,UAAWuB,IACXC,GAAKqN,IAAaJ,EAAOyB,EAAK1O,GAAK0N,EAAML,GAAU1T,IAAM+U,EAAK1O,GAC9D2O,cAAe7H,EAASqB,WAAauG,EAAK1O,GAC1C4O,mBAAoB9H,EAASqB,WAAauG,EAAK1O,GAC/CL,MAAM,YACNb,KAAK,QACLc,UAAW8O,EAAKf,KAPlB,SASGe,EAAKb,SAVuB,gBAAkBxO,QAgBzD,cAACmP,GAAA,EAAD,CAAQK,QAAM,EAAd,SACGnB,EAAML,GAAUO,MAAM5U,KAAI,SAAC0V,EAAMrP,GAChC,OACE,cAACuM,GAAA,EAAD,CAASC,MAAO6C,EAAK7C,MAArB,SACE,cAACrM,EAAA,EAAD,CACEhB,UAAWuB,IACXC,GAAKqN,IAAaJ,EAAOyB,EAAK1O,GAAK0N,EAAML,GAAU1T,IAAM+U,EAAK1O,GAC9D2O,cAAe7H,EAASqB,WAAauG,EAAK1O,GAC1C4O,mBAAoB9H,EAASqB,WAAauG,EAAK1O,GAC/CL,MAAM,YACNb,KAAK,QACLc,UAAW8O,EAAKf,KAPlB,SASGe,EAAK7C,SAVuB,gBAAkBxM,QAgBzD,sBAAMlB,UAAWd,EAAQ+K,OACF,SAAtBtB,EAASqB,SAAsB,cAAC,GAAD,IAAqB,gB,yCCrO3DrN,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvC8T,KAAM,CACJrG,WAAYzN,EAAMG,QAAQ,GAC1B4T,UAAW/T,EAAMG,QAAQ,GACzB6T,aAAchU,EAAMG,QAAQ,GAC5BU,MAAO,QAEToT,OAAQ,CACN/T,OAAQF,EAAMG,QAAQ,IAExB+T,KAAM,CACJH,UAAW/T,EAAMG,QAAQ,IAE3BgU,SAAU,CACR/F,WAAYpO,EAAMG,QAAQ,GAC1BQ,YAAaX,EAAMG,QAAQ,IAE7BiU,WAAY,CACVC,cAAe,SACfhG,QAAS,eAEXiG,YAAa,CACXC,UAAW,SAEbC,UAAW,CACTC,WAAY,IACZC,SAAU,QAgCCC,OA5Bf,WACE,IAAMtS,EAAUvC,KAEhB,OACE,sBAAKqD,UAAWd,EAAQyR,KAAxB,UACE,cAAC7C,GAAA,EAAD,IACA,eAAC2D,GAAA,EAAD,CAAMC,WAAS,EAAC1U,QAAS,EAAGgD,UAAWd,EAAQ6R,KAA/C,UACE,eAACU,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAA5C,UACE,eAAC5R,EAAA,EAAD,CAAYE,QAAQ,SAApB,UACE,cAAC,KAAD,CAAc2R,KAAK,wCAAwC7E,OAAO,SAASM,MAAM,4CAA4C1N,UAAWd,EAAQmS,UAAhJ,gCACA,sBAAMrR,UAAWd,EAAQ4R,OAAzB,sBACA,cAAC,KAAD,CAAczQ,UAAWuB,IAAMC,GAAG,QAAQ6L,MAAM,uDAAuD1N,UAAWd,EAAQmS,UAA1H,kBACA,sBAAMrR,UAAWd,EAAQ4R,OAAzB,sBACA,cAAC,KAAD,CAAcmB,KAAK,gDAAgD7E,OAAO,SAASM,MAAM,oBAAoB1N,UAAWd,EAAQmS,UAAhI,uBACW,uBACb,cAACjR,EAAA,EAAD,CAAYE,QAAQ,QAAQN,UAAWd,EAAQ+R,WAA/C,2DAEF,eAACQ,GAAA,EAAD,CAAMzR,UAAWd,EAAQiS,YAAaQ,MAAI,EAACC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAA5E,UACE,eAAC5R,EAAA,EAAD,CAAYE,QAAQ,QAAQN,UAAWd,EAAQ+R,WAA/C,oCAAkF,cAAC,KAAD,CAAczP,MAAM,UAAUxB,UAAWd,EAAQ8R,cAAyB,uBAC5J,cAAC5Q,EAAA,EAAD,CAAYE,QAAQ,SAApB,SACE,cAAC,KAAD,CAAc2R,KAAK,kCAAkCvE,MAAM,iBAAiB1N,UAAWd,EAAQmS,UAAWjE,OAAO,SAAjH,wC,0JCnDNzQ,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCqV,OAAQ,CACNnV,OAAQ,GAEVoV,SAAU,CACRpV,OAAQ,EACRqV,OAAQ,UACRhV,gBAAiBP,EAAMe,QAAQyU,QAAQjM,UAoB5BkM,OAhBf,WAAsB,IAAD,EACMra,IAAhBqT,EADU,oBACVA,WAEHpM,EAAUvC,KAEhB,OACE,cAAC8Q,GAAA,EAAD,CAASC,MAAM,KAAf,SACE,cAAC6E,GAAA,EAAD,CACEvS,UAA0B,QAAfsL,EAAuBpM,EAAQiT,SAAWjT,EAAQgT,OAD/D,SAGE,cAAC,KAAD,S,oBCbFvV,GAAYC,aAAW,iBAAO,CAClCK,OAAQ,CACNC,OAAQ,yBAkGGsV,OA9Ff,WAAyB,IAAD,EACyCpa,IADzC,0BACbqa,EADa,EACbA,YAAaC,EADA,EACAA,sBAAyBrU,EADzB,OAE+BpG,IAF/B,mBAEb0a,EAFa,KAEbA,uBAA0BxU,EAFb,KAIhByU,EAAc,WAClBvU,EAAa,CAAEU,KAAM,uBAAwB2T,uBAAuB,KAmBhExT,EAAUvC,KACVE,EAAQoC,cACRE,EAAaC,YAAcvC,EAAMwC,YAAYC,KAAK,OAExD,OACE,eAACC,EAAA,EAAD,CACEJ,WAAYA,EACZK,sBAAoB,EACpBC,KAAMiT,EACNhT,QAASkT,EACThT,cAAe,CACbC,WAAW,GAEbC,WAAY,CAAEC,UAAW,EAAGC,UAAWd,EAAQjC,QARjD,UAUE,cAACiD,EAAA,EAAD,2BACA,eAACC,EAAA,EAAD,WACE,cAACI,EAAA,EAAD,CAAe0G,eAAa,EAA5B,qBACA,cAAC4L,GAAA,EAAD,CACEC,QACE,cAACC,GAAA,EAAD,CACEC,QAASP,EAAYzN,UACrBkI,SAtCkB,WAC5B7O,EAAa,CAAEU,KAAM,mBAAoBkU,WAAY,eAsC3CvZ,KAAK,eACL8H,MAAM,YAGV4O,MAAM,cACN,uBACF,cAACyC,GAAA,EAAD,CACEC,QACE,cAACC,GAAA,EAAD,CACEC,QAASL,EACTzF,SA7CwB,WAClC/O,EAAe,CAAEY,KAAM,4BAA6B4T,wBAAyBA,KA6CnEjZ,KAAK,qBACL8H,MAAM,YAGV4O,MAAM,qBACN,uBACF,cAACyC,GAAA,EAAD,CACEC,QACE,cAACC,GAAA,EAAD,CACEC,QAASP,EAAYS,mBACrBhG,SApD2B,WACrC7O,EAAa,CAAEU,KAAM,mBAAoBkU,WAAY,wBAoD3CvZ,KAAK,0BACL8H,MAAM,YAGV4O,MAAM,yBACN,uBACF,cAACyC,GAAA,EAAD,CACEC,QACE,cAACC,GAAA,EAAD,CACEC,QAASP,EAAYU,kBACrBjG,SA3D0B,WACpC7O,EAAa,CAAEU,KAAM,mBAAoBkU,WAAY,uBA2D3CvZ,KAAK,wBACL8H,MAAM,YAGV4O,MAAM,kCAGV,cAACrO,EAAA,EAAD,UACE,cAACV,EAAA,EAAD,CAAQC,QAASsR,EAAapR,MAAM,YAAYQ,QAAS,cAAC,IAAD,IAAzD,yBC/GF3J,GAASC,EAAQ,KAEV8a,GAAb,WACE,WAAa5a,GAAM,qBACjBC,OAAOC,OAAOC,KAAMH,GAFxB,6CAKE,SAAUI,EAAMya,GAId,OAHA1a,KAAK0a,UAAYA,EACjB1a,KAAK2a,IAAM1a,EACXD,KAAKuS,SAAU,EACRvS,SATX,KAaO,SAAe4a,GAAtB,qC,8CAAO,WAA6BC,EAAOH,GAApC,mBAAA9X,EAAA,6DACC8P,EAAWhT,GAAOob,OAAO/N,QAAO,SAAAgO,GAAC,OAAIA,EAAEha,OAAS2Z,KAAW,GAC3D7X,EAAMnD,GAAOsb,aAAeN,EAAY,cAAgBG,EAAM,GAAK,aAAeA,EAAM,GAAK,aAAenI,EAASuI,SAAW,aAAevI,EAASwI,SAFzJ,SAIkB5X,KAAMC,IAAIV,GAJ5B,YAICW,EAJD,UAKWA,EAASC,KALpB,0CAMI,IAAIgX,IAAY9W,SAASH,EAASC,KAAMiX,IAN5C,gCAQI,MARJ,6C,sBCYP,IAAM1W,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCiX,aAAc,CACZC,SAAU,IAEZC,KAAM,CACJ9W,OAAQ,qBAEVmO,SAAU,CACRxD,SAAU,WACVoM,OAAQpX,EAAMG,QAAQ,GACtBkX,MAAOrX,EAAMG,QAAQ,QAInB3E,GAASC,EAAQ,KAEjB6b,GAAMC,aAAc,CACxBC,QAAS,EACTC,QAAS,GACTC,kBAAmB,kFAGfC,GAAe,CAACnc,GAAOmc,cACvBC,GAAwB,CAACpc,GAAOoc,uBAChCC,GAAwB,CAACrc,GAAOqc,uBAChCC,GAAY,CAACtc,GAAOsc,WACpBC,GAAY,CAACvc,GAAOuc,WAqvBXC,OAnvBf,WAAwB,IAAD,EACyBhd,IADzB,mBACZid,EADY,KACZA,WAAcC,EADF,OAE2H9c,IAF3H,0BAEZqT,EAFY,EAEZA,WAAYlQ,EAFA,EAEAA,eAAgB8C,EAFhB,EAEgBA,cAAeoI,EAF/B,EAE+BA,iBAAkBtH,EAFjD,EAEiDA,aAAcgW,EAF/D,EAE+DA,eAAgBrC,EAF/E,EAE+EA,uBAA0BxU,EAFzG,OAGqH/F,IAHrH,0BAGZuJ,EAHY,EAGZA,QAASD,EAHG,EAGHA,YAAa+Q,EAHV,EAGUA,YAAaC,EAHvB,EAGuBA,sBAAuBuC,EAH9C,EAG8CA,UAAWC,EAHzD,EAGyDA,mBAAoBC,EAH7E,EAG6EA,qBAAwB9W,EAHrG,KAKrBI,qBAAU,cACP,IAEH,IAAI2W,EAAY,uCAAG,WAAOva,GAAP,iBAAAU,EAAA,2DACbV,GAAOA,EAAIwa,UAAYxa,EAAIwa,SAAStZ,OAAS,GAAKlB,EAAIwa,SAAS,GAAGC,YADrD,uBAEXzc,EAAKgC,EAAIwa,SAAS,GAAGC,WAAWzc,GAFrB,SAGK8N,GAA4B9N,GAHjC,OAGX2N,EAHW,OAIfrI,EAAe,CAAEY,KAAM,oBAAqBuH,iBAAkBzN,EAAImG,aAAc,CAACwH,EAAQxL,UAAWwL,EAAQvL,YAC5GoD,EAAa,CAAEU,KAAM,oBAAqBmW,oBAAoB,EAAMC,qBAAsB,CAAEI,KAAM1a,EAAI2Y,MAAMgC,EAAGC,IAAK5a,EAAI2Y,MAAMkC,KAL/G,2CAAH,sDASVC,EAAS,uCAAG,WAAO9a,GAAP,iBAAAU,EAAA,2DACZV,GAAOA,EAAIwa,UAAYxa,EAAIwa,SAAStZ,OAAS,GAAKlB,EAAIwa,SAAS,GAAGC,YADtD,uBAEVzc,EAAKgC,EAAIwa,SAAS,GAAGC,WAAWzc,GAFtB,SAGG8F,GAAsB9F,GAHzB,OAGV0F,EAHU,OAIdJ,EAAe,CAAEY,KAAM,iBAAkBb,cAAerF,EAAImG,aAAc,CAACT,EAAKvD,UAAWuD,EAAKtD,YAChGoD,EAAa,CAAEU,KAAM,oBAAqBmW,oBAAoB,EAAMC,qBAAsB,CAAEI,KAAM1a,EAAI2Y,MAAMgC,EAAGC,IAAK5a,EAAI2Y,MAAMkC,KALhH,2CAAH,sDAeXE,EAAe,uCAAG,WAAOvC,GAAP,eAAA9X,EAAA,0DAChBuZ,EAAW9V,KAAiB8V,EAAW9V,GAAcqU,GADrC,gBAElB0B,EAAoB,CAAEhW,KAAM,sBAAuByU,MAAOxU,EAAcqU,UAAWA,EAAWnI,SAAU4J,EAAW9V,GAAcqU,GAAWnI,UAF1H,sCAIM2K,GAA4B7W,EAAcqU,GAJhD,OAIZyC,EAJY,OAKlBf,EAAoB,CAAEhW,KAAM,eAAgByU,MAAOxU,EAAcqU,UAAWA,EAAWyC,UAAWA,IALhF,2CAAH,sDASfC,EAAsB,kBAAM1X,EAAa,CAAEU,KAAM,oBAAqBmW,oBAAoB,EAAOC,qBAAsB,QAErHjW,EAAUvC,KAEVqZ,EAAc,CAClB,kBAAmB,cAAC,KAAD,CAAgBzE,SAAS,QAAQ/P,MAAOsT,EAAW9V,IAAiB8V,EAAW9V,GAAc,oBAAsB8V,EAAW9V,GAAc,mBAAmBkM,QAAU,UAAY,cACxM,cAAe,cAAC,KAAD,CAAeqG,SAAS,QAAQ/P,MAAOsT,EAAW9V,IAAiB8V,EAAW9V,GAAc,gBAAkB8V,EAAW9V,GAAc,eAAekM,QAAU,UAAY,cAC3L,eAAgB,cAAC,KAAD,CAAgBqG,SAAS,QAAQ/P,MAAOsT,EAAW9V,IAAiB8V,EAAW9V,GAAc,iBAAmB8V,EAAW9V,GAAc,gBAAgBkM,QAAU,UAAY,eAGjM,OACE,qCACE,eAACiJ,GAAD,CACE8B,MAAM,aACNC,OAAQxU,EACRyU,KAAMxU,EACN2S,QAAS,GACT8B,MAAO,CAAC,GACRC,QAAS,CAAC,GACVC,UAAWrB,EACXsB,eAAgB,CAAEd,IAAK,EAAGxB,OAAQ,EAAGC,MAAO,EAAGqB,KAAM,EAAGiB,OAAQ,QAAS9Y,MAAO,QAASmK,SAAU,YARrG,UAUGmN,GAAkBA,EAAeyB,QAE9B,cAAC,KAAD,CACEra,KAAMsa,KAAKC,MAAM3B,EAAeyB,SAChCG,UAAW,CACT,eAAgB,GAChB,aAAc,EACd,aAAc,aAEZ,KACTne,OAAOwH,KAAK6U,GAAYja,KAAI,SAAA2Y,GAC3B,OAAO/a,OAAOwH,KAAK6U,EAAWtB,IAC3B9N,QAAO,SAAA2N,GACN,OAAOyB,EAAWtB,GAAOH,IAAcyB,EAAWtB,GAAOH,GAAWnI,WAErErQ,KAAI,SAACwY,EAAWmC,GACf,OACE,iCACE,cAAC,KAAD,CACEpZ,KAAM0Y,EAAWtB,GAAOH,GAAWC,IACnCuD,UAAW,CACT,eAAgB,GAChB,kBAAkB,EAClB,aAAcxe,GAAOob,OAAO/N,QAAO,SAAAoR,GAAC,OAAIA,EAAEpd,OAAS2Z,KAAW,GAAG0D,QAEnEC,YAAa,SAAC7J,OAEhB,cAAC,KAAD,CACE/Q,KAAM0Y,EAAWtB,GAAOH,GAAWC,IACnCsD,UAAW,CACT,eAAgB,GAChB,aAAc,EACd,aAAcve,GAAOob,OAAO/N,QAAO,SAAAoR,GAAC,OAAIA,EAAEpd,OAAS2Z,KAAW,GAAG0D,UAGrE,cAAC,KAAD,CACE3a,KAAM0Y,EAAWtB,GAAOH,GAAWC,IACnC2D,aAAc,CACZ,aAAc,CAAC,SAAU,CAAC,YAAa,CAAC,IAAK,CAAC,MAAO,SAAU,KAAM,QACrE,YAAa,CAAC,wBACd,mBAAoB,OACpB,sBAAsB,EACtB,eAAgB,EAChB,iBAAkB,GAClB,YAAa,CACXC,KAAM,IACN7a,MAAO,CAAC,CAAC,EAAG,IAAK,CAAC,GAAI,MAExB,sBAAuB,IAEzB8a,YAAa,CACX,kBAAmB,2BACnB,kBAAmB,EACnB,iBAAkB,EAClB,aAAc9e,GAAOob,OAAO/N,QAAO,SAAAoR,GAAC,OAAIA,EAAEpd,OAAS2Z,KAAW,GAAG0D,UAGrE,cAAC,KAAD,CACE3a,KAAM0Y,EAAWtB,GAAOH,GAAWC,IACnC2D,aAAc,CACZ,aAAc,CAAC,SAAU,CAAC,MAAO,cACjC,YAAa,CAAC,wBACd,mBAAoB,OACpB,sBAAsB,EACtB,qBAAqB,EACrB,eAAgB,EAChB,iBAAkB,EAClB,cAAe,CAAC,EAAG,GACnB,YAAa,CACXC,KAAM,IACN7a,MAAO,CAAC,CAAC,GAAI,GAAI,CAAC,GAAI,MAExB,sBAAuB,IAEzB8a,YAAa,CACX,kBAAmB,2BACnB,kBAAmB,EACnB,iBAAkB,EAClB,aAAc9e,GAAOob,OAAO/N,QAAO,SAAAoR,GAAC,OAAIA,EAAEpd,OAAS2Z,KAAW,GAAG0D,YA7D5D,mBAAqBvB,SAmExC,cAAC,KAAD,CACE3c,GAAG,0BACHue,eAAgB,CACdrY,KAAM,SACNsY,MAAO5C,MAGX,cAAC,KAAD,CACE5b,GAAG,8BACHkG,KAAK,OACLuY,SAAS,0BACTC,YAAY,oBACZlD,QAAS,GACTmD,OAAQ,CACN,YAAa,QACb,WAAY,UAEdC,MAAO,CACL,aAAc,UACd,eAAgB,GAChB,aAAc,CACZ,cACA,CACE,UAEF,CACE,QAEF,GAAI,EACJ,GAAI,MAIV,cAAC,KAAD,CACE5e,GAAG,6BACHkG,KAAK,OACLuY,SAAS,0BACTC,YAAY,oBACZlD,QAAS,GACToD,MAAO,CACL,aAAc,UACd,eAAgB,MAGpB,cAAC,KAAD,CACE5e,GAAG,0BACHue,eAAgB,CACdrY,KAAM,SACNsY,MAAO3C,MAGVjC,EAAYU,kBAET,qCACE,cAAC,KAAD,CACEta,GAAG,gCACHkG,KAAK,OACLuY,SAAS,0BACTC,YAAY,+BACZlD,QAAS,EACTmD,OAAQ,CACN,YAAa,QACb,WAAY,UAEdC,MAAO,CACL,aAAc,UACd,eAAgB,EAChB,aAAc,CACZ,cACA,CACE,UAEF,CACE,QAEF,EAAG,EACH,GAAI,MAIV,cAAC,KAAD,CACE5e,GAAG,+BACHkG,KAAK,OACLuY,SAAS,0BACTC,YAAY,+BACZlD,QAAS,EACToD,MAAO,CACL,aAAc,OACd,eAAgB,SAIpB,KACN,cAAC,KAAD,CACE5e,GAAG,YACHue,eAAgB,CACdrY,KAAM,SACNsY,MAAOzC,MAGX,cAAC,KAAD,CACE/b,GAAG,kBACHkG,KAAK,OACLuY,SAAS,YACTC,YAAY,OACZlD,QAAS,GACTmD,OAAQ,CACN,YAAa,QACb,WAAY,UAEdC,MAAO,CACL,aAAc,UACd,cAAe,CACb,cACA,CACE,UAEF,CACE,QAEF,GAAI,EACJ,GAAI,GAEN,eAAgB,EAChB,aAAc,CACZ,cACA,CACE,UAEF,CACE,QAEF,GAAI,EACJ,GAAI,GAEN,iBAAkB,CAChB,EACA,OAIN,cAAC,KAAD,CACE5e,GAAG,YACHue,eAAgB,CACdrY,KAAM,SACNsY,MAAO1C,MAGVlC,EAAYS,mBAET,qCACE,cAAC,KAAD,CACEra,GAAG,oBACHkG,KAAK,SACLuY,SAAS,YACTC,YAAY,OACZlD,QAAS,EACTmD,OAAQ,GACRC,MAAO,CACL,gBAAiB,CACf,cACA,CAAC,UACD,CAAC,QACD,EAAG,EACH,GAAI,GAEN,eAAgB,UAChB,sBAAuB,CACrB,cACA,CAAC,UACD,CAAC,QACD,EAAG,EACH,GAAI,GAEN,sBAAuB,UACvB,iBAAkB,IAEpBnW,QAASqU,IAEX,cAAC,KAAD,CACE9c,GAAG,mBACHkG,KAAK,SACLuY,SAAS,YACTC,YAAY,OACZlD,QAAS,GACTmD,OAAQ,CACN,yBAAyB,EACzB,aAAc,CAAC,SAAU,WAAY,CAAC,MAAO,SAC7C,YAAa,CACX,wBAEF,mBAAoB,EACpB,YAAa,CACX,cACA,CACE,UAEF,CACE,QAEF,GAAI,GACJ,GAAI,IAEN,cAAe,CACb,cACA,CACE,UAEF,CACE,QAEF,GAAI,CAAC,UAAW,CAAC,EAAG,MACpB,GAAI,CAAC,UAAW,CAAC,EAAG,MAGxBC,MAAO,CACL,kBAAmB,mBACnB,kBAAmB,EACnB,iBAAkB,EAClB,aAAc,WAEhBnW,QAASqU,IAEX,cAAC,KAAD,CACE9c,GAAG,0BACHkG,KAAK,SACLuY,SAAS,YACTC,YAAY,OACZlD,QAAS,GACTmD,OAAQ,CACN,yBAAyB,EACzB,aAAc,CAAC,YAAa,CAAC,MAAO,kBACpC,YAAa,CACX,wBAEF,mBAAoB,EACpB,YAAa,CACX,cACA,CACE,UAEF,CACE,QAEF,GAAI,GACJ,GAAI,IAEN,cAAe,CACb,cACA,CACE,UAEF,CACE,QAEF,GAAI,CAAC,UAAW,CAAC,GAAI,MACrB,GAAI,CAAC,UAAW,CAAC,GAAI,MAGzBC,MAAO,CACL,kBAAmB,mBACnB,kBAAmB,EACnB,iBAAkB,EAClB,aAAc,WAEhBnW,QAASqU,OAGX,KACN,cAAC,KAAD,CACE9c,GAAG,gBACHue,eAAgB,CACdrY,KAAM,SACNsY,MAAO7C,MAGV7B,EAEG,qCACE,cAAC,KAAD,CACE9Z,GAAG,mCACHkG,KAAK,SACLuY,SAAS,gBACTC,YAAY,YACZlD,QAAS,GACT3O,OAAQ,CAAC,MAAO,eAChB8R,OAAQ,CACN,yBAAyB,EACzB,aAAc,CAAC,YAAa,CAAC,MAAO,iBACpC,YAAa,CACX,wBAEF,mBAAoB,EACpB,YAAa,CACX,cACA,CACE,UAEF,CACE,QAEF,GAAI,GACJ,GAAI,IAEN,cAAe,CACb,cACA,CACE,UAEF,CACE,QAEF,GAAI,CAAC,UAAW,CAAC,EAAG,MACpB,GAAI,CAAC,UAAW,CAAC,EAAG,MAGxBC,MAAO,CACL,kBAAmB,mBACnB,kBAAmB,EACnB,iBAAkB,EAClB,aAAc,UACd,eAAgB,IAElBnW,QAAS8T,IAEX,cAAC,KAAD,CACEvc,GAAG,8BACHkG,KAAK,SACLuY,SAAS,gBACTC,YAAY,YACZlD,QAAS,GACT3O,OAAQ,CAAC,MAAO,eAChB8R,OAAQ,CACN,yBAAyB,EACzB,aAAc,CAAC,SAAU,UAAW,CAAC,MAAO,gBAC5C,YAAa,CACX,wBAEF,mBAAoB,EACpB,YAAa,CACX,cACA,CACE,UAEF,CACE,QAEF,GAAI,GACJ,GAAI,IAEN,cAAe,CACb,cACA,CACE,UAEF,CACE,QAEF,GAAI,CAAC,UAAW,CAAC,GAAI,MACrB,GAAI,CAAC,UAAW,CAAC,GAAI,MAGzBC,MAAO,CACL,kBAAmB,mBACnB,kBAAmB,EACnB,iBAAkB,EAClB,aAAc,UACd,eAAgB,IAElBnW,QAAS8T,IAEX,cAAC,KAAD,CACEvc,GAAG,+BACHkG,KAAK,SACLuY,SAAS,gBACTC,YAAY,YACZlD,QAAS,GACT3O,OAAQ,CAAC,MAAO,eAChB+R,MAAO,CACL,gBAAiB,CACf,cACA,CAAC,UACD,CAAC,QACD,GAAI,EACJ,GAAI,GAEN,eAAgB,UAChB,sBAAuB,CACrB,cACA,CAAC,UACD,CAAC,QACD,GAAI,EACJ,GAAI,GAEN,sBAAuB,UACvB,wBAAyB,GACzB,iBAAkB,IAEpBnW,QAAS8T,OAGX,KACL3C,EAAYzN,UAET,qCACE,cAAC,KAAD,CACEnM,GAAG,iCACHkG,KAAK,SACLuY,SAAS,gBACTC,YAAY,YACZlD,QAAS,GACT3O,OAAQ,CAAC,IAAK,CAAC,MAAO,gBACtB8R,OAAQ,CACN,yBAAyB,EACzB,aAAc,CAAC,QAAS,CAAC,MAAO,gBAAiB,MAAO,0BAA2B,OAAQ,kCAAmC,KAAM,uBAAwB,MAAO,wBAAyB,KAAM,sBAAuB,mBACzN,YAAa,CACX,wBAEF,mBAAoB,EACpB,YAAa,CACX,cACA,CACE,UAEF,CACE,QAEF,GAAI,GACJ,GAAI,IAEN,cAAe,CACb,cACA,CACE,UAEF,CACE,QAEF,GAAI,CAAC,UAAW,CAAC,GAAI,MACrB,GAAI,CAAC,UAAW,CAAC,GAAI,MAGzBC,MAAO,CACL,kBAAmB,mBACnB,kBAAmB,EACnB,iBAAkB,EAClB,aAAc,WAEhBnW,QAAS8T,IAEX,cAAC,KAAD,CACEvc,GAAG,iCACHkG,KAAK,SACLuY,SAAS,gBACTC,YAAY,YACZlD,QAAS,GACT3O,OAAQ,CAAC,IAAK,CAAC,MAAO,gBACtB8R,OAAQ,CACN,yBAAyB,EACzB,aAAc,CAAC,YAAa,CAAC,MAAO,iBACpC,YAAa,CACX,wBAEF,mBAAoB,EACpB,YAAa,CACX,cACA,CACE,UAEF,CACE,QAEF,GAAI,GACJ,GAAI,IAEN,cAAe,CACb,cACA,CACE,UAEF,CACE,QAEF,GAAI,CAAC,UAAW,CAAC,EAAG,MACpB,GAAI,CAAC,UAAW,CAAC,EAAG,MAGxBC,MAAO,CACL,kBAAmB,mBACnB,kBAAmB,EACnB,iBAAkB,EAClB,aAAc,UACd,eAAgB,GAElBnW,QAAS8T,IAEX,cAAC,KAAD,CACEvc,GAAG,6BACHkG,KAAK,SACLuY,SAAS,gBACTC,YAAY,YACZlD,QAAS,EACT3O,OAAQ,CAAC,IAAK,CAAC,MAAO,gBACtB+R,MAAO,CACL,gBAAiB,CACf,cACA,CAAC,UACD,CAAC,QACD,EAAG,EACH,GAAI,IAEN,eAAgB,CAAC,QAAS,CAAC,MAAO,gBAAiB,MAAO,UAAW,OAAQ,UAAW,KAAM,UAAW,MAAO,UAAW,MAAO,UAAW,WAC7I,sBAAuB,CACrB,cACA,CAAC,UACD,CAAC,QACD,EAAG,EACH,GAAI,GAEN,sBAAuB,UACvB,wBAAyB,CACvB,cACA,CAAC,UACD,CAAC,QACD,EAAG,GACH,GAAI,GAEN,iBAAkB,CAChB,cACA,CAAC,UACD,CAAC,QACD,EAAG,GACH,GAAI,KAGRnW,QAAS8T,OAGX,KACLha,GAAkBA,EAAeW,OAAS,EAEvC,cAAC,KAAD,CAEE2b,YAAa,CAACtc,EAAe,GAAIA,EAAe,IAFlD,SAIE,cAAC,GAAD,CAAUkQ,WAAYA,KAHlB,SAMN,KACJ,cAAC,KAAD,CAAazD,SAAS,mBAExB,cAAC4F,GAAA,EAAD,CACEC,MAAM,eADR,SAGE,cAACiK,GAAA,EAAD,CACEhX,KAAK,QACLX,UAAWd,EAAQmM,SACnB7J,MAAM,UACNyU,MAAO,CACLzU,MAAO,QACPtE,OAAQ,qBAEVoE,QAAS,kBAAMjD,EAAa,CAAEU,KAAM,uBAAwB2T,uBAAuB,KARrF,SAUE,cAAC,KAAD,QAGJ,cAAC,GAAD,CACED,YAAaA,EACbC,sBAAuBA,IAEzB,eAACvE,GAAA,EAAD,CACEtV,GAAG,iBACH+e,eAAgBzC,EAChB0C,gBAAgB,iBAChB9X,UAAW,EACXC,UAAWd,EAAQ8U,KACnB3F,aAAW,EACX5O,KAAMyV,EACNxV,QAASqW,EARX,UAUE,eAACzH,GAAA,EAAD,CAAUwJ,OAAK,EAACxW,QA9rBO,WAC3ByU,IACI7X,GAAeG,EAAa,CAAEU,KAAM,gBAAiBX,gBAAgB,IACrEkI,GAAkBjI,EAAa,CAAEU,KAAM,mBAAoBwH,mBAAmB,KA2rB9E,UACE,cAACwR,GAAA,EAAD,CAAc7Y,QAAS,CACrByR,KAAMzR,EAAQ4U,cADhB,SAIE,cAAC,KAAD,CAAYvC,SAAS,YAEvB,cAACyG,GAAA,EAAD,CAAc3F,QAAQ,iBAEvBha,GAAOob,OAAO5Y,KAAI,SAAC4Y,EAAQvS,GAC1B,OACE,eAACoN,GAAA,EAAD,CAAUwJ,OAAK,EAAwBxW,QAAS,kBAAMsU,EAAgBnC,EAAO/Z,OAA7E,UACE,cAACqe,GAAA,EAAD,CAAc7Y,QAAS,CACrByR,KAAMzR,EAAQ4U,cADhB,SAIGkC,EAAYvC,EAAO/Z,QAEtB,cAACse,GAAA,EAAD,CAAc3F,QAASoB,EAAOwE,gBAPX,WAAa/W,a,+BClvB/BgX,OAjCf,WAA0B,IAAD,EAC2C9f,IAD3C,0BACd+f,EADc,EACdA,iBAAkBtL,EADJ,EACIA,oBAAuBxO,EAD3B,KAGjB+Z,EAAc,WAClB/Z,EAAa,CAAEU,KAAM,kBAAmBoZ,kBAAkB,KAG5D,OACE,cAACE,GAAA,EAAD,CACEC,aAAc,CACZC,SAAU,SACVC,WAAY,QAEd/Y,KAAM0Y,EACNM,iBAAkB,IAClB/Y,QAAS0Y,EACTM,aAAc,CACZ,mBAAoB,cAEtBC,QAAS,sBAAM9f,GAAG,aAAT,SAAuBgU,IAChC+L,OAAQ,CACN,cAACjL,GAAA,EAAD,CAEEC,aAAW,QACXtM,QAAS8W,EAHX,SAKE,cAAC,KAAD,CAAW5W,MAAM,aAJb,a,4LCGR7E,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCgc,WAAY,CACVjI,UAAW/T,EAAMG,QAAQ,IAE3BiJ,MAAO,CACL7I,gBAAiB,mBACjBF,OAAQ,yBA4MG4b,OAxMf,WAAuB,IAAD,EACgF7gB,IADhF,0BACXyU,EADW,EACXA,eAAgBtR,EADL,EACKA,eAAgBE,EADrB,EACqBA,cAAeqX,EADpC,EACoCA,uBAA0BxU,EAD9D,OAEQ/F,IAFR,yCAERiG,EAFQ,KAId0a,EAAWC,IAAMC,YAEvBxa,qBAAU,WACRsa,EAAS9M,QAAQiN,kBAChB,CAAC9d,EAAgBsR,EAAgBpR,EAAeqX,IAEnD,IAAMzT,EAAUvC,KACVE,EAAQoC,cAiBd,OACE,gCACE,cAACsB,EAAA,EAAD,CAAe0G,eAAa,EAA5B,uBACA,cAAC4L,GAAA,EAAD,CACEC,QACE,cAACqG,GAAA,EAAD,CACEnG,QAASL,EACTzF,SAAU,WAVlB/O,EAAe,CAAEY,KAAM,4BAA6B4T,wBAAyBA,KAWrEjZ,KAAK,WACL8H,MAAM,YAGV4O,MAAM,yCAER,cAAC,KAAD,CACE2I,SAAUA,EACVK,WAAY,CACVC,UAAW,SAAAjO,GAAK,OAAI,cAAC3K,EAAA,EAAD,2BAAW2K,GAAX,IAAkBrL,UAAW,EAAGC,UAAWd,EAAQ+G,WAEzEqT,MAAO,CACLC,OAAQC,KACRC,UAAWA,KACXC,SAAUA,KACVC,SAAUC,KACVC,aAAcC,KACdC,UAAWC,MAEb7S,QAAS,CACP7J,QAAS8B,YAAcvC,EAAMwC,YAAY4a,GAAG,OAAS,UAAY,QACjEnQ,QAAQ,EACRoQ,YAAa,UACbC,mBAAoB,EACpBC,WAAW,EACXC,SAAS,EACTC,YAAa,CACXld,gBAAiB,UACjBoE,MAAO,UACPtE,OAAQ,QAGZqd,QAAS,CACP,CACE7M,MAAO,GACP7R,MAAO,OACPue,WAAW,EACXI,SAAS,EACTC,OAAQ,SAAAC,GACN,OACE,qCACE,cAACjN,GAAA,EAAD,CAASC,MAAM,kCAAf,SACE,cAACC,GAAA,EAAD,CAAYhN,KAAK,QAAQa,MAAM,YAAYF,QAAS,kBAhEpEnD,EAAe,CAAEY,KAAM,oBAAqBuH,iBAgE4CoU,EAhElB7hB,UACtEwF,EAAa,CAAEU,KAAM,mBAAoBwH,mBAAmB,KA+D5C,SACE,cAAC,KAAD,QAGJ,cAACkH,GAAA,EAAD,CAASC,MAAM,sCAAf,SACE,cAACC,GAAA,EAAD,CAAYhN,KAAK,QAAQa,MAAM,UAAUF,QAAS,WA/D3C,IAACkF,EACxBnI,EAAa,CAAEU,KAAM,iBAAkB2C,YAAa,EAD5B8E,EA+DiEkU,GA9D5B1f,UAAWwL,EAAQvL,UAAW0G,QAAS,MA8DDtB,UAAWuB,IAAMC,GAAG,OAAvG,SACE,cAAC,KAAD,QAGH6Y,EAAQlf,IAEL,cAACiS,GAAA,EAAD,CAASC,MAAM,4BAAf,SACE,cAACC,GAAA,EAAD,CAAYhN,KAAK,QAAQa,MAAM,UAAUF,QAAS,kBAxE5CkF,EAwEqEkU,EAxEzDnZ,OAAO9B,KAAK+G,EAAQhL,IAAK,UAAtC,IAACgL,GAwEN,SACE,cAAC,KAAD,QAGF,SAIZmU,UAAW,CACTC,aAAc,oBACdxd,gBAAiB,YAGrB,CACEsQ,MAAO,OACP7R,MAAO,OACPue,WAAW,EACXS,QAAQ,EACRF,UAAW,CACTC,aAAc,oBACdxd,gBAAiB,WAEnBqd,OAAQ,SAAAC,GACN,OACE,qCACGA,EAAQhhB,KAEgB,OAAvBghB,EAAQrX,WAAsB,qCAAE,uBAAM,cAACyX,GAAA,EAAD,CAAMtZ,MAAM,YAAYxB,UAAWd,EAAQ2Z,WAAYlY,KAAK,QAAQyP,MAAO,UAAYsK,EAAQrX,gBAAoB,UAMnK,CACEqK,MAAO,UACP7R,MAAO,iBACPue,WAAW,EACXS,QAAQ,EACRF,UAAW,CACTC,aAAc,oBACdxd,gBAAiB,YAGrB,CACEsQ,MAAO,UACP7R,MAAO,WACPue,WAAW,EACXI,SAAS,EACTK,QAAQ,EACRF,UAAW,CACTC,aAAc,oBACdxd,gBAAiB,WAEnBqd,OAAQ,SAACC,GAAD,MAAa,CAACA,EAAQjY,SAAUiY,EAAQhY,SAAUgY,EAAQ/X,UAAU+C,OAAOqB,SAAS/K,KAAK,QAEnG,CACE0R,MAAO,WACP7R,MAAO,WACPue,WAAW,EACXI,SAAS,EACTK,QAAQ,EACRF,UAAW,CACTC,aAAc,oBACdxd,gBAAiB,YAGrB,CACEsQ,MAAO,QACP7R,MAAO,qBACPue,WAAW,EACXI,SAAS,EACTK,QAAQ,EACRF,UAAW,CACTC,aAAc,oBACdxd,gBAAiB,WAEnBqd,OAAQ,SAACC,GACP,IAAMK,EZvMX5V,GYuM6CuV,EZxMxCvgB,OAASiH,OAAO,QAAQ4Z,eYyMlBC,EAAiBF,EAAMnV,UAAYmV,EAAMnV,UAAU/K,KAAI,SAAAkgB,GAC3D,OAAOA,KACJ,KACL,OACE,qCACqB,OAAlBA,EAAMvV,SAAuC,OAAnByV,EAA0B,wBAA0B,KAC5D,OAAlBF,EAAMvV,SAAoBuV,EAAMvV,QAAQzJ,OAAS,EAAIgf,EAAMvV,QAAQ3K,KAAI,SAAA8K,GAAC,OAAIA,EAAE9K,KAAI,SAAAU,GAAC,OAAIpB,KAAOoB,EAAG,SAAS6F,OAAO,YAAUpF,KAAK,UAAU,IAC1I+e,EAAMvV,SAAoC,IAAzBuV,EAAMvV,QAAQzJ,QAAqC,OAApBgf,EAAMnV,WAAiD,IAA3BmV,EAAMnV,UAAU7J,OAAiC,GAAjB,eAC5Ggf,EAAMnV,WAAamV,EAAMnV,UAAU7J,OAAS,EAAI,uBAAS,KACzDgf,EAAMnV,WAAamV,EAAMnV,UAAU7J,OAAS,EAAI,aAAekf,EAAiB,WAM3F7e,KAAM,SAAAjB,GAAK,OACT,IAAIiM,SAAQ,SAACC,GAAY,4CACvB,4BAAA9L,EAAA,sEAC4BoL,GAA+BxL,EAAOC,EAAgBsR,EAAgBpR,EAAeqX,GADjH,OACQ/L,EADR,OAEES,EAAQ,CACNjL,KAAMwK,EAAY5B,UAClBtJ,KAAOkL,EAAYlL,KAAO,EAC1Bwf,WAAYtU,EAAYrK,QAL5B,4CADuB,uBAAC,WAAD,wBASvB4e,aCjNNxe,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCue,UAAW,CACTre,OAAQF,EAAMG,QAAQ,IAExBiJ,MAAO,CACL7I,gBAAiB,mBACjBF,OAAQ,yBAwJGme,OApJf,WAA6B,IAAD,EACkDpjB,IADlD,0BACjByU,EADiB,EACjBA,eAAgBtR,EADC,EACDA,eAAgBE,EADf,EACeA,cAAiB6C,EADhC,OAEE/F,IAFF,yCAEdiG,EAFc,KAIpB0a,EAAWC,IAAMC,YAEvBxa,qBAAU,WACRsa,EAAS9M,QAAQiN,kBAChB,CAAC9d,EAAgBsR,EAAgBpR,IAEpC,IAAM4D,EAAUvC,KACVE,EAAQoC,cAad,OACE,gCACE,cAACsB,EAAA,EAAD,CAAe0G,eAAa,EAA5B,kCACA,cAAC,KAAD,CACE8R,SAAUA,EACVK,WAAY,CACVC,UAAW,SAAAjO,GAAK,OAAI,cAAC3K,EAAA,EAAD,2BAAW2K,GAAX,IAAkBrL,UAAW,EAAGC,UAAWd,EAAQ+G,WAEzEqT,MAAO,CACLC,OAAQC,KACRC,UAAWA,KACXC,SAAUA,KACVC,SAAUC,KACVC,aAAcC,KACdC,UAAWC,MAEb7S,QAAS,CACP7J,QAAS8B,YAAcvC,EAAMwC,YAAY4a,GAAG,OAAS,UAAY,QACjEnQ,QAAQ,EACRoQ,YAAa,UACbC,mBAAoB,EACpBC,WAAW,EACXC,SAAS,EACTC,YAAa,CACXld,gBAAiB,UACjBoE,MAAO,UACPtE,OAAQ,QAGZqd,QAAS,CACP,CACE7M,MAAO,GACP7R,MAAO,OACPue,WAAW,EACXI,SAAS,EACTC,OAAQ,SAAAC,GACN,OACE,qCACE,cAACjN,GAAA,EAAD,CAASC,MAAM,wBAAf,SACE,cAACC,GAAA,EAAD,CAAYhN,KAAK,QAAQW,QAAS,kBAjDlDnD,EAAe,CAAEY,KAAM,iBAAkBb,cAiD0Bwc,EAjDN7hB,UAC7DwF,EAAa,CAAEU,KAAM,gBAAiBX,gBAAgB,KAgDtC,SACE,cAAC,KAAD,QAGJ,cAACqP,GAAA,EAAD,CAASC,MAAM,mCAAf,SACE,cAACC,GAAA,EAAD,CAAYhN,KAAK,QAAQa,MAAM,UAAUF,QAAS,WAhDvC,IAAC/C,EAC5BF,EAAa,CAAEU,KAAM,iBAAkB2C,YAAa,EADxBnD,EAgDiEmc,GA/CnC1f,UAAWuD,EAAKtD,UAAW0G,QAAS,MA+CStB,UAAWuB,IAAMC,GAAG,OAA3G,SACE,cAAC,KAAD,QAGH6Y,EAAQlf,IAEL,cAACiS,GAAA,EAAD,CAASC,MAAM,4BAAf,SACE,cAACC,GAAA,EAAD,CAAYhN,KAAK,QAAQa,MAAM,UAAUF,QAAS,kBAzDtCkF,EAyDqEkU,EAzDzDnZ,OAAO9B,KAAK+G,EAAQhL,IAAK,UAAtC,IAACgL,GAyDZ,SACE,cAAC,KAAD,QAGF,SAIZmU,UAAW,CACTC,aAAc,oBACdxd,gBAAiB,YAGrB,CACEsQ,MAAO,YACP7R,MAAO,YACPue,WAAW,EACXI,SAAS,EACTK,QAAQ,EACRF,UAAW,CACTC,aAAc,oBACdxd,gBAAiB,YAGrB,CACEsQ,MAAO,OACP7R,MAAO,OACPue,WAAW,EACXS,QAAQ,EACRF,UAAW,CACTC,aAAc,oBACdxd,gBAAiB,YAGrB,CACEsQ,MAAO,UACP7R,MAAO,mBACPue,WAAW,EACXS,QAAQ,EACRF,UAAW,CACTC,aAAc,oBACdxd,gBAAiB,YAGrB,CACEsQ,MAAO,UACP7R,MAAO,UACPue,WAAW,EACXI,SAAS,EACTK,QAAQ,EACRF,UAAW,CACTC,aAAc,oBACdxd,gBAAiB,aAIvBhB,KAAM,SAAAjB,GAAK,OACT,IAAIiM,SAAQ,SAACC,GAAY,4CACvB,4BAAA9L,EAAA,sEACyB+f,GAAyBngB,EAAOC,EAAgBsR,EAAgBpR,GADzF,OACQsD,EADR,OAEEyI,EAAQ,CACNjL,KAAMwC,EAASvC,MACfX,KAAOkD,EAASlD,KAAO,EACvBwf,WAAYtc,EAASrC,QALzB,4CADuB,uBAAC,WAAD,wBASvBgf,a,qBChKN5e,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCC,OAAQ,CACNU,YAAaX,EAAMG,QAAQ,IAE7Bwe,KAAM,CACJhe,YAAaX,EAAMG,QAAQ,QA0DhBmO,oBAtDf,SAAwBC,GAAQ,IAAD,EACSvT,IADT,sBACpBkR,EADoB,EACpBA,SAAU0S,EADU,EACVA,cADU,EAEexjB,IAFf,mBAEpBqD,EAFoB,KAEpBA,cAAiB6C,EAFG,OAGD/F,IAHC,yCAGjBiG,EAHiB,OAKqBC,mBAAS,MAL9B,mBAKtBod,EALsB,KAKHC,EALG,KASvBC,EAAmB,kBAAMD,EAAqB,OAE9CE,EAAgB,SAAC1S,GACrB,IAAMrB,EAAS4O,KAAKC,MAAMxN,EAAQ2S,MAAMpE,YAAY,GACpDvZ,EAAe,CAAEY,KAAM,kBAAmBoK,QAASA,IACnD9K,EAAa,CAAEU,KAAM,cAAegd,OAAQ,CAACjU,EAAO,GAAIA,EAAO,MX1C5D,SAAqB8B,EAASoS,GACnC,IAAMC,EAAmB,IAAIpS,gBAAgBtI,OAAOoH,SAASmB,QAC7DmS,EAAiBC,IAAI,UAAWF,GAChCpS,EAAQ5D,KAAKzE,OAAOoH,SAASqB,SAAW,IAAMiS,EAAiBE,YWwC7DvP,CAAqBxB,EAAMxB,QAAST,EAAQ6S,YAC5CJ,KAQI1c,EAAUvC,KAEhB,OACE,qCAC4B,IAAzBrB,EAAcS,OACb,cAAC0R,GAAA,EAAD,CAASC,MAAM,yBAAf,SACE,cAACrM,EAAA,EAAD,CAAQG,MAAM,UAAUxB,UAAWd,EAAQpC,OAAQwE,QAAS,SAAC6L,GAAD,OAvB3CiP,EAuBkEjP,EAAEc,cAvBxD0N,EAAqBS,GAAlC,IAACA,GAuBoF3a,UAAW,cAAC,KAAD,IAAhH,8BAIA,cAACqZ,GAAA,EAAD,CAAM9a,UAAWd,EAAQsc,KAAMha,MAAM,UAAU6a,SAf5B,WACzBle,EAAe,CAAEY,KAAM,aACvB6N,GAAuBxB,EAAMxB,UAasDwG,MAAOqL,EAAcngB,EAAc,IAAI5B,OACxH,cAACyU,GAAA,EAAD,CACEtV,GAAG,uBACHuV,SAAUsN,EACVrN,aAAW,EACX5O,KAAMsH,QAAQ2U,GACdhc,QAAS,kBAAMkc,KALjB,SAQI7S,EACGuT,MAAK,SAAC/gB,EAAGghB,GAAJ,OAAUhhB,EAAE7B,KAAK8iB,cAAcD,EAAE7iB,SACtCmB,KAAI,SAAAC,GACH,OAAO,cAACwT,GAAA,EAAD,CAAwChN,QAAS,kBAAMua,EAAc/gB,IAArE,SAA0EA,EAAEpB,MAA7D,eAAiBoB,EAAE2hB,iBC/DjD9f,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCiN,OAAQ,CACN4S,aAAc,SACdtL,UAAW,SACXlG,QAAS,QACTD,WAAY,OACZzN,YAAa,OACbqT,aAAc,QAEhB8L,SAAU,CACRvL,UAAW,SACXP,aAAc,OAEhBnD,MAAO,CACL0D,UAAW,cAwBAwL,OApBf,WACE,IAAM1d,EAAUvC,KAEhB,OACE,gCACE,cAACyD,EAAA,EAAD,CAAYC,UAAU,KAAKC,QAAQ,KAAKkB,MAAM,YAAYxB,UAAWd,EAAQwO,MAA7E,6BACA,cAACtN,EAAA,EAAD,CAAYC,UAAU,IAAIC,QAAQ,YAAYN,UAAWd,EAAQyd,SAAjE,mDACA,qBAAK3c,UAAWd,EAAQ4K,OAAxB,SACE,cAAC,GAAD,CAAgBuB,UAAQ,MAE1B,qBAAKrL,UAAWd,EAAQ4K,OAAxB,SACE,cAAC,GAAD,MAEF,cAAC,GAAD,IACA,uBACA,cAAC,GAAD,Q,4BCpCAnN,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCggB,SAAU,CACRjM,UAAW/T,EAAMG,QAAQ,IAE3B2T,KAAM,CACJ,UAAW,CACTzF,QAAS,QACT4R,UAAW,SACXpf,MAAO,OACPqf,UAAW,OACXC,wBAAyB,QACzBC,eAAgB,WAChBpM,aAAc,OACdqM,cAAe,EACfC,SAAU,SACV,eAAgB,CACd5L,SAAU,GACV6L,WAAY,iDAEd,cAAe,CACb5b,MAA8B,UAAvB3E,EAAMe,QAAQmB,KAAmB,UAAY,WAEtD,eAAgB,CACdwS,SAAU,GACV6L,WAAY,gDACZ5b,MAA8B,UAAvB3E,EAAMe,QAAQmB,KAAmB,UAAY,WAEtD,kBAAmB,CACjBwS,SAAU,GACV6L,WAAY,gDACZxC,aAAa,cAAD,OAAgB/d,EAAMe,QAAQyf,WAG9C,OAAO,2BACFxgB,EAAM8N,WAAW2S,OADtB,IAEE1C,aAAa,aAAD,OAAe/d,EAAMe,QAAQyf,SACzC/f,QAAS,GACTkE,MAAO3E,EAAMe,QAAQ2f,KAAKlL,UAE5B,OAAQ,CACNd,SAAU,GACVD,WAAYzU,EAAM8N,WAAW6S,QAAQ,IACrC9S,WAAY7N,EAAM8N,WAAW8S,iBAC7Bjc,MAAO3E,EAAMe,QAAQ2f,KAAKlL,QAC1BqL,WAAY,MACZ9C,aAAa,aAAD,OAAe/d,EAAMe,QAAQyf,SACzC/f,QAAS,SAKT6J,GAAU,CACdwW,UAAW,CACTC,GAAI,CACFvd,UAAWD,IACXgL,MAAO,CACLyS,cAAc,EACdvd,QAAS,KACTkB,MAAO,cAGXsc,GAAI,CAAEzd,UAAWD,IAAYgL,MAAO,CAAEyS,cAAc,EAAMvd,QAAS,KAAMkB,MAAO,gBAChFuc,GAAI,CAAE1d,UAAWD,IAAYgL,MAAO,CAAEyS,cAAc,EAAMvd,QAAS,KAAMkB,MAAO,gBAChFwc,GAAI,CACF3d,UAAWD,IACXgL,MAAO,CAAEyS,cAAc,EAAMvd,QAAS,KAAM2d,WAAW,EAAMzc,MAAO,gBAEtE0c,EAAG,CAAE7d,UAAWD,IAAYgL,MAAO,CAAE6S,WAAW,EAAMzc,MAAO,gBAC7DjG,EAAG,CAAE8E,UAAWuB,MAChBuc,GAAI,CACF9d,UAAW+d,aAAWzhB,GAAXyhB,EAAsB,gBAAGlf,EAAH,EAAGA,QAAYkM,EAAf,mCAC/B,oBAAIpL,UAAWd,EAAQ2d,SAAvB,SACE,cAACzc,EAAA,EAAD,aAAYC,UAAU,QAAW+K,YAOpC,SAASiT,GAAcjT,GAAQ,IAC5B1P,EAAS0P,EAAT1P,KAD2B,EAEH4C,mBAAS,IAFN,mBAE5BggB,EAF4B,KAElBC,EAFkB,KAG7Brf,EAAUvC,KAWhB,OATA8B,qBAAU,WAAM,4CACd,8BAAAlD,EAAA,sEACyBgG,OAAOid,MAAM9iB,GADtC,cACQ+iB,EADR,gBAEyBA,EAASlB,OAFlC,OAEQe,EAFR,OAGEC,EAAYD,GAHd,4CADc,uBAAC,WAAD,wBAMdI,KACC,CAAChjB,IAEG,cAAC,KAAD,yBAAesE,UAAWd,EAAQyR,KAAMxJ,QAASA,IAAaiE,GAA9D,aAAsEkT,KAGxE,IAAMK,GAAmB3F,IAAM4F,KAAKP,ICxG5B,OAA0B,gCCEnChmB,GAASC,EAAQ,KAEVumB,GAAb,WACE,WAAarmB,GAAM,qBACjBC,OAAOC,OAAOC,KAAMH,GAFxB,6CAKE,SAAUI,GAQR,OAPAD,KAAK8jB,KAAO7jB,EAAKkmB,SACjBnmB,KAAKe,KAAOd,EAAKmmB,SACjBpmB,KAAKqmB,UAAYpmB,EAAKqmB,UACtBtmB,KAAKqjB,WAAkCpjB,EAAKmmB,SAkBlCtZ,MAAM,MAAMyZ,UAAUljB,KAAK,KAAKmjB,QAAQ,YAAa,KAAKnE,cAjBpEriB,KAAK8d,QAAU7d,EAAK6d,QACpB9d,KAAKmjB,KAAOljB,EAAKkjB,KAEVnjB,SAbX,KAiBO,SAAeymB,KAAtB,gC,8CAAO,4BAAA7jB,EAAA,sEACkBU,KAAMC,IAAI7D,GAAOgnB,aADnC,aACCljB,EADD,SAEWA,EAASC,MAAQD,EAASC,KAAKL,OAAS,GAFnD,yCAGII,EAASC,KAAKvB,KAAI,SAAAC,GAAC,OAAK,IAAI+jB,IAAWviB,SAASxB,OAHpD,gCAKI,IALJ,4C,sBCIP,IAAM6B,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCyiB,QAAS,CACPpV,SAAU,EACV5M,QAAST,EAAMG,QAAQ,IAEzB2T,KAAM,CACJzG,SAAU,OAmECqV,OA/Df,WAAmC,IAAD,EACG1nB,IADH,yCACpBkd,EADoB,OAEF9c,IAFE,yCAEpBkG,EAFoB,OAGJ/F,IAHI,yCAGpBiG,EAHoB,KAKhCI,qBAAU,WAAM,4CAEd,wCAAAlD,EAAA,sEACyBikB,KADzB,OACQzW,EADR,OAEQ0S,EAAgB,GAChBgE,EAA0B,GAChC1W,EAAShD,SAAQ,SAAAoD,GACfsS,EAActS,EAAQsT,MAAQtT,EAC9BsW,EAAwBtW,EAAQ6S,YAAc7S,KAEhD4L,EAAoB,CAAEhW,KAAM,cAAegK,SAAUA,EAAU0S,cAAeA,IAExEQ,EAAmB,IAAIpS,gBAAgBtI,OAAOoH,SAASmB,SACvD4V,EAAczD,EAAiB/f,IAAI,aACtBujB,EAAwBC,KACnCvW,EAAUsW,EAAwBC,GAClC5X,EAAS4O,KAAKC,MAAMxN,EAAQ2S,MAAMpE,YAAY,GACpDvZ,EAAe,CAAEY,KAAM,kBAAmBoK,QAASA,IACnD9K,EAAa,CAAEU,KAAM,cAAegd,OAAQ,CAACjU,EAAO,GAAIA,EAAO,OAhBnE,6CAFc,0DAqBdsX,KACC,IAEH,IAAMlgB,EAAUvC,KAQhB,OACE,eAAC,IAAD,WACE,sBAAKqD,UAAWd,EAAQyR,KAAxB,UACE,cAAC,GAAD,CAAWgP,SAAS,EAAO7Q,KAAM,IACjC,cAAC,IAAD,CAAWnR,SAAS,KAApB,SACE,sBAAMqC,UAAWd,EAAQogB,QAAzB,SACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAOhQ,KAAK,IAAIsQ,OAAK,EAACnF,OAAQ,kBAAM,cAAC,GAAD,OACpC,cAAC,IAAD,CAAOnL,KAAK,OAAOsQ,OAAK,EAACnF,OAAQ,kBAAM,cAAC,GAAD,OACvC,cAAC,IAAD,CAAOnL,KAAK,QAAQsQ,OAAK,EAACnF,OAAQ,kBAAM,cAACkE,GAAD,CAAkBjjB,KAAMmkB,QAChE,cAAC,IAAD,CAAOvQ,KAAM,CAAC,SAAU,WAAYjP,UAAW,SAAA+K,GAAuE,OAA5D7J,OAAOoH,SAASwW,QAAQ/T,EAAMzC,SAASqB,SAAS8V,OAAO,IAAY,QAC7H,cAAC,IAAD,CAAOzf,UAjBH,SAAC,GAAD,EAAGsI,SAAH,OACd,8BACE,4EAmBE,cAAC,IAAD,CAAWhL,SAAS,KAApB,SACE,cAAC,GAAD,MAEF,cAAC,GAAD,OAEF,cAAC,GAAD,IACA,cAAC,GAAD,QC/EAoiB,GAA0B,CAC9BhX,SAAU,GACV0S,cAAe,GACf3G,WAAY,IAGRkL,GAAqB,SAACC,EAAOrH,GACjC,IAAM9D,EAAamL,EAAMnL,WACzB,OAAQ8D,EAAO7Z,MACb,IAAK,cACH,OAAO,2BACFkhB,GADL,IAEElX,SAAU6P,EAAO7P,SACjB0S,cAAe7C,EAAO6C,gBAE1B,IAAK,eAIH,OAHK3G,EAAW8D,EAAOpF,SAAQsB,EAAW8D,EAAOpF,OAAS,IAC1DsB,EAAW8D,EAAOpF,OAAOoF,EAAOvF,WAAauF,EAAO9C,UACpDvN,QAAQC,IAAIsM,GACL,2BACFmL,GADL,IAEEnL,WAAYA,IAEhB,IAAK,sBAEH,OADAA,EAAW8D,EAAOpF,OAAOoF,EAAOvF,WAAWnI,QAAU0N,EAAO1N,QACrD,2BACF+U,GADL,IAEEnL,WAAYA,IAEhB,IAAK,sBAGH,OAFKA,EAAW8D,EAAOpF,SAAQsB,EAAW8D,EAAOpF,OAAS,IAC1DsB,EAAW8D,EAAOpF,OAAOoF,EAAOvF,WAAa,CAAEC,IAAK,KAAMpI,SAAS,EAAOyU,SAAS,GAC5E,2BACFM,GADL,IAEEnL,WAAYA,IAEhB,QACE,OAAOmL,IAIPC,GAAqB,CACzB3U,eAAgB,GAChBD,WAAY,GACZoB,eAAgB,KAChBtR,eAAgB,GAChB8C,cAAe,KACfoI,iBAAkB,KAClBtH,aAAc,GACd1D,cAAe,GACf6kB,kBAAmB,KACnBC,sBAAuB,KACvBpL,eAAgB,KAChBjG,yBAA0B,KAC1B4D,wBAAwB,GAGpB0N,GAAgB,SAACJ,EAAOrH,GAC5B,OAAQA,EAAO7Z,MACb,IAAK,iBACH,OAAO,2BACFkhB,GADL,IAEE/hB,cAAe0a,EAAO1a,cACtBc,aAAc4Z,EAAO5Z,eAEzB,IAAK,oBACH,OAAO,2BACFihB,GADL,IAEE3Z,iBAAkBsS,EAAOtS,iBACzBtH,aAAc4Z,EAAO5Z,eAEzB,IAAK,oBACH,OAAO,2BACFihB,GADL,IAEEvT,eAAgBkM,EAAOlM,iBAE3B,IAAK,oBACH,OAAO,2BACFuT,GADL,IAEE3kB,cAAe,GACf0Z,eAAgB,KAChBjG,yBAA0B,KAC1BxD,eAAgBqN,EAAOrN,eACvBnQ,eAAgBwd,EAAOxd,eACvBkQ,WAAY,aAEhB,IAAK,4BACH,OAAO,2BACF2U,GADL,IAEEtN,uBAAwBiG,EAAOjG,yBAEnC,IAAK,kBACH,OAAO,2BACFsN,GADL,IAEE3kB,cAAe,CAACsd,EAAOzP,QAAQsT,MAC/BzH,eAAgB4D,EAAOzP,QACvB4F,yBAA0B6J,EAAOzP,QAAQ6S,WACzCzQ,eAAgB,GAChBnQ,eAAgB,GAChBkQ,WAAY,YAEhB,IAAK,WACH,OAAO,2BACF2U,GADL,IAEE3kB,cAAe,GACf0Z,eAAgB,KAChBjG,yBAA0B,KAC1BxD,eAAgB,GAChBnQ,eAAgB,GAChBkQ,WAAY,KAEhB,QACE,OAAO2U,IAIPK,GAAmB,CACvBnI,kBAAkB,EAClBtL,oBAAqB,GACrBlL,QAAS,CAAC,GACVD,YAAa,EAAE,SAAU,WACzBuT,UAAW,KACXxC,YAAa,CACXzN,WAAW,EACXkO,oBAAoB,EACpBC,mBAAmB,GAErBT,uBAAuB,EACvBnM,mBAAmB,EACnBnI,gBAAgB,EAChBoN,iBAAiB,EACjB+U,iBAAiB,EACjBrL,oBAAoB,EACpBC,qBAAsB,MAGlBqL,GAAc,SAACP,EAAOrH,GAC1B,OAAQA,EAAO7Z,MACb,IAAK,yBACH,OAAO,2BAAKkhB,GAAZ,IAAmBpT,oBAAqB+L,EAAO/L,sBACjD,IAAK,kBACH,OAAO,2BAAKoT,GAAZ,IAAmB9H,iBAAkBS,EAAOT,mBAC9C,IAAK,mBACH,OAAO,2BAAK8H,GAAZ,IAAmB9H,kBAAkB,EAAMtL,oBAAqB+L,EAAO/L,sBACzE,IAAK,gBACH,OAAO,2BAAKoT,GAAZ,IAAmB7hB,eAAgBwa,EAAOxa,iBAC5C,IAAK,mBACH,OAAO,2BAAK6hB,GAAZ,IAAmB1Z,kBAAmBqS,EAAOrS,oBAC/C,IAAK,uBACH,OAAO,2BAAK0Z,GAAZ,IAAmBvN,sBAAuBkG,EAAOlG,wBACnD,IAAK,mBACH,IAAMrH,EAAW4U,EAAMxN,YAEvB,OADApH,EAASuN,EAAO3F,aAAe5H,EAASuN,EAAO3F,YACxC,2BAAKgN,GAAZ,IAAmBxN,YAAapH,IAElC,IAAK,cACH,OAAO,2BAAK4U,GAAZ,IAAmBhL,UAAW2D,EAAOmD,SAEvC,IAAK,wBACH,OAAO,2BAAKkE,GAAZ,IAAmBzU,iBAAkByU,EAAMzU,kBAE7C,IAAK,wBACH,OAAO,2BAAKyU,GAAZ,IAAmBM,iBAAkBN,EAAMM,kBAE7C,IAAK,oBACH,OAAO,2BAAKN,GAAZ,IAAmBzU,iBAAiB,EAAO9J,YAAakX,EAAOlX,YAAaC,QAAS,CAAC,MACxF,IAAK,iBACH,OAAO,2BAAKse,GAAZ,IAAmBve,YAAakX,EAAOlX,YAAaC,QAAS,CAACiX,EAAOjX,WACvE,IAAK,oBACH,OAAO,2BAAKse,GAAZ,IAAmB/K,mBAAoB0D,EAAO1D,mBAAoBC,qBAAsByD,EAAOzD,uBACjG,QACE,OAAO8K,IAIPpjB,GAAQ4jB,YAAe,CAC3B7iB,QAAS,CACPyU,QAAS,CACPjM,KAAMsa,IAAO,MAEfC,UAAW,CACTva,KAAMwa,IAAS,MAEjBza,QAAS,CACPC,KAAMwa,IAAS,MAGnBjD,UAAW,CACTkD,UAAW,CACTtD,KAAM,CACJuD,cAAe,QAEjBnQ,KAAM,CACJmQ,cAAe,SAGnBC,cAAe,CACbjkB,OAAQ,CACNgkB,cAAe,SAGnBE,OAAQ,CACNrQ,KAAM,CACJmQ,cAAe,YAqBRG,OAff,WACE,OACE,cAAC,EAAD,CAA0BzpB,aAAcuoB,GAAyBxoB,QAASyoB,GAA1E,SACE,cAAC,EAAD,CAAqBxoB,aAAc0oB,GAAoB3oB,QAAS8oB,GAAhE,SACE,cAAC,EAAD,CAAmB7oB,aAAc8oB,GAAkB/oB,QAASipB,GAA5D,SACE,eAACU,EAAA,EAAD,CAAerkB,MAAOA,GAAtB,UACE,cAACskB,EAAA,EAAD,IACA,cAAC,GAAD,cC1NQpa,QACW,cAA7BxF,OAAOoH,SAASyY,UAEe,UAA7B7f,OAAOoH,SAASyY,UAEhB7f,OAAOoH,SAASyY,SAASC,MACvB,2D,OCTNC,IAAS7G,OAAO,cAAC,GAAD,IAAS8G,SAASC,eAAe,SD0H3C,kBAAmBja,WACrBA,UAAUka,cAAcC,MACrBC,MAAK,SAAAC,GACJA,EAAaC,gBAEdC,OAAM,SAAAC,GACLxZ,QAAQwZ,MAAMA,EAAMpJ,c","file":"static/js/main.dbcc4edb.chunk.js","sourcesContent":["import React, { createContext, useContext, useReducer } from 'react'\r\n\r\nexport const ApplicationStateContext = createContext()\r\n\r\nexport const ApplicationStateProvider = ({ reducer, initialState, children }) => (\r\n  <ApplicationStateContext.Provider value={useReducer(reducer, initialState)}>\r\n    {children}\r\n  </ApplicationStateContext.Provider>\r\n)\r\n\r\nexport const useApplicationStateValue = () => useContext(ApplicationStateContext)\r\n","import React, { createContext, useContext, useReducer } from 'react'\r\n\r\nexport const SearchStateContext = createContext()\r\n\r\nexport const SearchStateProvider = ({ reducer, initialState, children }) => (\r\n  <SearchStateContext.Provider value={useReducer(reducer, initialState)}>\r\n    {children}\r\n  </SearchStateContext.Provider>\r\n)\r\n\r\nexport const useSearchStateValue = () => useContext(SearchStateContext)\r\n","import React, { createContext, useContext, useReducer } from 'react'\r\n\r\nexport const ViewStateContext = createContext()\r\n\r\nexport const ViewStateProvider = ({ reducer, initialState, children }) => (\r\n  <ViewStateContext.Provider value={useReducer(reducer, initialState)}>\r\n    {children}\r\n  </ViewStateContext.Provider>\r\n)\r\n\r\nexport const useViewStateValue = () => useContext(ViewStateContext)\r\n","import axios from 'axios'\r\nimport moment from 'moment'\r\n\r\nconst config = require('../helpers/config.json')\r\n\r\nexport class Stop {\r\n  constructor (obj) {\r\n    Object.assign(this, obj)\r\n  }\r\n\r\n  fromJson (json) {\r\n    this.id = json.id\r\n    this.routeIds = json.route_ids\r\n    this.routeNames = json.route_names\r\n    this.mobileIds = json.mobile_ids\r\n    this.mobileNames = json.mobile_names\r\n    this.organisationId = json.organisation_id\r\n    this.organisationName = json.organisation_name\r\n    this.name = json.name\r\n    this.community = json.community\r\n    this.address = json.address\r\n    this.postcode = json.postcode\r\n    this.arrivalTimes = json.arrival_times\r\n    this.departureTimes = json.departure_times\r\n    this.routeStart = moment(json.route_start)\r\n    this.routeEnd = moment(json.route_end)\r\n    this.routeDays = json.route_days\r\n    this.routeFrequencies = json.route_frequencies\r\n    this.routeSchedule = json.route_schedule.map(s => moment(s))\r\n    this.timetable = json.timetable\r\n    this.longitude = json.longitude\r\n    this.latitude = json.latitude\r\n    return this\r\n  }\r\n}\r\n\r\nexport async function getQueryStops (query, searchPosition, distance, serviceFilter) {\r\n  let url = config.mobilesApi + '/stops?page=' + (query.page + 1) + '&limit=' + query.pageSize\r\n  if (query.orderBy && query.orderBy.field) url = url + '&sort=' + query.orderBy.field + '&direction=' + query.orderDirection\r\n\r\n  if (searchPosition && searchPosition.length > 1) url = url + '&longitude=' + searchPosition[0] + '&latitude=' + searchPosition[1]\r\n  if (distance && distance !== '') url = url + '&distance=' + distance\r\n\r\n  if (serviceFilter.length > 0) url = url + '&service_codes=' + serviceFilter.join('|')\r\n\r\n  const response = await axios.get(url)\r\n  if (response && response.data && response.data.length > 0) {\r\n    return {\r\n      stops: response.data.map(s => (new Stop()).fromJson(s)),\r\n      total: parseInt(response.headers['x-total-count']),\r\n      page: parseInt(response.headers['x-page'])\r\n    }\r\n  } else {\r\n    return { stops: [], total: 0, page: 1 }\r\n  }\r\n}\r\n\r\nexport async function getAllStops () {\r\n  const response = await axios.get(config.api + '/stops')\r\n  if (response && response.data && response.data.length > 0) {\r\n    return response.data.map(s => (new Stop()).fromJson(s))\r\n  } else {\r\n    return []\r\n  }\r\n}\r\n\r\nexport async function getStopById (id) {\r\n  const response = await axios.get(config.mobilesApi + '/stops/' + id)\r\n  if (response && response.data) {\r\n    return (new Stop()).fromJson(response.data)\r\n  } else {\r\n    return {}\r\n  }\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport ListSubheader from '@material-ui/core/ListSubheader'\r\nimport Table from '@material-ui/core/Table'\r\nimport TableBody from '@material-ui/core/TableBody'\r\nimport TableCell from '@material-ui/core/TableCell'\r\nimport TableContainer from '@material-ui/core/TableContainer'\r\nimport TableHead from '@material-ui/core/TableHead'\r\nimport TableRow from '@material-ui/core/TableRow'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Paper from '@material-ui/core/Paper'\r\n\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles'\r\nimport useMediaQuery from '@material-ui/core/useMediaQuery'\r\n\r\nimport CancelIcon from '@material-ui/icons/CancelTwoTone'\r\nimport EventIcon from '@material-ui/icons/EventTwoTone'\r\nimport WebIcon from '@material-ui/icons/WebTwoTone'\r\nimport LocationOnIcon from '@material-ui/icons/LocationOnTwoTone'\r\nimport PrintIcon from '@material-ui/icons/PrintTwoTone'\r\n\r\nimport { useSearchStateValue } from './context/searchState'\r\nimport { useViewStateValue } from './context/viewState'\r\n\r\nimport * as stopModel from './models/stop'\r\n\r\nconst config = require('./helpers/config.json')\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  button: {\r\n    margin: theme.spacing(1)\r\n  },\r\n  dialog: {\r\n    border: '1px solid #E0E0E0'\r\n  },\r\n  dialogContentActions: {\r\n    backgroundColor: '#fff3e0',\r\n    border: '1px solid #ffe0b2',\r\n    borderRadius: 3,\r\n    padding: 4\r\n  },\r\n  leftIcon: {\r\n    marginRight: theme.spacing(1)\r\n  },\r\n  list: {\r\n    width: '100%',\r\n    maxWidth: 360,\r\n    backgroundColor: theme.palette.background.paper\r\n  },\r\n  progress: {\r\n    margin: theme.spacing(2)\r\n  },\r\n  tablePaper: {\r\n  }\r\n}))\r\n\r\nfunction StopDetails () {\r\n  const [{ currentStopId }, dispatchSearch] = useSearchStateValue() //eslint-disable-line\r\n  const [{ stopDialogOpen }, dispatchView] = useViewStateValue() //eslint-disable-line\r\n\r\n  const [stop, setStop] = useState({})\r\n\r\n  useEffect(() => {\r\n    async function getStop (stopId) {\r\n      const stopData = await stopModel.getStopById(stopId)\r\n      setStop(stopData)\r\n    }\r\n    if (currentStopId != null) getStop(currentStopId)\r\n  }, [currentStopId])\r\n\r\n  const getStopCalendar = () => window.open(config.mobilesApi + '/stops/' + stop.id + '/ics')\r\n\r\n  const getStopPdf = () => window.open(config.mobilesApi + '/stops/' + stop.id + '/pdf', '_blank')\r\n\r\n  const goToWebsite = () => window.open(stop.timetable, '_blank')\r\n\r\n  const viewMapStop = () => {\r\n    dispatchView({ type: 'SetMapPosition', mapPosition: [stop.longitude, stop.latitude], mapZoom: 16 })\r\n  }\r\n\r\n  const close = () => {\r\n    dispatchSearch({ type: 'SetCurrentStop', currentStopId: null, currentPoint: null })\r\n    dispatchView({ type: 'SetStopDialog', stopDialogOpen: false })\r\n  }\r\n\r\n  const theme = useTheme()\r\n  const classes = useStyles()\r\n  const fullScreen = useMediaQuery(theme.breakpoints.down('sm'))\r\n\r\n  return (\r\n    <Dialog\r\n      fullScreen={fullScreen}\r\n      disableBackdropClick\r\n      open={stopDialogOpen}\r\n      onClose={close}\r\n      aria-labelledby='dlg-title'\r\n      BackdropProps={{ invisible: true }}\r\n      PaperProps={{ elevation: 0, className: classes.dialog }}\r\n    >\r\n      {Object.keys(stop).length > 0 && stop.routeDays\r\n        ? (\r\n          <>\r\n            <DialogTitle id='dlg-title'>{stop.name}</DialogTitle>\r\n            <DialogContent>\r\n              <Typography component='h3' variant='subtitle1'>{'Mobile library stop in ' + stop.community + ' ' + stop.organisationName}</Typography>\r\n              <Typography component='p' variant='body2'>{stop.address}</Typography>\r\n              <ListSubheader>Schedules</ListSubheader>\r\n              <TableContainer component={Paper} elevation={0} className={classes.tablePaper}>\r\n                <Table size='small'>\r\n                  <TableHead>\r\n                    <TableRow>\r\n                      <TableCell>Frequency</TableCell>\r\n                      <TableCell align='right'>Next visit</TableCell>\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                    {stop.routeFrequencies.map((rs, idx) => (\r\n                      <TableRow key={'tc_rs_' + idx}>\r\n                        <TableCell component='th' scope='row'>\r\n                          {rs}\r\n                        </TableCell>\r\n                        <TableCell align='right'>{stop.routeSchedule[0].format('dddd Do MMMM h:mma')}</TableCell>\r\n                      </TableRow>\r\n                    ))}\r\n                  </TableBody>\r\n                </Table>\r\n              </TableContainer>\r\n              <br />\r\n              <div className={classes.dialogContentActions}>\r\n                <Button onClick={() => goToWebsite()} color='primary' startIcon={<WebIcon />}>Go to website</Button>\r\n                <Button onClick={getStopCalendar} className={classes.button} color='primary' startIcon={<EventIcon />}>Get calendar</Button>\r\n                <Button onClick={getStopPdf} className={classes.button} color='primary' startIcon={<PrintIcon />}>Print</Button>\r\n                <Button onClick={viewMapStop} className={classes.button} color='primary' startIcon={<LocationOnIcon />} component={Link} to='/map'>See on map</Button>\r\n              </div>\r\n            </DialogContent>\r\n          </>\r\n        ) : <CircularProgress className={classes.progress} color='primary' size={30} />}\r\n      <DialogActions>\r\n        <Button onClick={() => close()} color='secondary' endIcon={<CancelIcon />}>Close</Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n\r\nexport default StopDetails\r\n","import axios from 'axios'\r\n\r\nconst config = require('../helpers/config.json')\r\n\r\nconst libraryTypes = {\r\n  LAL: 'Local authority library',\r\n  'LAL-': 'Local authority run - unstaffed',\r\n  CL: 'Commissioned library',\r\n  CRL: 'Community run library',\r\n  IL: 'Independent library'\r\n}\r\n\r\nexport class Library {\r\n  constructor (obj) {\r\n    Object.assign(this, obj)\r\n  }\r\n\r\n  fromJson (json) {\r\n    this.id = json.id\r\n    this.localAuthority = json['Local authority']\r\n    this.localAuthorityCode = json['Local authority code']\r\n    this.name = json['Library name']\r\n    this.address1 = json['Address 1']\r\n    this.address2 = json['Address 2']\r\n    this.address3 = json['Address 3']\r\n    this.postcode = json.Postcode\r\n    this.postcodeLongitude = json['Postcode longitude']\r\n    this.postcodeLatitude = json['Postcode latitude']\r\n    this.uprn = json['Unique property reference number']\r\n    this.uprnLongitude = json['Unique property reference number longitude']\r\n    this.uprnLongitude = json['Unique property reference number latitude']\r\n    this.statutory = json.Statutory\r\n    this.type = json['Library type']\r\n    this.typeDescription = libraryTypes[json['Library type']]\r\n    this.yearOpened = json['Year opened']\r\n    this.yearClosed = json['Year closed']\r\n    this.mondayStaffedHours = json['Monday staffed hours']\r\n    this.tuesdayStaffedHours = json['Tuesday staffed hours']\r\n    this.wednesdayStaffedHours = json['Wednesday staffed hours']\r\n    this.thursdayStaffedHours = json['Thursday staffed hours']\r\n    this.fridayStaffedHours = json['Friday staffed hours']\r\n    this.saturdaydayStaffedHours = json['Saturday staffed hours']\r\n    this.sundayStaffedHours = json['Sunday staffed hours']\r\n    this.mondayUnstaffedHours = json['Monday unstaffed hours']\r\n    this.tuesdayUnstaffedHours = json['Tuesday unstaffed hours']\r\n    this.wednesdayUnstaffedHours = json['Wednesday unstaffed hours']\r\n    this.thursdayUnstaffedHours = json['Thursday unstaffed hours']\r\n    this.fridayUnstaffedHours = json['Friday unstaffed hours']\r\n    this.saturdaydayUnstaffedHours = json['Saturday unstaffed hours']\r\n    this.sundayUnstaffedHours = json['Sunday unstaffed hours']\r\n    this.colocated = json['Co-located']\r\n    this.colocatedWith = json['Co-located with']\r\n    this.notes = json.Notes\r\n    this.url = json.URL\r\n    this.emailAddress = json['Email address']\r\n    this.longitude = json.Longitude\r\n    this.latitude = json.Latitude\r\n    return this\r\n  }\r\n}\r\n\r\nexport async function getQueryLibraries (query, searchPosition, distance, serviceFilter, closed) {\r\n  let url = config.api + '/libraries?page=' + (query.page + 1) + '&limit=' + query.pageSize + '&closed=' + closed\r\n  const sortMappings = {\r\n    name: 'Library name',\r\n    localAuthority: 'Local authority'\r\n  }\r\n  if (query.orderBy && query.orderBy.field) url = url + '&sort=' + sortMappings[query.orderBy.field] + '&direction=' + query.orderDirection\r\n\r\n  if (searchPosition && searchPosition.length > 1) url = url + '&longitude=' + searchPosition[0] + '&latitude=' + searchPosition[1]\r\n  if (distance && distance !== '') url = url + '&distance=' + distance\r\n\r\n  if (serviceFilter.length > 0) url = url + '&service_codes=' + serviceFilter.join('|')\r\n\r\n  const response = await axios.get(url)\r\n  if (response && response.data && response.data.length > 0) {\r\n    return {\r\n      libraries: response.data.map(s => (new Library()).fromJson(s)),\r\n      total: parseInt(response.headers['x-total-count']),\r\n      page: parseInt(response.headers['x-page'])\r\n    }\r\n  } else {\r\n    return { libraries: [], total: 0, page: 1 }\r\n  }\r\n}\r\n\r\nexport async function getAllLibraries () {\r\n  const response = await axios.get(config.api + '/libraries')\r\n  if (response && response.data && response.data.length > 0) {\r\n    return response.data.map(s => (new Library()).fromJson(s))\r\n  } else {\r\n    return []\r\n  }\r\n}\r\n\r\nexport async function getLibraryById (id) {\r\n  const response = await axios.get(config.api + '/libraries/' + id)\r\n  if (response && response.data) {\r\n    return (new Library()).fromJson(response.data)\r\n  } else {\r\n    return {}\r\n  }\r\n}\r\n","import moment from 'moment'\r\n\r\nconst days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday']\r\n\r\nexport function getDayHours (place, day) {\r\n  const staffedHours = (place[day + 'StaffedHours'] !== '' ? place[day + 'StaffedHours'] : null)\r\n  const unstaffedHours = (place[day + 'UnstaffedHours'] !== '' ? place[day + 'UnstaffedHours'] : null)\r\n  return { day: day, staffed: (staffedHours ? staffedHours.split(',').filter(h => h !== '00:00-00:00').map(h => h.split('-')) : null), unstaffed: (unstaffedHours ? unstaffedHours.split(',').filter(h => h !== '00:00-00:00').map(h => h.split('-')) : null) }\r\n}\r\n\r\nexport function getTodayHours (place) {\r\n  const day = moment().format('dddd').toLowerCase()\r\n  return getDayHours(place, day)\r\n}\r\n\r\nexport function getAllHours (place) {\r\n  const weeklyHours = []\r\n  days.forEach(day => {\r\n    weeklyHours.push(getDayHours(place, day))\r\n  })\r\n  return weeklyHours\r\n}\r\n\r\nexport function getCurrentlyOpen (place) {\r\n  const now = moment()\r\n  const day = now.format('dddd').toLowerCase()\r\n  const hours = place[day + 'StaffedHours']\r\n  let open = false\r\n  if (hours) {\r\n    hours.split(',').forEach(entry => {\r\n      const start = entry[0]\r\n      const end = entry[1]\r\n      if (now.isBetween(moment(start), moment(end))) open = true\r\n    })\r\n  }\r\n  return open\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport ListSubheader from '@material-ui/core/ListSubheader'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Table from '@material-ui/core/Table'\r\nimport TableBody from '@material-ui/core/TableBody'\r\nimport TableCell from '@material-ui/core/TableCell'\r\nimport TableContainer from '@material-ui/core/TableContainer'\r\nimport TableRow from '@material-ui/core/TableRow'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles'\r\nimport useMediaQuery from '@material-ui/core/useMediaQuery'\r\n\r\nimport CancelIcon from '@material-ui/icons/CancelTwoTone'\r\nimport LocationOnIcon from '@material-ui/icons/LocationOnTwoTone'\r\nimport WebIcon from '@material-ui/icons/WebTwoTone'\r\n\r\nimport { useSearchStateValue } from './context/searchState'\r\nimport { useViewStateValue } from './context/viewState'\r\n\r\nimport * as libraryModel from './models/library'\r\nimport * as hoursHelper from './helpers/hours'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  button: {\r\n    margin: theme.spacing(1)\r\n  },\r\n  dialog: {\r\n    border: '1px solid #E0E0E0'\r\n  },\r\n  dialogContentActions: {\r\n    backgroundColor: '#fff3e0',\r\n    border: '1px solid #ffe0b2',\r\n    borderRadius: 3,\r\n    padding: 4\r\n  },\r\n  leftIcon: {\r\n    marginRight: theme.spacing(1)\r\n  },\r\n  list: {\r\n    width: '100%',\r\n    maxWidth: 360,\r\n    backgroundColor: theme.palette.background.paper\r\n  },\r\n  progress: {\r\n    margin: theme.spacing(2)\r\n  },\r\n  table: {\r\n  },\r\n  tablePaper: {\r\n    padding: theme.spacing(1),\r\n    border: '1px solid',\r\n    borderColor: theme.palette.outline.main\r\n  }\r\n}))\r\n\r\nfunction LibraryDetails () {\r\n  const [{ currentLibraryId }, dispatchSearch] = useSearchStateValue() //eslint-disable-line\r\n  const [{ libraryDialogOpen }, dispatchView] = useViewStateValue() //eslint-disable-line\r\n\r\n  const [library, setLibrary] = useState({})\r\n\r\n  useEffect(() => {\r\n    async function getLibrary (libraryId) {\r\n      const libraryData = await libraryModel.getLibraryById(libraryId)\r\n      setLibrary(libraryData)\r\n    }\r\n    if (currentLibraryId != null) getLibrary(currentLibraryId)\r\n  }, [currentLibraryId])\r\n\r\n  const goToWebsite = () => window.open(library.url, '_blank')\r\n\r\n  const viewMapLibrary = () => {\r\n    dispatchView({ type: 'SetMapPosition', mapPosition: [library.longitude, library.latitude], mapZoom: 16 })\r\n  }\r\n\r\n  const close = () => {\r\n    dispatchSearch({ type: 'SetCurrentLibrary', currentLibraryId: null, currentPoint: null })\r\n    dispatchView({ type: 'SetLibraryDialog', libraryDialogOpen: false })\r\n  }\r\n\r\n  const theme = useTheme()\r\n  const classes = useStyles()\r\n  const fullScreen = useMediaQuery(theme.breakpoints.down('sm'))\r\n\r\n  return (\r\n    <Dialog\r\n      fullScreen={fullScreen}\r\n      disableBackdropClick\r\n      open={libraryDialogOpen}\r\n      onClose={close}\r\n      aria-labelledby='dlg-title'\r\n      BackdropProps={{ invisible: true }}\r\n      PaperProps={{ elevation: 0, className: classes.dialog }}\r\n    >\r\n      {Object.keys(library).length > 0\r\n        ? (\r\n          <>\r\n            <DialogTitle id='dlg-title'>{library.name}</DialogTitle>\r\n            <DialogContent>\r\n              <Typography component='h3' variant='subtitle1'>{library.typeDescription + ' in ' + library.localAuthority + '. '}</Typography>\r\n              <Typography component='p' variant='body2'>{[library.address1, library.address2, library.address3, library.postcode].filter(l => Boolean(l)).join(', ')}</Typography>\r\n              <TableContainer component={Paper} elevation={0} className={classes.tablePaper}>\r\n                <Table size='small' className={classes.table}>\r\n                  <TableBody>\r\n                    {hoursHelper.getAllHours(library).map((rs, idx) => (\r\n                      <TableRow key={'tc_rs_' + idx}>\r\n                        <TableCell>{rs.day}</TableCell>\r\n                        <TableCell>{rs.staffed}</TableCell>\r\n                      </TableRow>\r\n                    ))}\r\n                  </TableBody>\r\n                </Table>\r\n              </TableContainer>\r\n              <br />\r\n              <ListSubheader disableSticky>Actions</ListSubheader>\r\n              <div className={classes.dialogContentActions}>\r\n                <Button onClick={() => goToWebsite()} color='primary' startIcon={<WebIcon />}>Go to website</Button>\r\n                <Button onClick={viewMapLibrary} className={classes.button} color='primary' startIcon={<LocationOnIcon />} component={Link} to='/map'>See on map</Button>\r\n              </div>\r\n            </DialogContent>\r\n          </>\r\n        ) : <CircularProgress className={classes.progress} color='primary' size={30} />}\r\n      <DialogActions>\r\n        <Button onClick={() => close()} color='secondary' endIcon={<CancelIcon />}>Close</Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n\r\nexport default LibraryDetails\r\n","import axios from 'axios'\r\n\r\nconst config = require('./config.json')\r\n\r\nexport const getPosition = (options = {}) => {\r\n  return new Promise((resolve, reject) => {\r\n    navigator.geolocation.getCurrentPosition(resolve, reject, options)\r\n  })\r\n}\r\n\r\nexport const getCurrentPosition = async () => {\r\n  var options = {\r\n    enableHighAccuracy: true,\r\n    timeout: 10000,\r\n    maximumAge: 0\r\n  }\r\n\r\n  const position = await getPosition(options)\r\n  return [position.coords.longitude, position.coords.latitude]\r\n}\r\n\r\nexport const getCurrentPostcode = async (lon, lat) => {\r\n  const uri = `https://api.postcodes.io/postcodes?lon=${lon}&lat=${lat}`\r\n  try {\r\n    const res = await axios.get(uri)\r\n    if (res.status === 200) {\r\n      const postcodes = res.data.result\r\n      if (postcodes.length > 0) {\r\n        return postcodes[0].postcode\r\n      }\r\n    }\r\n  } catch (e) {\r\n    console.log(e)\r\n  }\r\n}\r\n\r\nexport const getPostcode = async (postcode) => {\r\n  const response = await axios.get(config.postcodeApi + postcode)\r\n  return {\r\n    location: [response.data.longitude, response.data.latitude],\r\n    library_service_name: response.data.library_service_name,\r\n    library_service: response.data.library_service\r\n  }\r\n}\r\n\r\nexport const getServiceDataFromPostcode = async (postcode, services) => {\r\n  const postcodeData = await getPostcode(postcode)\r\n  const servicesFiltered = services.filter(s => s.Code === postcodeData.library_service)\r\n  if (servicesFiltered.length > 0) return { service: servicesFiltered[0], location: postcodeData.location }\r\n  return {}\r\n}\r\n\r\nexport const getNearestLibrary = async (location) => {\r\n  const response = await axios.get(config.libraryApi + '?latitude=' + location[1] + '&longitude=' + location[0])\r\n  return (response && response.data && response.data.length > 0 ? response.data[0] : null)\r\n}\r\n\r\nexport const getNearestMobileLibrary = async (location) => {\r\n  const response = await axios.get(config.mobileLibraryApi + '?latitude=' + location[1] + '&longitude=' + location[0])\r\n  return (response && response.data && response.data.length > 0 ? response.data[0] : null)\r\n}\r\n\r\nexport const validatePostcode = (postcode) => {\r\n  return /^[A-Z]{1,2}\\d[A-Z\\d]? ?\\d[A-Z]{2}$/.test(postcode.trim())\r\n}\r\n","export function addService (history, systemName) {\r\n  const currentUrlParams = new URLSearchParams(window.location.search)\r\n  currentUrlParams.set('service', systemName)\r\n  history.push(window.location.pathname + '?' + currentUrlParams.toString())\r\n}\r\n\r\nexport function clearService (history) {\r\n  const currentUrlParams = new URLSearchParams(window.location.search)\r\n  currentUrlParams.delete('service')\r\n  history.push(window.location.pathname)\r\n}\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport { withRouter } from 'react-router'\r\n\r\nimport Box from '@material-ui/core/Box'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport Divider from '@material-ui/core/Divider'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport InputBase from '@material-ui/core/InputBase'\r\nimport ListSubheader from '@material-ui/core/ListSubheader'\r\nimport Menu from '@material-ui/core/Menu'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\n\r\nimport { fade } from '@material-ui/core/styles/colorManipulator'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\n\r\nimport ClearIcon from '@material-ui/icons/ClearTwoTone'\r\nimport MyLocationIcon from '@material-ui/icons/MyLocationTwoTone'\r\nimport SearchIcon from '@material-ui/icons/SearchTwoTone'\r\nimport SettingsIcon from '@material-ui/icons/SettingsTwoTone'\r\n\r\nimport { useSearchStateValue } from './context/searchState'\r\nimport { useViewStateValue } from './context/viewState'\r\n\r\nimport * as geoHelper from './helpers/geo'\r\nimport * as urlHelper from './helpers/url'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  grow: {\r\n    flexGrow: 1\r\n  },\r\n  iconButton: {\r\n    padding: theme.spacing()\r\n  },\r\n  iconProgress: {\r\n    margin: theme.spacing()\r\n  },\r\n  inputInput: {\r\n    paddingTop: theme.spacing(),\r\n    paddingRight: theme.spacing(),\r\n    paddingBottom: theme.spacing(),\r\n    paddingLeft: theme.spacing(2),\r\n    fontWeight: theme.typography.fontWeightBold\r\n  },\r\n  search: {\r\n    position: 'relative',\r\n    border: '1px solid #E0E0E0',\r\n    borderColor: theme.palette.outline.main,\r\n    borderRadius: theme.shape.borderRadius,\r\n    backgroundColor: fade(theme.palette.common.white, 0.8),\r\n    '&:hover': {\r\n      backgroundColor: fade(theme.palette.common.white, 0.9)\r\n    },\r\n    marginLeft: 0,\r\n    marginRight: theme.spacing(),\r\n    display: 'flex',\r\n    maxWidth: 240\r\n  }\r\n}))\r\n\r\nfunction usePrevious (value) {\r\n  const ref = useRef()\r\n  useEffect(() => {\r\n    ref.current = value\r\n  })\r\n  return ref.current\r\n}\r\n\r\nfunction PostcodeSearch (props) {\r\n  const { settings } = props\r\n  const [{ searchType, searchPostcode, searchPosition }, dispatchSearch] = useSearchStateValue() //eslint-disable-line\r\n  const [{ loadingPostcode, loadingLocation }, dispatchView] = useViewStateValue() //eslint-disable-line\r\n\r\n  const [tempPostcode, setTempPostcode] = useState(searchPostcode || '')\r\n  const [anchor, setAnchor] = useState(null)\r\n\r\n  const prevProps = usePrevious({ searchPostcode })\r\n\r\n  useEffect(() => {\r\n    if (prevProps && searchPostcode !== prevProps.searchPostcode) setTempPostcode(searchPostcode)\r\n  }, [searchPostcode, prevProps])\r\n\r\n  const getLocation = async () => {\r\n    if (!loadingLocation) {\r\n      dispatchView({ type: 'ToggleLoadingLocation' })\r\n      const pos = (searchPosition.length > 0 ? searchPosition : (await geoHelper.getCurrentPosition()))\r\n      dispatchSearch({ type: 'SetLocation', searchPosition: pos })\r\n      const postcode = await getLocationPostcode(pos)\r\n      dispatchView({ type: 'ToggleLoadingLocation' })\r\n      if (postcode && postcode !== '') postcodeSearch(postcode)\r\n    }\r\n  }\r\n\r\n  const getLocationPostcode = async (location) => {\r\n    if (location.length > 0) {\r\n      const postcode = await geoHelper.getCurrentPostcode(...location)\r\n      setTempPostcode(postcode)\r\n      return postcode\r\n    }\r\n  }\r\n\r\n  const openSettingsMenu = (e) => setAnchor(e.currentTarget)\r\n\r\n  const closeSettingsMenu = () => setAnchor(null)\r\n\r\n  const setSearchDistance = (searchDistance) => {\r\n    closeSettingsMenu()\r\n    dispatchSearch({ type: 'SetSearchDistance', searchDistance: searchDistance })\r\n    if (searchType === 'postcode') postcodeSearch(tempPostcode)\r\n  }\r\n\r\n  const clearSearch = () => {\r\n    setTempPostcode('')\r\n    dispatchSearch({ type: 'ClearAll' })\r\n    urlHelper.clearService(props.history)\r\n  }\r\n\r\n  const postcodeSearch = async (postcode = tempPostcode) => {\r\n    if (!postcode || postcode === '') {\r\n      dispatchView({ type: 'ShowNotification', notificationMessage: 'Please enter a postcode before searching', notificationSeverity: 'warning' })\r\n      return\r\n    }\r\n    dispatchView({ type: 'ToggleLoadingPostcode' })\r\n    dispatchView({ type: 'LoadingPostcode' })\r\n    if (geoHelper.validatePostcode(postcode)) {\r\n      clearSearch()\r\n      const service = await geoHelper.getPostcode(postcode.trim())\r\n      if (service && service.location && service.location.length > 0) {\r\n        dispatchSearch({ type: 'SetPostcodeSearch', searchPostcode: postcode, searchPosition: service.location })\r\n        dispatchView({ type: 'SetMapPosition', mapPosition: service.location, mapZoom: 14 })\r\n      } else {\r\n        dispatchView({ type: 'ShowNotification', notificationMessage: 'We could not find that postcode', notificationSeverity: 'error' })\r\n      }\r\n    } else {\r\n      dispatchView({ type: 'ShowNotification', notificationMessage: 'We could not find that postcode', notificationSeverity: 'error' })\r\n    }\r\n    dispatchView({ type: 'ToggleLoadingPostcode' })\r\n  }\r\n\r\n  const classes = useStyles()\r\n\r\n  return (\r\n    <div className={classes.search}>\r\n      <InputBase\r\n        placeholder='Postcode'\r\n        classes={{\r\n          input: classes.inputInput\r\n        }}\r\n        value={tempPostcode}\r\n        onChange={(e) => setTempPostcode(e.target.value.toUpperCase())}\r\n        onKeyDown={(e) => { if (e.keyCode === 13) postcodeSearch() }}\r\n        inputProps={{ 'aria-label': 'search by postcode' }}\r\n      />\r\n      {searchType === 'postcode'\r\n        ? (\r\n          <Tooltip title='Clear search'>\r\n            <IconButton\r\n              aria-label='Clear search'\r\n              className={classes.iconButton}\r\n              onClick={() => clearSearch()}\r\n            >\r\n              <ClearIcon />\r\n            </IconButton>\r\n          </Tooltip>\r\n        )\r\n        : null}\r\n      <div className={classes.grow} />\r\n      <Tooltip title='Search by postcode'>\r\n        {!loadingPostcode\r\n          ? (\r\n            <IconButton\r\n              aria-label='Search'\r\n              color='primary'\r\n              className={classes.iconButton}\r\n              onClick={() => postcodeSearch()}\r\n            >\r\n              <SearchIcon />\r\n            </IconButton>\r\n          ) : <Box position='relative' display='inline-flex' className={classes.iconProgress}><CircularProgress size={22} /></Box>}\r\n      </Tooltip>\r\n      <Divider orientation='vertical' flexItem />\r\n      <Tooltip title='Use your current location'>\r\n        {!loadingLocation\r\n          ? (\r\n            <IconButton\r\n              aria-label='Search by current location'\r\n              color='primary'\r\n              className={classes.iconButton}\r\n              onClick={() => getLocation()}\r\n            >\r\n              <MyLocationIcon />\r\n            </IconButton>\r\n          ) : <Box position='relative' display='inline-flex' className={classes.iconProgress}><CircularProgress size={22} /></Box>}\r\n      </Tooltip>\r\n      {settings\r\n        ? (\r\n          <Tooltip title='Change search settings'>\r\n            <IconButton\r\n              aria-label='Open search settings menu'\r\n              className={classes.iconButton}\r\n              color='secondary'\r\n              onClick={(e) => { openSettingsMenu(e) }}\r\n            >\r\n              <SettingsIcon />\r\n            </IconButton>\r\n          </Tooltip>\r\n        ) : null}\r\n      <Menu\r\n        id='mnu-settings'\r\n        anchorEl={anchor}\r\n        keepMounted\r\n        open={Boolean(anchor)}\r\n        onClose={() => closeSettingsMenu()}\r\n      >\r\n        <ListSubheader disableSticky>Search distance</ListSubheader>\r\n        <MenuItem onClick={() => setSearchDistance(1609)}>1 mile</MenuItem>\r\n        <MenuItem onClick={() => setSearchDistance(4827)}>3 miles</MenuItem>\r\n        <MenuItem onClick={() => setSearchDistance(8045)}>5 miles</MenuItem>\r\n        <MenuItem onClick={() => setSearchDistance(16090)}>10 miles</MenuItem>\r\n        <MenuItem onClick={() => setSearchDistance(32180)}>20 miles</MenuItem>\r\n        <MenuItem onClick={() => setSearchDistance(80450)}>50 miles</MenuItem>\r\n      </Menu>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default withRouter(PostcodeSearch)\r\n","import React, { useState } from 'react'\r\n\r\nimport { Link, useLocation } from 'react-router-dom'\r\n\r\nimport AppBar from '@material-ui/core/AppBar'\r\nimport Button from '@material-ui/core/Button'\r\nimport Container from '@material-ui/core/Container'\r\nimport Hidden from '@material-ui/core/Hidden'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Tab from '@material-ui/core/Tab'\r\nimport Tabs from '@material-ui/core/Tabs'\r\nimport Toolbar from '@material-ui/core/Toolbar'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\n\r\nimport BookIcon from '@material-ui/icons/BookTwoTone'\r\nimport CancelIcon from '@material-ui/icons/CancelTwoTone'\r\nimport DirectionBusIcon from '@material-ui/icons/DirectionsBusTwoTone'\r\nimport GridOnIcon from '@material-ui/icons/GridOnTwoTone'\r\nimport HeadsetIcon from '@material-ui/icons/HeadsetTwoTone'\r\nimport LocalLibraryIcon from '@material-ui/icons/LocalLibraryTwoTone'\r\nimport MapIcon from '@material-ui/icons/MapTwoTone'\r\nimport MovieIcon from '@material-ui/icons/MovieTwoTone'\r\nimport SearchIcon from '@material-ui/icons/SearchTwoTone'\r\nimport PetsIcon from '@material-ui/icons/PetsTwoTone'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles'\r\n\r\nimport PostcodeSearch from './PostcodeSearch'\r\n\r\nimport { useSearchStateValue } from './context/searchState'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    position: 'relative'\r\n  },\r\n  appBarTransparent: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    backgroundColor: 'rgba(250, 250, 250, 0.8)',\r\n    position: 'relative'\r\n  },\r\n  grow: {\r\n    flexGrow: 1\r\n  },\r\n  topIcon: {\r\n    backgroundColor: 'rgba(250, 250, 250, 0)',\r\n    '&:hover': {\r\n      backgroundColor: 'rgba(250, 250, 250, 0)'\r\n    }\r\n  },\r\n  topTitle: {\r\n    position: 'relative',\r\n    zIndex: theme.zIndex.drawer + 1\r\n  }\r\n}))\r\n\r\nfunction AppHeader (props) {\r\n  const { site } = props\r\n  const [{ currentServiceSystemName }] = useSearchStateValue() //eslint-disable-line\r\n\r\n  const [appsOpen, setAppsOpen] = useState(false)\r\n  const [tabValue, setTabValue] = useState(site)\r\n\r\n  const location = useLocation()\r\n  const classes = useStyles()\r\n\r\n  const currentServicePath = (path) => {\r\n    if (currentServiceSystemName) return path + '?service=' + currentServiceSystemName\r\n    return path\r\n  }\r\n\r\n  const sites = [\r\n    {\r\n      title: 'Library lab',\r\n      url: 'https://www.librarylab.uk',\r\n      icon: <PetsIcon />,\r\n      links: [\r\n        {\r\n          title: 'About library lab',\r\n          short: 'Lab',\r\n          icon: <PetsIcon />,\r\n          to: '/'\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Libraries at home',\r\n      url: 'https://www.librariesathome.co.uk',\r\n      icon: <LocalLibraryIcon />,\r\n      links: [\r\n        {\r\n          title: 'Find service',\r\n          short: 'Find',\r\n          icon: <SearchIcon />,\r\n          to: currentServicePath('/')\r\n        },\r\n        {\r\n          title: 'Watch library TV',\r\n          short: 'Watch',\r\n          icon: <MovieIcon />,\r\n          to: '/watch'\r\n        },\r\n        {\r\n          title: 'Read blogs',\r\n          short: 'Read',\r\n          icon: <BookIcon />,\r\n          to: '/read'\r\n        },\r\n        {\r\n          title: 'Listen podcasts',\r\n          short: 'Listen',\r\n          icon: <HeadsetIcon />,\r\n          to: '/listen'\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Mobile libraries',\r\n      url: 'https://www.mobilelibraries.org',\r\n      icon: <DirectionBusIcon />,\r\n      links: [\r\n        {\r\n          title: 'Find my stop',\r\n          short: 'Stops',\r\n          icon: <GridOnIcon />,\r\n          to: '/'\r\n        },\r\n        {\r\n          title: 'Mobile vans',\r\n          short: 'Vans',\r\n          icon: <DirectionBusIcon />,\r\n          to: '/mobiles'\r\n        },\r\n        {\r\n          title: 'Map of stops',\r\n          short: 'Map',\r\n          icon: <MapIcon />,\r\n          to: '/map'\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Library map',\r\n      url: 'https://www.librarymap.co.uk',\r\n      icon: <MapIcon />,\r\n      links: [\r\n        {\r\n          title: 'Find my library',\r\n          short: 'Find',\r\n          icon: <GridOnIcon />,\r\n          to: currentServicePath('/')\r\n        },\r\n        {\r\n          title: 'Map of libraries',\r\n          short: 'Map',\r\n          icon: <MapIcon />,\r\n          to: currentServicePath('/map')\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n\r\n  const appBarClass = (location.pathname === '/map' ? classes.appBarTransparent : classes.appBar)\r\n\r\n  return (\r\n    <>\r\n      <Container maxWidth='lg' className={classes.topTitle}>\r\n        <Toolbar>\r\n          <IconButton aria-label='Toggle site menu' className={classes.topIcon} color='primary' onClick={() => { setAppsOpen(!appsOpen); setTabValue(site) }}>\r\n            {appsOpen ? <CancelIcon /> : <PetsIcon />}\r\n          </IconButton>\r\n          <span className={classes.grow} />\r\n        </Toolbar>\r\n      </Container>\r\n      {appsOpen ? (\r\n        <AppBar position='static' color='transparent' elevation={0} className={appBarClass}>\r\n          <Container maxWidth='lg'>\r\n            <Tabs\r\n              value={tabValue}\r\n              onChange={(e, v) => { setTabValue(v) }}\r\n              variant='scrollable'\r\n              scrollButtons='on'\r\n              indicatorColor='primary'\r\n              textColor='secondary'\r\n            >\r\n              {sites.map((s, idx) => {\r\n                return (\r\n                  <Tab key={'tb_site_' + idx} label={s.title} icon={s.icon} />\r\n                )\r\n              })}\r\n            </Tabs>\r\n          </Container>\r\n        </AppBar>\r\n      ) : null}\r\n      <AppBar\r\n        position='static'\r\n        color='transparent'\r\n        elevation={0}\r\n        className={appBarClass}\r\n      >\r\n        <Container maxWidth='lg'>\r\n          <Toolbar>\r\n            <Hidden mdUp>\r\n              {sites[tabValue].links.map((link, idx) => {\r\n                return (\r\n                  <Tooltip title={link.title} key={'icnb_menu_lg_' + idx}>\r\n                    <Button\r\n                      component={Link}\r\n                      to={(tabValue === site ? link.to : sites[tabValue].url + link.to)}\r\n                      disableRipple={location.pathname === link.to}\r\n                      disableFocusRipple={location.pathname === link.to}\r\n                      color='secondary'\r\n                      size='large'\r\n                      startIcon={link.icon}\r\n                    >\r\n                      {link.short}\r\n                    </Button>\r\n                  </Tooltip>\r\n                )\r\n              })}\r\n            </Hidden>\r\n            <Hidden smDown>\r\n              {sites[tabValue].links.map((link, idx) => {\r\n                return (\r\n                  <Tooltip title={link.title} key={'icnb_menu_lg_' + idx}>\r\n                    <Button\r\n                      component={Link}\r\n                      to={(tabValue === site ? link.to : sites[tabValue].url + link.to)}\r\n                      disableRipple={location.pathname === link.to}\r\n                      disableFocusRipple={location.pathname === link.to}\r\n                      color='secondary'\r\n                      size='large'\r\n                      startIcon={link.icon}\r\n                    >\r\n                      {link.title}\r\n                    </Button>\r\n                  </Tooltip>\r\n                )\r\n              })}\r\n            </Hidden>\r\n            <span className={classes.grow} />\r\n            {location.pathname === '/map' ? <PostcodeSearch /> : null}\r\n          </Toolbar>\r\n        </Container>\r\n      </AppBar>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default AppHeader\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport Divider from '@material-ui/core/Divider'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport MaterialLink from '@material-ui/core/Link'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport FavoriteIcon from '@material-ui/icons/FavoriteTwoTone'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    paddingTop: theme.spacing(5),\r\n    marginTop: theme.spacing(3),\r\n    marginBottom: theme.spacing(5),\r\n    width: '100%'\r\n  },\r\n  bullet: {\r\n    margin: theme.spacing(2)\r\n  },\r\n  grid: {\r\n    marginTop: theme.spacing(2)\r\n  },\r\n  loveIcon: {\r\n    marginLeft: theme.spacing(1),\r\n    marginRight: theme.spacing(1)\r\n  },\r\n  footerText: {\r\n    verticalAlign: 'middle',\r\n    display: 'inline-flex'\r\n  },\r\n  footerRight: {\r\n    textAlign: 'right'\r\n  },\r\n  tapTarget: {\r\n    lineHeight: 2.2,\r\n    fontSize: 16\r\n  }\r\n}))\r\n\r\nfunction Footer () {\r\n  const classes = useStyles()\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Divider />\r\n      <Grid container spacing={3} className={classes.grid}>\r\n        <Grid item xs={12} sm={6} md={6} lg={6} xl={6}>\r\n          <Typography variant='button'>\r\n            <MaterialLink href='https://www.librarylab.uk/library-map' target='_blank' title='About the library map library lab project' className={classes.tapTarget}>About this project</MaterialLink>\r\n            <span className={classes.bullet}> &#8226; </span>\r\n            <MaterialLink component={Link} to='/data' title='Maintaining the data used on this site and licensing' className={classes.tapTarget}>Data</MaterialLink>\r\n            <span className={classes.bullet}> &#8226; </span>\r\n            <MaterialLink href='https://github.com/LibrariesHacked/librarymap' target='_blank' title='Project on GitHub' className={classes.tapTarget}>GitHub</MaterialLink>\r\n          </Typography><br />\r\n          <Typography variant='body2' className={classes.footerText}>A Library Lab project by Libraries Hacked.</Typography>\r\n        </Grid>\r\n        <Grid className={classes.footerRight} item xs={12} sm={6} md={6} lg={6} xl={6}>\r\n          <Typography variant='body1' className={classes.footerText}>In memory of Paul Rowe <FavoriteIcon color='primary' className={classes.loveIcon} /></Typography><br />\r\n          <Typography variant='button'>\r\n            <MaterialLink href='https://www.mind.org.uk/donate/' title='Donate to Mind' className={classes.tapTarget} target='_blank'>Donate to Mind</MaterialLink>\r\n          </Typography>\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Footer\r\n","import React from 'react'\r\n\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles'\r\n\r\nimport { useSearchStateValue } from './context/searchState'\r\n\r\nimport Face from '@material-ui/icons/FaceTwoTone'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  avatar: {\r\n    margin: 0\r\n  },\r\n  avatarOn: {\r\n    margin: 0,\r\n    cursor: 'pointer',\r\n    backgroundColor: theme.palette.primary.main\r\n  }\r\n}))\r\n\r\nfunction MeAvatar () {\r\n  const [{ searchType }] = useSearchStateValue()\r\n\r\n  const classes = useStyles()\r\n\r\n  return (\r\n    <Tooltip title='Me'>\r\n      <Avatar\r\n        className={searchType === 'gps' ? classes.avatarOn : classes.avatar}\r\n      >\r\n        <Face />\r\n      </Avatar>\r\n    </Tooltip>\r\n  )\r\n}\r\n\r\nexport default MeAvatar\r\n","import React from 'react'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport ListSubheader from '@material-ui/core/ListSubheader'\r\nimport Switch from '@material-ui/core/Switch'\r\nimport useMediaQuery from '@material-ui/core/useMediaQuery'\r\n\r\nimport CancelIcon from '@material-ui/icons/CancelTwoTone'\r\n\r\nimport { useTheme, makeStyles } from '@material-ui/core/styles'\r\n\r\nimport { useSearchStateValue } from './context/searchState'\r\nimport { useViewStateValue } from './context/viewState'\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  dialog: {\r\n    border: '1px solid #E0E0E0'\r\n  }\r\n}))\r\n\r\nfunction MapSettings () {\r\n  const [{ mapSettings, mapSettingsDialogOpen }, dispatchView] = useViewStateValue()\r\n  const [{ displayClosedLibraries }, dispatchSearch] = useSearchStateValue() //eslint-disable-line\r\n\r\n  const closeDialog = () => {\r\n    dispatchView({ type: 'SetMapSettingsDialog', mapSettingsDialogOpen: false })\r\n  }\r\n\r\n  const handleLibrariesChange = () => {\r\n    dispatchView({ type: 'ToggleMapSetting', mapSetting: 'libraries' })\r\n  }\r\n\r\n  const handleClosedLibrariesChange = () => {\r\n    dispatchSearch({ type: 'SetDisplayClosedLibraries', displayClosedLibraries: !displayClosedLibraries })\r\n  }\r\n\r\n  const handleMobileLibraryStopsChange = () => {\r\n    dispatchView({ type: 'ToggleMapSetting', mapSetting: 'mobileLibraryStops' })\r\n  }\r\n\r\n  const handleAuthorityBoundaryChange = () => {\r\n    dispatchView({ type: 'ToggleMapSetting', mapSetting: 'authorityBoundary' })\r\n  }\r\n\r\n  const classes = useStyles()\r\n  const theme = useTheme()\r\n  const fullScreen = useMediaQuery(theme.breakpoints.down('sm'))\r\n\r\n  return (\r\n    <Dialog\r\n      fullScreen={fullScreen}\r\n      disableBackdropClick\r\n      open={mapSettingsDialogOpen}\r\n      onClose={closeDialog}\r\n      BackdropProps={{\r\n        invisible: true\r\n      }}\r\n      PaperProps={{ elevation: 0, className: classes.dialog }}\r\n    >\r\n      <DialogTitle>Map settings</DialogTitle>\r\n      <DialogContent>\r\n        <ListSubheader disableSticky>Display</ListSubheader>\r\n        <FormControlLabel\r\n          control={\r\n            <Switch\r\n              checked={mapSettings.libraries}\r\n              onChange={handleLibrariesChange}\r\n              name='sw_libraries'\r\n              color='primary'\r\n            />\r\n          }\r\n          label='Libraries'\r\n        /><br />\r\n        <FormControlLabel\r\n          control={\r\n            <Switch\r\n              checked={displayClosedLibraries}\r\n              onChange={handleClosedLibrariesChange}\r\n              name='sw_closedlibraries'\r\n              color='primary'\r\n            />\r\n          }\r\n          label='Closed libraries'\r\n        /><br />\r\n        <FormControlLabel\r\n          control={\r\n            <Switch\r\n              checked={mapSettings.mobileLibraryStops}\r\n              onChange={handleMobileLibraryStopsChange}\r\n              name='sw_mobile_library_stops'\r\n              color='primary'\r\n            />\r\n          }\r\n          label='Mobile library stops'\r\n        /><br />\r\n        <FormControlLabel\r\n          control={\r\n            <Switch\r\n              checked={mapSettings.authorityBoundary}\r\n              onChange={handleAuthorityBoundaryChange}\r\n              name='sw_authority_boundary'\r\n              color='primary'\r\n            />\r\n          }\r\n          label='Library service boundaries'\r\n        />\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={closeDialog} color='secondary' endIcon={<CancelIcon />}>Close</Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n\r\nexport default MapSettings\r\n","import axios from 'axios'\r\n\r\nconst config = require('../helpers/config.json')\r\n\r\nexport class Isochrone {\r\n  constructor (obj) {\r\n    Object.assign(this, obj)\r\n  }\r\n\r\n  fromJson (json, transport) {\r\n    this.transport = transport\r\n    this.geo = json\r\n    this.display = true\r\n    return this\r\n  }\r\n}\r\n\r\nexport async function getIsochrone (point, transport) {\r\n  const settings = config.travel.filter(n => n.name === transport)[0]\r\n  const url = config.isochroneApi + transport + '?longitude=' + point[0] + '&latitude=' + point[1] + '&interval=' + settings.interval + '&duration=' + settings.duration\r\n\r\n  const response = await axios.get(url)\r\n  if (response && response.data) {\r\n    return new Isochrone().fromJson(response.data, transport)\r\n  } else {\r\n    return null\r\n  }\r\n}\r\n","import React, { useEffect } from 'react'\r\n\r\nimport Fab from '@material-ui/core/Fab'\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport Menu from '@material-ui/core/Menu'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\n\r\nimport ReactMapboxGl, { ZoomControl, Source, Layer, GeoJSONLayer, Marker } from 'react-mapbox-gl'\r\n\r\nimport LayersIcon from '@material-ui/icons/LayersTwoTone'\r\nimport DirectionsBike from '@material-ui/icons/DirectionsBikeTwoTone'\r\nimport DirectionsWalk from '@material-ui/icons/DirectionsWalkTwoTone'\r\nimport DirectionsCar from '@material-ui/icons/DirectionsCarTwoTone'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles'\r\n\r\nimport { useApplicationStateValue } from './context/applicationState'\r\nimport { useSearchStateValue } from './context/searchState'\r\nimport { useViewStateValue } from './context/viewState'\r\n\r\nimport MeAvatar from './MeAvatar'\r\nimport MapSettings from './MapSettings'\r\n\r\nimport * as isochroneModel from './models/isochrone'\r\nimport * as stopModel from './models/stop'\r\nimport * as libraryModel from './models/library'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  listItemRoot: {\r\n    minWidth: 34\r\n  },\r\n  menu: {\r\n    border: '1px solid #E0E0E0'\r\n  },\r\n  settings: {\r\n    position: 'absolute',\r\n    bottom: theme.spacing(4),\r\n    right: theme.spacing(4)\r\n  }\r\n}))\r\n\r\nconst config = require('./helpers/config.json')\r\n\r\nconst Map = ReactMapboxGl({\r\n  minZoom: 5,\r\n  maxZoom: 18,\r\n  customAttribution: 'Contains public sector information licensed under the Open Government Licence'\r\n})\r\n\r\nconst libraryTiles = [config.libraryTiles]\r\nconst libraryBuildingsTiles = [config.libraryBuildingsTiles]\r\nconst libraryAuthorityTiles = [config.libraryAuthorityTiles]\r\nconst stopTiles = [config.stopTiles]\r\nconst tripTiles = [config.tripTiles]\r\n\r\nfunction LibraryMap () {\r\n  const [{ isochrones }, dispatchApplication] = useApplicationStateValue() //eslint-disable-line\r\n  const [{ searchType, searchPosition, currentStopId, currentLibraryId, currentPoint, currentService, displayClosedLibraries }, dispatchSearch] = useSearchStateValue() //eslint-disable-line\r\n  const [{ mapZoom, mapPosition, mapSettings, mapSettingsDialogOpen, mapBounds, isochronesMenuOpen, isochronesMenuAnchor }, dispatchView] = useViewStateValue() //eslint-disable-line\r\n\r\n  useEffect(() => {\r\n  }, [])\r\n\r\n  var clickLibrary = async (map) => {\r\n    if (map && map.features && map.features.length > 0 && map.features[0].properties) {\r\n      var id = map.features[0].properties.id\r\n      var library = await libraryModel.getLibraryById(id)\r\n      dispatchSearch({ type: 'SetCurrentLibrary', currentLibraryId: id, currentPoint: [library.longitude, library.latitude] })\r\n      dispatchView({ type: 'SetIsochronesMenu', isochronesMenuOpen: true, isochronesMenuAnchor: { left: map.point.x, top: map.point.y } })\r\n    }\r\n  }\r\n\r\n  const clickStop = async (map) => {\r\n    if (map && map.features && map.features.length > 0 && map.features[0].properties) {\r\n      var id = map.features[0].properties.id\r\n      var stop = await stopModel.getStopById(id)\r\n      dispatchSearch({ type: 'SetCurrentStop', currentStopId: id, currentPoint: [stop.longitude, stop.latitude] })\r\n      dispatchView({ type: 'SetIsochronesMenu', isochronesMenuOpen: true, isochronesMenuAnchor: { left: map.point.x, top: map.point.y } })\r\n    }\r\n  }\r\n\r\n  var moreInfoIsochronesMenu = () => {\r\n    closeIsochronesMenu()\r\n    if (currentStopId) dispatchView({ type: 'SetStopDialog', stopDialogOpen: true })\r\n    if (currentLibraryId) dispatchView({ type: 'SetLibraryDialog', libraryDialogOpen: true })\r\n  }\r\n\r\n  var toggleIsochrone = async (transport) => {\r\n    if (isochrones[currentPoint] && isochrones[currentPoint][transport]) {\r\n      dispatchApplication({ type: 'SetIsochroneDisplay', point: currentPoint, transport: transport, display: !isochrones[currentPoint][transport].display })\r\n    } else {\r\n      const isochrone = await isochroneModel.getIsochrone(currentPoint, transport)\r\n      dispatchApplication({ type: 'AddIsochrone', point: currentPoint, transport: transport, isochrone: isochrone })\r\n    }\r\n  }\r\n\r\n  var closeIsochronesMenu = () => dispatchView({ type: 'SetIsochronesMenu', isochronesMenuOpen: false, isochronesMenuAnchor: null })\r\n\r\n  const classes = useStyles()\r\n\r\n  const travelIcons = {\r\n    'cycling-regular': <DirectionsBike fontSize='small' color={isochrones[currentPoint] && isochrones[currentPoint]['cycling-regular'] && isochrones[currentPoint]['cycling-regular'].display ? 'primary' : 'secondary'} />,\r\n    'driving-car': <DirectionsCar fontSize='small' color={isochrones[currentPoint] && isochrones[currentPoint]['driving-car'] && isochrones[currentPoint]['driving-car'].display ? 'primary' : 'secondary'} />,\r\n    'foot-walking': <DirectionsWalk fontSize='small' color={isochrones[currentPoint] && isochrones[currentPoint]['foot-walking'] && isochrones[currentPoint]['foot-walking'].display ? 'primary' : 'secondary'} />\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Map\r\n        style='style.json' // eslint-disable-line\r\n        center={mapPosition}\r\n        zoom={mapZoom}\r\n        maxZoom={18}\r\n        pitch={[0]}\r\n        bearing={[0]}\r\n        fitBounds={mapBounds}\r\n        containerStyle={{ top: 0, bottom: 0, right: 0, left: 0, height: '100vh', width: '100vw', position: 'absolute' }}\r\n      >\r\n        {currentService && currentService.geojson\r\n          ? (\r\n            <GeoJSONLayer // Shows the outlines of the distances\r\n              data={JSON.parse(currentService.geojson)}\r\n              linePaint={{\r\n                'line-opacity': 0.4,\r\n                'line-width': 2,\r\n                'line-color': '#455a64'\r\n              }}\r\n            />) : null}\r\n        {Object.keys(isochrones).map(point => {\r\n          return Object.keys(isochrones[point])\r\n            .filter(transport => {\r\n              return isochrones[point][transport] && isochrones[point][transport].display\r\n            })\r\n            .map((transport, x) => {\r\n              return (\r\n                <span key={'sp_isotransport_' + x}>\r\n                  <GeoJSONLayer // Shows the shaded polygons\r\n                    data={isochrones[point][transport].geo}\r\n                    fillPaint={{\r\n                      'fill-opacity': 0.1,\r\n                      'fill-antialias': true,\r\n                      'fill-color': config.travel.filter(t => t.name === transport)[0].colour\r\n                    }}\r\n                    fillOnClick={(e) => { }}\r\n                  />\r\n                  <GeoJSONLayer // Shows the outlines of the distances\r\n                    data={isochrones[point][transport].geo}\r\n                    linePaint={{\r\n                      'line-opacity': 0.4,\r\n                      'line-width': 2,\r\n                      'line-color': config.travel.filter(t => t.name === transport)[0].colour\r\n                    }}\r\n                  />\r\n                  <GeoJSONLayer // Shows the distances labels\r\n                    data={isochrones[point][transport].geo}\r\n                    symbolLayout={{\r\n                      'text-field': ['concat', ['to-string', ['/', ['get', 'value'], 60]], ' min'],\r\n                      'text-font': ['Source Sans Pro Bold'],\r\n                      'symbol-placement': 'line',\r\n                      'text-allow-overlap': false,\r\n                      'text-padding': 2,\r\n                      'text-max-angle': 90,\r\n                      'text-size': {\r\n                        base: 1.2,\r\n                        stops: [[8, 12], [22, 30]]\r\n                      },\r\n                      'text-letter-spacing': 0.1\r\n                    }}\r\n                    symbolPaint={{\r\n                      'text-halo-color': 'rgba(255, 255, 255, 0.9)',\r\n                      'text-halo-width': 4,\r\n                      'text-halo-blur': 2,\r\n                      'text-color': config.travel.filter(t => t.name === transport)[0].colour\r\n                    }}\r\n                  />\r\n                  <GeoJSONLayer // Shows the distances labels\r\n                    data={isochrones[point][transport].geo}\r\n                    symbolLayout={{\r\n                      'text-field': ['concat', ['get', 'total_pop']],\r\n                      'text-font': ['Source Sans Pro Bold'],\r\n                      'symbol-placement': 'line',\r\n                      'text-allow-overlap': false,\r\n                      'text-keep-upright': false,\r\n                      'text-padding': 2,\r\n                      'text-max-angle': 0,\r\n                      'text-offset': [0, 1],\r\n                      'text-size': {\r\n                        base: 1.2,\r\n                        stops: [[10, 8], [22, 14]]\r\n                      },\r\n                      'text-letter-spacing': 0.1\r\n                    }}\r\n                    symbolPaint={{\r\n                      'text-halo-color': 'rgba(255, 255, 255, 0.9)',\r\n                      'text-halo-width': 0,\r\n                      'text-halo-blur': 0,\r\n                      'text-color': config.travel.filter(t => t.name === transport)[0].colour\r\n                    }}\r\n                  />\r\n                </span>)\r\n            })\r\n        })}\r\n        <Source\r\n          id='src_libraries_buildings'\r\n          tileJsonSource={{\r\n            type: 'vector',\r\n            tiles: libraryBuildingsTiles\r\n          }}\r\n        />\r\n        <Layer\r\n          id='lyr_library_buildings_lines'\r\n          type='line'\r\n          sourceId='src_libraries_buildings'\r\n          sourceLayer='library_buildings'\r\n          minZoom={14}\r\n          layout={{\r\n            'line-join': 'round',\r\n            'line-cap': 'square'\r\n          }}\r\n          paint={{\r\n            'line-color': '#455a64',\r\n            'line-opacity': 0.8,\r\n            'line-width': [\r\n              'interpolate',\r\n              [\r\n                'linear'\r\n              ],\r\n              [\r\n                'zoom'\r\n              ],\r\n              14, 2,\r\n              18, 3\r\n            ]\r\n          }}\r\n        />\r\n        <Layer\r\n          id='lyr_library_buildings_fill'\r\n          type='fill'\r\n          sourceId='src_libraries_buildings'\r\n          sourceLayer='library_buildings'\r\n          minZoom={14}\r\n          paint={{\r\n            'fill-color': '#455a64',\r\n            'fill-opacity': 0.3\r\n          }}\r\n        />\r\n        <Source\r\n          id='src_library_authorities'\r\n          tileJsonSource={{\r\n            type: 'vector',\r\n            tiles: libraryAuthorityTiles\r\n          }}\r\n        />\r\n        {mapSettings.authorityBoundary\r\n          ? (\r\n            <>\r\n              <Layer\r\n                id='lyr_library_authorities_lines'\r\n                type='line'\r\n                sourceId='src_library_authorities'\r\n                sourceLayer='library_authority_boundaries'\r\n                minZoom={6}\r\n                layout={{\r\n                  'line-join': 'round',\r\n                  'line-cap': 'square'\r\n                }}\r\n                paint={{\r\n                  'line-color': '#a7a39b',\r\n                  'line-opacity': 1,\r\n                  'line-width': [\r\n                    'interpolate',\r\n                    [\r\n                      'linear'\r\n                    ],\r\n                    [\r\n                      'zoom'\r\n                    ],\r\n                    6, 1,\r\n                    18, 4\r\n                  ]\r\n                }}\r\n              />\r\n              <Layer\r\n                id='lyr_library_authorities_fill'\r\n                type='fill'\r\n                sourceId='src_library_authorities'\r\n                sourceLayer='library_authority_boundaries'\r\n                minZoom={6}\r\n                paint={{\r\n                  'fill-color': '#ccc',\r\n                  'fill-opacity': 0.1\r\n                }}\r\n              />\r\n            </>\r\n          ) : null}\r\n        <Source\r\n          id='src_trips'\r\n          tileJsonSource={{\r\n            type: 'vector',\r\n            tiles: tripTiles\r\n          }}\r\n        />\r\n        <Layer\r\n          id='lyr_trips_lines'\r\n          type='line'\r\n          sourceId='src_trips'\r\n          sourceLayer='trip'\r\n          minZoom={14}\r\n          layout={{\r\n            'line-join': 'round',\r\n            'line-cap': 'square'\r\n          }}\r\n          paint={{\r\n            'line-color': '#a7a39b',\r\n            'line-offset': [\r\n              'interpolate',\r\n              [\r\n                'linear'\r\n              ],\r\n              [\r\n                'zoom'\r\n              ],\r\n              14, 1,\r\n              18, 4\r\n            ],\r\n            'line-opacity': 1,\r\n            'line-width': [\r\n              'interpolate',\r\n              [\r\n                'linear'\r\n              ],\r\n              [\r\n                'zoom'\r\n              ],\r\n              14, 1,\r\n              18, 4\r\n            ],\r\n            'line-dasharray': [\r\n              2,\r\n              0.5\r\n            ]\r\n          }}\r\n        />\r\n        <Source\r\n          id='src_stops'\r\n          tileJsonSource={{\r\n            type: 'vector',\r\n            tiles: stopTiles\r\n          }}\r\n        />\r\n        {mapSettings.mobileLibraryStops\r\n          ? (\r\n            <>\r\n              <Layer\r\n                id='lyr_stops_circles'\r\n                type='circle'\r\n                sourceId='src_stops'\r\n                sourceLayer='stop'\r\n                minZoom={5}\r\n                layout={{}}\r\n                paint={{\r\n                  'circle-radius': [\r\n                    'interpolate',\r\n                    ['linear'],\r\n                    ['zoom'],\r\n                    5, 2,\r\n                    18, 8\r\n                  ],\r\n                  'circle-color': '#455a64',\r\n                  'circle-stroke-width': [\r\n                    'interpolate',\r\n                    ['linear'],\r\n                    ['zoom'],\r\n                    5, 1,\r\n                    18, 3\r\n                  ],\r\n                  'circle-stroke-color': '#ffffff',\r\n                  'circle-opacity': 0.5\r\n                }}\r\n                onClick={clickStop}\r\n              />\r\n              <Layer\r\n                id='lyr_stops_labels'\r\n                type='symbol'\r\n                sourceId='src_stops'\r\n                sourceLayer='stop'\r\n                minZoom={13}\r\n                layout={{\r\n                  'text-ignore-placement': false,\r\n                  'text-field': ['concat', 'Mobile: ', ['get', 'name']],\r\n                  'text-font': [\r\n                    'Source Sans Pro Bold'\r\n                  ],\r\n                  'text-line-height': 1,\r\n                  'text-size': [\r\n                    'interpolate',\r\n                    [\r\n                      'linear'\r\n                    ],\r\n                    [\r\n                      'zoom'\r\n                    ],\r\n                    13, 12,\r\n                    18, 18\r\n                  ],\r\n                  'text-offset': [\r\n                    'interpolate',\r\n                    [\r\n                      'linear'\r\n                    ],\r\n                    [\r\n                      'zoom'\r\n                    ],\r\n                    13, ['literal', [0, 1.5]],\r\n                    18, ['literal', [0, 2]]\r\n                  ]\r\n                }}\r\n                paint={{\r\n                  'text-halo-color': 'hsl(0, 0%, 100%)',\r\n                  'text-halo-width': 1,\r\n                  'text-halo-blur': 1,\r\n                  'text-color': '#6a6f73'\r\n                }}\r\n                onClick={clickStop}\r\n              />\r\n              <Layer\r\n                id='lyr_stops_next_visiting'\r\n                type='symbol'\r\n                sourceId='src_stops'\r\n                sourceLayer='stop'\r\n                minZoom={14}\r\n                layout={{\r\n                  'text-ignore-placement': false,\r\n                  'text-field': ['to-string', ['get', 'next_visiting']],\r\n                  'text-font': [\r\n                    'Source Sans Pro Bold'\r\n                  ],\r\n                  'text-line-height': 1,\r\n                  'text-size': [\r\n                    'interpolate',\r\n                    [\r\n                      'linear'\r\n                    ],\r\n                    [\r\n                      'zoom'\r\n                    ],\r\n                    14, 10,\r\n                    18, 16\r\n                  ],\r\n                  'text-offset': [\r\n                    'interpolate',\r\n                    [\r\n                      'linear'\r\n                    ],\r\n                    [\r\n                      'zoom'\r\n                    ],\r\n                    13, ['literal', [0, -1.5]],\r\n                    18, ['literal', [0, -2]]\r\n                  ]\r\n                }}\r\n                paint={{\r\n                  'text-halo-color': 'hsl(0, 0%, 100%)',\r\n                  'text-halo-width': 1,\r\n                  'text-halo-blur': 1,\r\n                  'text-color': '#6a6f73'\r\n                }}\r\n                onClick={clickStop}\r\n              />\r\n            </>\r\n          ) : null}\r\n        <Source\r\n          id='src_libraries'\r\n          tileJsonSource={{\r\n            type: 'vector',\r\n            tiles: libraryTiles\r\n          }}\r\n        />\r\n        {displayClosedLibraries\r\n          ? (\r\n            <>\r\n              <Layer\r\n                id='lyr_libraries_closed_name_labels'\r\n                type='symbol'\r\n                sourceId='src_libraries'\r\n                sourceLayer='libraries'\r\n                minZoom={12}\r\n                filter={['has', 'Year closed']}\r\n                layout={{\r\n                  'text-ignore-placement': false,\r\n                  'text-field': ['to-string', ['get', 'Library name']],\r\n                  'text-font': [\r\n                    'Source Sans Pro Bold'\r\n                  ],\r\n                  'text-line-height': 1,\r\n                  'text-size': [\r\n                    'interpolate',\r\n                    [\r\n                      'linear'\r\n                    ],\r\n                    [\r\n                      'zoom'\r\n                    ],\r\n                    12, 10,\r\n                    18, 14\r\n                  ],\r\n                  'text-offset': [\r\n                    'interpolate',\r\n                    [\r\n                      'linear'\r\n                    ],\r\n                    [\r\n                      'zoom'\r\n                    ],\r\n                    12, ['literal', [0, 1.5]],\r\n                    18, ['literal', [0, 2]]\r\n                  ]\r\n                }}\r\n                paint={{\r\n                  'text-halo-color': 'hsl(0, 0%, 100%)',\r\n                  'text-halo-width': 0,\r\n                  'text-halo-blur': 0,\r\n                  'text-color': '#d32f2f',\r\n                  'text-opacity': 0.9\r\n                }}\r\n                onClick={clickLibrary}\r\n              />\r\n              <Layer\r\n                id='lyr_libraries_closed_labels'\r\n                type='symbol'\r\n                sourceId='src_libraries'\r\n                sourceLayer='libraries'\r\n                minZoom={12}\r\n                filter={['has', 'Year closed']}\r\n                layout={{\r\n                  'text-ignore-placement': false,\r\n                  'text-field': ['concat', 'Closed ', ['get', 'Year closed']],\r\n                  'text-font': [\r\n                    'Source Sans Pro Bold'\r\n                  ],\r\n                  'text-line-height': 1,\r\n                  'text-size': [\r\n                    'interpolate',\r\n                    [\r\n                      'linear'\r\n                    ],\r\n                    [\r\n                      'zoom'\r\n                    ],\r\n                    12, 10,\r\n                    18, 14\r\n                  ],\r\n                  'text-offset': [\r\n                    'interpolate',\r\n                    [\r\n                      'linear'\r\n                    ],\r\n                    [\r\n                      'zoom'\r\n                    ],\r\n                    12, ['literal', [0, -1.5]],\r\n                    18, ['literal', [0, -2]]\r\n                  ]\r\n                }}\r\n                paint={{\r\n                  'text-halo-color': 'hsl(0, 0%, 100%)',\r\n                  'text-halo-width': 0,\r\n                  'text-halo-blur': 1,\r\n                  'text-color': '#d32f2f',\r\n                  'text-opacity': 0.9\r\n                }}\r\n                onClick={clickLibrary}\r\n              />\r\n              <Layer\r\n                id='lyr_libraries_closed_circles'\r\n                type='circle'\r\n                sourceId='src_libraries'\r\n                sourceLayer='libraries'\r\n                minZoom={11}\r\n                filter={['has', 'Year closed']}\r\n                paint={{\r\n                  'circle-radius': [\r\n                    'interpolate',\r\n                    ['linear'],\r\n                    ['zoom'],\r\n                    12, 3,\r\n                    18, 8\r\n                  ],\r\n                  'circle-color': '#b71c1c',\r\n                  'circle-stroke-width': [\r\n                    'interpolate',\r\n                    ['linear'],\r\n                    ['zoom'],\r\n                    12, 1,\r\n                    18, 3\r\n                  ],\r\n                  'circle-stroke-color': '#ffffff',\r\n                  'circle-stroke-opacity': 0.9,\r\n                  'circle-opacity': 0.6\r\n                }}\r\n                onClick={clickLibrary}\r\n              />\r\n            </>\r\n          ) : null}\r\n        {mapSettings.libraries\r\n          ? (\r\n            <>\r\n              <Layer\r\n                id='lyr_libraries_open_type_labels'\r\n                type='symbol'\r\n                sourceId='src_libraries'\r\n                sourceLayer='libraries'\r\n                minZoom={13}\r\n                filter={['!', ['has', 'Year closed']]}\r\n                layout={{\r\n                  'text-ignore-placement': false,\r\n                  'text-field': ['match', ['get', 'Library type'], 'LAL', 'Local authority library', 'LAL-', 'Local authority run - unstaffed', 'CL', 'Commissioned library', 'CRL', 'Community run library', 'IL', 'Independent library', 'Unknown library'],\r\n                  'text-font': [\r\n                    'Source Sans Pro Bold'\r\n                  ],\r\n                  'text-line-height': 1,\r\n                  'text-size': [\r\n                    'interpolate',\r\n                    [\r\n                      'linear'\r\n                    ],\r\n                    [\r\n                      'zoom'\r\n                    ],\r\n                    13, 12,\r\n                    18, 16\r\n                  ],\r\n                  'text-offset': [\r\n                    'interpolate',\r\n                    [\r\n                      'linear'\r\n                    ],\r\n                    [\r\n                      'zoom'\r\n                    ],\r\n                    13, ['literal', [0, -1.5]],\r\n                    18, ['literal', [0, -2]]\r\n                  ]\r\n                }}\r\n                paint={{\r\n                  'text-halo-color': 'hsl(0, 0%, 100%)',\r\n                  'text-halo-width': 1,\r\n                  'text-halo-blur': 1,\r\n                  'text-color': '#6a6f73'\r\n                }}\r\n                onClick={clickLibrary}\r\n              />\r\n              <Layer\r\n                id='lyr_libraries_open_name_labels'\r\n                type='symbol'\r\n                sourceId='src_libraries'\r\n                sourceLayer='libraries'\r\n                minZoom={10}\r\n                filter={['!', ['has', 'Year closed']]}\r\n                layout={{\r\n                  'text-ignore-placement': false,\r\n                  'text-field': ['to-string', ['get', 'Library name']],\r\n                  'text-font': [\r\n                    'Source Sans Pro Bold'\r\n                  ],\r\n                  'text-line-height': 1,\r\n                  'text-size': [\r\n                    'interpolate',\r\n                    [\r\n                      'linear'\r\n                    ],\r\n                    [\r\n                      'zoom'\r\n                    ],\r\n                    10, 14,\r\n                    18, 18\r\n                  ],\r\n                  'text-offset': [\r\n                    'interpolate',\r\n                    [\r\n                      'linear'\r\n                    ],\r\n                    [\r\n                      'zoom'\r\n                    ],\r\n                    10, ['literal', [0, 1.5]],\r\n                    18, ['literal', [0, 2]]\r\n                  ]\r\n                }}\r\n                paint={{\r\n                  'text-halo-color': 'hsl(0, 0%, 100%)',\r\n                  'text-halo-width': 1,\r\n                  'text-halo-blur': 1,\r\n                  'text-color': '#6a6f73',\r\n                  'text-opacity': 1\r\n                }}\r\n                onClick={clickLibrary}\r\n              />\r\n              <Layer\r\n                id='lyr_libraries_open_circles'\r\n                type='circle'\r\n                sourceId='src_libraries'\r\n                sourceLayer='libraries'\r\n                minZoom={5}\r\n                filter={['!', ['has', 'Year closed']]}\r\n                paint={{\r\n                  'circle-radius': [\r\n                    'interpolate',\r\n                    ['linear'],\r\n                    ['zoom'],\r\n                    5, 3,\r\n                    18, 12\r\n                  ],\r\n                  'circle-color': ['match', ['get', 'Library type'], 'LAL', '#1b5e20', 'LAL-', '#388e3c', 'CL', '#0d47a1', 'CRL', '#e65100', 'ICL', '#bf360c', '#bf360c'],\r\n                  'circle-stroke-width': [\r\n                    'interpolate',\r\n                    ['linear'],\r\n                    ['zoom'],\r\n                    5, 1,\r\n                    18, 4\r\n                  ],\r\n                  'circle-stroke-color': '#ffffff',\r\n                  'circle-stroke-opacity': [\r\n                    'interpolate',\r\n                    ['linear'],\r\n                    ['zoom'],\r\n                    5, 0.8,\r\n                    18, 1\r\n                  ],\r\n                  'circle-opacity': [\r\n                    'interpolate',\r\n                    ['linear'],\r\n                    ['zoom'],\r\n                    5, 0.4,\r\n                    18, 0.9\r\n                  ]\r\n                }}\r\n                onClick={clickLibrary}\r\n              />\r\n            </>\r\n          ) : null}\r\n        {searchPosition && searchPosition.length > 1\r\n          ? (\r\n            <Marker\r\n              key='mk_me'\r\n              coordinates={[searchPosition[0], searchPosition[1]]}\r\n            >\r\n              <MeAvatar searchType={searchType} />\r\n            </Marker>\r\n          )\r\n          : null}\r\n        <ZoomControl position='bottom-left' />\r\n      </Map>\r\n      <Tooltip\r\n        title='Map settings'\r\n      >\r\n        <Fab\r\n          size='small'\r\n          className={classes.settings}\r\n          color='primary'\r\n          style={{\r\n            color: 'white',\r\n            border: '1px solid #FFFFFF'\r\n          }}\r\n          onClick={() => dispatchView({ type: 'SetMapSettingsDialog', mapSettingsDialogOpen: true })}\r\n        >\r\n          <LayersIcon />\r\n        </Fab>\r\n      </Tooltip>\r\n      <MapSettings\r\n        mapSettings={mapSettings}\r\n        mapSettingsDialogOpen={mapSettingsDialogOpen}\r\n      />\r\n      <Menu\r\n        id='mnu-isochrones'\r\n        anchorPosition={isochronesMenuAnchor}\r\n        anchorReference='anchorPosition'\r\n        elevation={0}\r\n        className={classes.menu}\r\n        keepMounted\r\n        open={isochronesMenuOpen}\r\n        onClose={closeIsochronesMenu}\r\n      >\r\n        <MenuItem dense onClick={moreInfoIsochronesMenu}>\r\n          <ListItemIcon classes={{\r\n            root: classes.listItemRoot\r\n          }}\r\n          >\r\n            <LayersIcon fontSize='small' />\r\n          </ListItemIcon>\r\n          <ListItemText primary='More info' />\r\n        </MenuItem>\r\n        {config.travel.map((travel, idx) => {\r\n          return (\r\n            <MenuItem dense key={'mnu_trv_' + idx} onClick={() => toggleIsochrone(travel.name)}>\r\n              <ListItemIcon classes={{\r\n                root: classes.listItemRoot\r\n              }}\r\n              >\r\n                {travelIcons[travel.name]}\r\n              </ListItemIcon>\r\n              <ListItemText primary={travel.description} />\r\n            </MenuItem>\r\n          )\r\n        })}\r\n      </Menu>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default LibraryMap\r\n","import React from 'react'\r\n\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Snackbar from '@material-ui/core/Snackbar'\r\n\r\nimport CloseIcon from '@material-ui/icons/CloseTwoTone'\r\n\r\nimport { useViewStateValue } from './context/viewState'\r\n\r\nfunction Notification () {\r\n  const [{ notificationOpen, notificationMessage }, dispatchView] = useViewStateValue() //eslint-disable-line\r\n\r\n  const handleClose = () => {\r\n    dispatchView({ type: 'SetNotification', notificationOpen: false })\r\n  }\r\n\r\n  return (\r\n    <Snackbar\r\n      anchorOrigin={{\r\n        vertical: 'bottom',\r\n        horizontal: 'left'\r\n      }}\r\n      open={notificationOpen}\r\n      autoHideDuration={3000}\r\n      onClose={handleClose}\r\n      ContentProps={{\r\n        'aria-describedby': 'message-id'\r\n      }}\r\n      message={<span id='message-id'>{notificationMessage}</span>}\r\n      action={[\r\n        <IconButton\r\n          key='close'\r\n          aria-label='close'\r\n          onClick={handleClose}\r\n        >\r\n          <CloseIcon color='inherit' />\r\n        </IconButton>\r\n      ]}\r\n    />\r\n  )\r\n}\r\n\r\nexport default Notification\r\n","import React, { useEffect } from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\nimport Chip from '@material-ui/core/Chip'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport ListSubheader from '@material-ui/core/ListSubheader'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\n\r\nimport MaterialTable from 'material-table'\r\n\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles'\r\nimport useMediaQuery from '@material-ui/core/useMediaQuery'\r\n\r\nimport ArrowUpward from '@material-ui/icons/ArrowUpwardTwoTone'\r\nimport ChevronLeft from '@material-ui/icons/ChevronLeftTwoTone'\r\nimport ChevronRight from '@material-ui/icons/ChevronRightTwoTone'\r\nimport FirstPage from '@material-ui/icons/FirstPageTwoTone'\r\nimport FilterList from '@material-ui/icons/FilterListTwoTone'\r\nimport LastPage from '@material-ui/icons/LastPageTwoTone'\r\nimport LocationOnIcon from '@material-ui/icons/LocationOnTwoTone'\r\nimport MoreVertIcon from '@material-ui/icons/MoreVertTwoTone'\r\nimport WebIcon from '@material-ui/icons/WebTwoTone'\r\n\r\nimport * as libraryModel from './models/library'\r\nimport * as hoursHelper from './helpers/hours'\r\n\r\nimport { useSearchStateValue } from './context/searchState'\r\nimport { useViewStateValue } from './context/viewState'\r\n\r\nimport moment from 'moment'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  closedChip: {\r\n    marginTop: theme.spacing(1)\r\n  },\r\n  table: {\r\n    backgroundColor: 'rgba(0, 0, 0, 0)',\r\n    border: '2px solid #ffe0b2'\r\n  }\r\n}))\r\n\r\nfunction Libraries () {\r\n  const [{ searchDistance, searchPosition, serviceFilter, displayClosedLibraries }, dispatchSearch] = useSearchStateValue() //eslint-disable-line\r\n  const [{ }, dispatchView] = useViewStateValue() //eslint-disable-line\r\n\r\n  const tableRef = React.createRef()\r\n\r\n  useEffect(() => {\r\n    tableRef.current.onQueryChange()\r\n  }, [searchPosition, searchDistance, serviceFilter, displayClosedLibraries]) // eslint-disable-line\r\n\r\n  const classes = useStyles()\r\n  const theme = useTheme()\r\n\r\n  var selectLibrary = (library) => {\r\n    dispatchSearch({ type: 'SetCurrentLibrary', currentLibraryId: library.id })\r\n    dispatchView({ type: 'SetLibraryDialog', libraryDialogOpen: true })\r\n  }\r\n\r\n  const goToLibraryWebsite = (library) => window.open(library.url, '_blank')\r\n\r\n  const viewLibraryOnMap = (library) => {\r\n    dispatchView({ type: 'SetMapPosition', mapPosition: [library.longitude, library.latitude], mapZoom: 16 })\r\n  }\r\n\r\n  const toggleDisplayClosedLibraries = () => {\r\n    dispatchSearch({ type: 'SetDisplayClosedLibraries', displayClosedLibraries: !displayClosedLibraries })\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <ListSubheader disableSticky>Libraries</ListSubheader>\r\n      <FormControlLabel\r\n        control={\r\n          <Checkbox\r\n            checked={displayClosedLibraries}\r\n            onChange={() => toggleDisplayClosedLibraries()}\r\n            name='checkedB'\r\n            color='primary'\r\n          />\r\n        }\r\n        label='Display permanently closed libraries'\r\n      />\r\n      <MaterialTable\r\n        tableRef={tableRef}\r\n        components={{\r\n          Container: props => <Paper {...props} elevation={0} className={classes.table} />\r\n        }}\r\n        icons={{\r\n          Filter: FilterList,\r\n          FirstPage: FirstPage,\r\n          LastPage: LastPage,\r\n          NextPage: ChevronRight,\r\n          PreviousPage: ChevronLeft,\r\n          SortArrow: ArrowUpward\r\n        }}\r\n        options={{\r\n          padding: useMediaQuery(theme.breakpoints.up('sm')) ? 'default' : 'dense',\r\n          search: false,\r\n          loadingType: 'overlay',\r\n          actionsColumnIndex: 0,\r\n          filtering: false,\r\n          toolbar: false,\r\n          headerStyle: {\r\n            backgroundColor: '#fff3e0',\r\n            color: '#e65100',\r\n            border: '0px'\r\n          }\r\n        }}\r\n        columns={[\r\n          {\r\n            title: '',\r\n            field: 'name',\r\n            filtering: false,\r\n            sorting: false,\r\n            render: rowData => {\r\n              return (\r\n                <>\r\n                  <Tooltip title='See more details on the library'>\r\n                    <IconButton size='small' color='secondary' onClick={() => selectLibrary(rowData)}>\r\n                      <MoreVertIcon />\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                  <Tooltip title='See this library on the library map'>\r\n                    <IconButton size='small' color='primary' onClick={() => viewLibraryOnMap(rowData)} component={Link} to='/map'>\r\n                      <LocationOnIcon />\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                  {rowData.url\r\n                    ? (\r\n                      <Tooltip title='Go to the library website'>\r\n                        <IconButton size='small' color='primary' onClick={() => goToLibraryWebsite(rowData)}>\r\n                          <WebIcon />\r\n                        </IconButton>\r\n                      </Tooltip>\r\n                    ) : null}\r\n                </>\r\n              )\r\n            },\r\n            cellStyle: {\r\n              borderBottom: '1px solid #f5f5f5',\r\n              backgroundColor: '#ffffff'\r\n            }\r\n          },\r\n          {\r\n            title: 'Name',\r\n            field: 'name',\r\n            filtering: false,\r\n            hidden: false,\r\n            cellStyle: {\r\n              borderBottom: '1px solid #f5f5f5',\r\n              backgroundColor: '#ffffff'\r\n            },\r\n            render: rowData => {\r\n              return (\r\n                <>\r\n                  {rowData.name}\r\n                  {\r\n                    rowData.yearClosed !== null ? <><br /><Chip color='secondary' className={classes.closedChip} size='small' label={'Closed ' + rowData.yearClosed} /></> : null\r\n                  }\r\n                </>\r\n              )\r\n            }\r\n          },\r\n          {\r\n            title: 'Service',\r\n            field: 'localAuthority',\r\n            filtering: false,\r\n            hidden: false,\r\n            cellStyle: {\r\n              borderBottom: '1px solid #f5f5f5',\r\n              backgroundColor: '#ffffff'\r\n            }\r\n          },\r\n          {\r\n            title: 'Address',\r\n            field: 'address1',\r\n            filtering: false,\r\n            sorting: false,\r\n            hidden: false,\r\n            cellStyle: {\r\n              borderBottom: '1px solid #f5f5f5',\r\n              backgroundColor: '#ffffff'\r\n            },\r\n            render: (rowData) => [rowData.address1, rowData.address2, rowData.address3].filter(Boolean).join(', ')\r\n          },\r\n          {\r\n            title: 'Postcode',\r\n            field: 'postcode',\r\n            filtering: false,\r\n            sorting: false,\r\n            hidden: false,\r\n            cellStyle: {\r\n              borderBottom: '1px solid #f5f5f5',\r\n              backgroundColor: '#ffffff'\r\n            }\r\n          },\r\n          {\r\n            title: 'Today',\r\n            field: 'mondayStaffedHours',\r\n            filtering: false,\r\n            sorting: false,\r\n            hidden: false,\r\n            cellStyle: {\r\n              borderBottom: '1px solid #f5f5f5',\r\n              backgroundColor: '#ffffff'\r\n            },\r\n            render: (rowData) => {\r\n              const hours = hoursHelper.getTodayHours(rowData)\r\n              const hoursUnstaffed = hours.unstaffed ? hours.unstaffed.map(hours => {\r\n                return hours\r\n              }) : null\r\n              return (\r\n                <>\r\n                  {hours.staffed === null && hoursUnstaffed === null ? 'Opening hours unknown' : null}\r\n                  {hours.staffed !== null && hours.staffed.length > 0 ? hours.staffed.map(h => h.map(a => moment(a, 'hh:mm').format('h:mma')).join(' - ')) : ''}\r\n                  {hours.staffed && hours.staffed.length === 0 && (hours.unstaffed === null || hours.unstaffed.length === 0) ? 'Closed today' : ''}\r\n                  {hours.unstaffed && hours.unstaffed.length > 0 ? <br /> : null}\r\n                  {hours.unstaffed && hours.unstaffed.length > 0 ? 'Unstaffed ' + hoursUnstaffed : null}\r\n                </>\r\n              )\r\n            }\r\n          }\r\n        ]}\r\n        data={query =>\r\n          new Promise((resolve) => {\r\n            async function getLibraries () {\r\n              const libraryData = await libraryModel.getQueryLibraries(query, searchPosition, searchDistance, serviceFilter, displayClosedLibraries)\r\n              resolve({\r\n                data: libraryData.libraries,\r\n                page: (libraryData.page - 1),\r\n                totalCount: libraryData.total\r\n              })\r\n            }\r\n            getLibraries()\r\n          })}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Libraries\r\n","import React, { useEffect } from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport ListSubheader from '@material-ui/core/ListSubheader'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\n\r\nimport MaterialTable from 'material-table'\r\n\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles'\r\nimport useMediaQuery from '@material-ui/core/useMediaQuery'\r\n\r\nimport ArrowUpward from '@material-ui/icons/ArrowUpwardTwoTone'\r\nimport ChevronLeft from '@material-ui/icons/ChevronLeftTwoTone'\r\nimport ChevronRight from '@material-ui/icons/ChevronRightTwoTone'\r\nimport FirstPage from '@material-ui/icons/FirstPageTwoTone'\r\nimport FilterList from '@material-ui/icons/FilterListTwoTone'\r\nimport LastPage from '@material-ui/icons/LastPageTwoTone'\r\nimport LocationOnIcon from '@material-ui/icons/LocationOnTwoTone'\r\nimport MoreVertIcon from '@material-ui/icons/MoreVertTwoTone'\r\nimport WebIcon from '@material-ui/icons/WebTwoTone'\r\n\r\nimport * as stopHelper from './models/stop'\r\n\r\nimport { useSearchStateValue } from './context/searchState'\r\nimport { useViewStateValue } from './context/viewState'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  hoursChip: {\r\n    margin: theme.spacing(1)\r\n  },\r\n  table: {\r\n    backgroundColor: 'rgba(0, 0, 0, 0)',\r\n    border: '2px solid #ffe0b2'\r\n  }\r\n}))\r\n\r\nfunction MobileLibraries () {\r\n  const [{ searchDistance, searchPosition, serviceFilter }, dispatchSearch] = useSearchStateValue() //eslint-disable-line\r\n  const [{ }, dispatchView] = useViewStateValue() //eslint-disable-line\r\n\r\n  const tableRef = React.createRef()\r\n\r\n  useEffect(() => {\r\n    tableRef.current.onQueryChange()\r\n  }, [searchPosition, searchDistance, serviceFilter]) // eslint-disable-line\r\n\r\n  const classes = useStyles()\r\n  const theme = useTheme()\r\n\r\n  var selectStop = (stop) => {\r\n    dispatchSearch({ type: 'SetCurrentStop', currentStopId: stop.id })\r\n    dispatchView({ type: 'SetStopDialog', stopDialogOpen: true })\r\n  }\r\n\r\n  const goToStopTimetableWebsite = (library) => window.open(library.url, '_blank')\r\n\r\n  const viewLibraryStopOnMap = (stop) => {\r\n    dispatchView({ type: 'SetMapPosition', mapPosition: [stop.longitude, stop.latitude], mapZoom: 16 })\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <ListSubheader disableSticky>Mobile library stops</ListSubheader>\r\n      <MaterialTable\r\n        tableRef={tableRef}\r\n        components={{\r\n          Container: props => <Paper {...props} elevation={0} className={classes.table} />\r\n        }}\r\n        icons={{\r\n          Filter: FilterList,\r\n          FirstPage: FirstPage,\r\n          LastPage: LastPage,\r\n          NextPage: ChevronRight,\r\n          PreviousPage: ChevronLeft,\r\n          SortArrow: ArrowUpward\r\n        }}\r\n        options={{\r\n          padding: useMediaQuery(theme.breakpoints.up('sm')) ? 'default' : 'dense',\r\n          search: false,\r\n          loadingType: 'overlay',\r\n          actionsColumnIndex: 0,\r\n          filtering: false,\r\n          toolbar: false,\r\n          headerStyle: {\r\n            backgroundColor: '#fff3e0',\r\n            color: '#e65100',\r\n            border: '0px'\r\n          }\r\n        }}\r\n        columns={[\r\n          {\r\n            title: '',\r\n            field: 'name',\r\n            filtering: false,\r\n            sorting: false,\r\n            render: rowData => {\r\n              return (\r\n                <>\r\n                  <Tooltip title='See more stop details'>\r\n                    <IconButton size='small' onClick={() => selectStop(rowData)}>\r\n                      <MoreVertIcon />\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                  <Tooltip title='See this stop on the library map'>\r\n                    <IconButton size='small' color='primary' onClick={() => viewLibraryStopOnMap(rowData)} component={Link} to='/map'>\r\n                      <LocationOnIcon />\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                  {rowData.url\r\n                    ? (\r\n                      <Tooltip title='Go to the library website'>\r\n                        <IconButton size='small' color='primary' onClick={() => goToStopTimetableWebsite(rowData)}>\r\n                          <WebIcon />\r\n                        </IconButton>\r\n                      </Tooltip>\r\n                    ) : null}\r\n                </>\r\n              )\r\n            },\r\n            cellStyle: {\r\n              borderBottom: '1px solid #f5f5f5',\r\n              backgroundColor: '#ffffff'\r\n            }\r\n          },\r\n          {\r\n            title: 'Community',\r\n            field: 'community',\r\n            filtering: false,\r\n            sorting: false,\r\n            hidden: false,\r\n            cellStyle: {\r\n              borderBottom: '1px solid #f5f5f5',\r\n              backgroundColor: '#ffffff'\r\n            }\r\n          },\r\n          {\r\n            title: 'Name',\r\n            field: 'name',\r\n            filtering: false,\r\n            hidden: false,\r\n            cellStyle: {\r\n              borderBottom: '1px solid #f5f5f5',\r\n              backgroundColor: '#ffffff'\r\n            }\r\n          },\r\n          {\r\n            title: 'Service',\r\n            field: 'organisationName',\r\n            filtering: false,\r\n            hidden: false,\r\n            cellStyle: {\r\n              borderBottom: '1px solid #f5f5f5',\r\n              backgroundColor: '#ffffff'\r\n            }\r\n          },\r\n          {\r\n            title: 'Address',\r\n            field: 'address',\r\n            filtering: false,\r\n            sorting: false,\r\n            hidden: false,\r\n            cellStyle: {\r\n              borderBottom: '1px solid #f5f5f5',\r\n              backgroundColor: '#ffffff'\r\n            }\r\n          }\r\n        ]}\r\n        data={query =>\r\n          new Promise((resolve) => {\r\n            async function getStops () {\r\n              const stopData = await stopHelper.getQueryStops(query, searchPosition, searchDistance, serviceFilter)\r\n              resolve({\r\n                data: stopData.stops,\r\n                page: (stopData.page - 1),\r\n                totalCount: stopData.total\r\n              })\r\n            }\r\n            getStops()\r\n          })}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default MobileLibraries\r\n","import React, { useState } from 'react'\r\nimport { withRouter } from 'react-router'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport Chip from '@material-ui/core/Chip'\r\nimport Menu from '@material-ui/core/Menu'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\n\r\nimport BusinessIcon from '@material-ui/icons/BusinessTwoTone'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles'\r\n\r\nimport { useApplicationStateValue } from './context/applicationState'\r\nimport { useSearchStateValue } from './context/searchState'\r\nimport { useViewStateValue } from './context/viewState'\r\n\r\nimport * as urlHelper from './helpers/url'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  button: {\r\n    marginRight: theme.spacing(1)\r\n  },\r\n  chip: {\r\n    marginRight: theme.spacing(1)\r\n  }\r\n}))\r\n\r\nfunction ServiceFilter (props) {\r\n  const [{ services, serviceLookup }] = useApplicationStateValue()\r\n  const [{ serviceFilter }, dispatchSearch] = useSearchStateValue()\r\n  const [{ }, dispatchView] = useViewStateValue()//eslint-disable-line\r\n\r\n  const [serviceMenuAnchor, setServiceMenuAnchor] = useState(null)\r\n\r\n  const openServiceMenu = (element) => setServiceMenuAnchor(element)\r\n\r\n  const closeServiceMenu = () => setServiceMenuAnchor(null)\r\n\r\n  const chooseService = (service) => {\r\n    const coords = JSON.parse(service.bbox).coordinates[0]\r\n    dispatchSearch({ type: 'FilterByService', service: service })\r\n    dispatchView({ type: 'FitToBounds', bounds: [coords[0], coords[2]] })\r\n    urlHelper.addService(props.history, service.systemName)\r\n    closeServiceMenu()\r\n  }\r\n\r\n  const clearServiceFilter = () => {\r\n    dispatchSearch({ type: 'ClearAll' })\r\n    urlHelper.clearService(props.history)\r\n  }\r\n\r\n  const classes = useStyles()\r\n\r\n  return (\r\n    <>\r\n      {serviceFilter.length === 0 ? (\r\n        <Tooltip title='Choose library service'>\r\n          <Button color='primary' className={classes.button} onClick={(e) => openServiceMenu(e.currentTarget)} startIcon={<BusinessIcon />}>\r\n            Choose service\r\n          </Button>\r\n        </Tooltip>\r\n      ) : <Chip className={classes.chip} color='primary' onDelete={clearServiceFilter} label={serviceLookup[serviceFilter[0]].name} />}\r\n      <Menu\r\n        id='menu-library-service'\r\n        anchorEl={serviceMenuAnchor}\r\n        keepMounted\r\n        open={Boolean(serviceMenuAnchor)}\r\n        onClose={() => closeServiceMenu()}\r\n      >\r\n        {\r\n          services\r\n            .sort((a, b) => a.name.localeCompare(b.name))\r\n            .map(s => {\r\n              return <MenuItem key={'mnu_itm_org_' + s.code} onClick={() => chooseService(s)}>{s.name}</MenuItem>\r\n            })\r\n        }\r\n      </Menu>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default withRouter(ServiceFilter)\r\n","import React from 'react'\r\n\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles'\r\n\r\nimport Libraries from './Libraries'\r\nimport PostcodeSearch from './PostcodeSearch'\r\nimport MobileLibraries from './MobileLibraries'\r\nimport ServiceFilter from './ServiceFilter'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  search: {\r\n    alignContent: 'center',\r\n    textAlign: 'center',\r\n    display: 'table',\r\n    marginLeft: 'auto',\r\n    marginRight: 'auto',\r\n    marginBottom: '10px'\r\n  },\r\n  subtitle: {\r\n    textAlign: 'center',\r\n    marginBottom: '5px'\r\n  },\r\n  title: {\r\n    textAlign: 'center'\r\n  }\r\n}))\r\n\r\nfunction Search () {\r\n  const classes = useStyles()\r\n\r\n  return (\r\n    <div>\r\n      <Typography component='h2' variant='h3' color='secondary' className={classes.title}>Find my library</Typography>\r\n      <Typography component='p' variant='subtitle1' className={classes.subtitle}>Search by postcode or library service</Typography>\r\n      <div className={classes.search}>\r\n        <PostcodeSearch settings />\r\n      </div>\r\n      <div className={classes.search}>\r\n        <ServiceFilter />\r\n      </div>\r\n      <Libraries />\r\n      <br />\r\n      <MobileLibraries />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Search\r\n","import React, { useEffect, useState } from 'react'\r\nimport ReactMarkdown from 'markdown-to-jsx'\r\n\r\nimport { withStyles, makeStyles } from '@material-ui/core/styles'\r\n\r\nimport Link from '@material-ui/core/Link'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  listItem: {\r\n    marginTop: theme.spacing(1)\r\n  },\r\n  root: {\r\n    '& table': {\r\n      display: 'block',\r\n      wordBreak: 'normal',\r\n      width: '100%',\r\n      overflowX: 'auto',\r\n      WebkitOverflowScrolling: 'touch',\r\n      borderCollapse: 'collapse',\r\n      marginBottom: '16px',\r\n      borderSpacing: 0,\r\n      overflow: 'hidden',\r\n      '& .prop-name': {\r\n        fontSize: 13,\r\n        fontFamily: 'Consolas, \"Liberation Mono\", Menlo, monospace'\r\n      },\r\n      '& .required': {\r\n        color: theme.palette.type === 'light' ? '#006500' : '#a5ffa5'\r\n      },\r\n      '& .prop-type': {\r\n        fontSize: 13,\r\n        fontFamily: 'Consolas, \"Liberation Mono\", Menlo, monospace',\r\n        color: theme.palette.type === 'light' ? '#932981' : '#ffb6ec'\r\n      },\r\n      '& .prop-default': {\r\n        fontSize: 13,\r\n        fontFamily: 'Consolas, \"Liberation Mono\", Menlo, monospace',\r\n        borderBottom: `1px dotted ${theme.palette.divider}`\r\n      }\r\n    },\r\n    '& td': {\r\n      ...theme.typography.body2,\r\n      borderBottom: `1px solid ${theme.palette.divider}`,\r\n      padding: 16,\r\n      color: theme.palette.text.primary\r\n    },\r\n    '& th': {\r\n      fontSize: 14,\r\n      lineHeight: theme.typography.pxToRem(24),\r\n      fontWeight: theme.typography.fontWeightMedium,\r\n      color: theme.palette.text.primary,\r\n      whiteSpace: 'pre',\r\n      borderBottom: `1px solid ${theme.palette.divider}`,\r\n      padding: 16\r\n    }\r\n  }\r\n}))\r\n\r\nconst options = {\r\n  overrides: {\r\n    h1: {\r\n      component: Typography,\r\n      props: {\r\n        gutterBottom: true,\r\n        variant: 'h4',\r\n        color: 'secondary'\r\n      }\r\n    },\r\n    h2: { component: Typography, props: { gutterBottom: true, variant: 'h5', color: 'textPrimary' } },\r\n    h3: { component: Typography, props: { gutterBottom: true, variant: 'h6', color: 'textPrimary' } },\r\n    h4: {\r\n      component: Typography,\r\n      props: { gutterBottom: true, variant: 'h6', paragraph: true, color: 'textPrimary' }\r\n    },\r\n    p: { component: Typography, props: { paragraph: true, color: 'textPrimary' } },\r\n    a: { component: Link },\r\n    li: {\r\n      component: withStyles(useStyles)(({ classes, ...props }) => (\r\n        <li className={classes.listItem}>\r\n          <Typography component='span' {...props} />\r\n        </li>\r\n      ))\r\n    }\r\n  }\r\n}\r\n\r\nexport function MarkdownPage (props) {\r\n  const { page } = props\r\n  const [pageText, setPageText] = useState('')\r\n  const classes = useStyles()\r\n\r\n  useEffect(() => {\r\n    async function fetchPage () {\r\n      const pageData = await window.fetch(page)\r\n      const pageText = await pageData.text()\r\n      setPageText(pageText)\r\n    }\r\n    fetchPage()\r\n  }, [page])\r\n\r\n  return <ReactMarkdown className={classes.root} options={options} {...props}>{pageText}</ReactMarkdown>\r\n}\r\n\r\nexport const MemoMarkdownPage = React.memo(MarkdownPage)\r\n","export default __webpack_public_path__ + \"static/media/data.66eb81e2.md\";","import axios from 'axios'\r\n\r\nconst config = require('../helpers/config.json')\r\n\r\nexport class Service {\r\n  constructor (obj) {\r\n    Object.assign(this, obj)\r\n  }\r\n\r\n  fromJson (json) {\r\n    this.code = json.utla19cd\r\n    this.name = json.utla19nm\r\n    this.nameWales = json.utla19nmw\r\n    this.systemName = getServiceSystemName(json.utla19nm)\r\n    this.geojson = json.geojson\r\n    this.bbox = json.bbox\r\n\r\n    return this\r\n  }\r\n}\r\n\r\nexport async function getServices () {\r\n  const response = await axios.get(config.servicesApi)\r\n  if (response && response.data && response.data.length > 0) {\r\n    return response.data.map(s => (new Service()).fromJson(s))\r\n  } else {\r\n    return []\r\n  }\r\n}\r\n\r\nexport function getServiceSystemName (name) {\r\n  return name.split(', ').reverse().join(' ').replace(/[. ,:-]+/g, '-').toLowerCase()\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { BrowserRouter, Route, Switch } from 'react-router-dom'\r\n\r\nimport Container from '@material-ui/core/Container'\r\n\r\nimport StopDetails from './StopDetails'\r\nimport LibraryDetails from './LibraryDetails'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles'\r\n\r\nimport AppHeader from './AppHeader'\r\nimport Footer from './Footer'\r\nimport LibraryMap from './LibraryMap'\r\nimport Notification from './Notification'\r\nimport Search from './Search'\r\nimport { MemoMarkdownPage } from './MarkdownPage'\r\n\r\nimport Data from './pages/data.md'\r\n\r\nimport * as serviceModel from './models/service'\r\n\r\nimport { useApplicationStateValue } from './context/applicationState'\r\nimport { useSearchStateValue } from './context/searchState'\r\nimport { useViewStateValue } from './context/viewState'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  content: {\r\n    flexGrow: 1,\r\n    padding: theme.spacing(2)\r\n  },\r\n  root: {\r\n    flexGrow: 1\r\n  }\r\n}))\r\n\r\nfunction LibraryMapApplication () {\r\n  const [{ }, dispatchApplication] = useApplicationStateValue() //eslint-disable-line\r\n  const [{ }, dispatchSearch] = useSearchStateValue() //eslint-disable-line\r\n  const [{ }, dispatchView] = useViewStateValue() //eslint-disable-line\r\n\r\n  useEffect(() => {\r\n    // Initial data setup\r\n    async function getServices () {\r\n      const services = await serviceModel.getServices()\r\n      const serviceLookup = {}\r\n      const serviceSystemNameLookup = {}\r\n      services.forEach(service => {\r\n        serviceLookup[service.code] = service\r\n        serviceSystemNameLookup[service.systemName] = service\r\n      })\r\n      dispatchApplication({ type: 'AddServices', services: services, serviceLookup: serviceLookup })\r\n      // Process any service query parameters\r\n      const currentUrlParams = new URLSearchParams(window.location.search)\r\n      const serviceName = currentUrlParams.get('service')\r\n      if (serviceName && serviceSystemNameLookup[serviceName]) {\r\n        const service = serviceSystemNameLookup[serviceName]\r\n        const coords = JSON.parse(service.bbox).coordinates[0]\r\n        dispatchSearch({ type: 'FilterByService', service: service })\r\n        dispatchView({ type: 'FitToBounds', bounds: [coords[0], coords[2]] })\r\n      }\r\n    }\r\n    getServices()\r\n  }, []) //eslint-disable-line\r\n\r\n  const classes = useStyles()\r\n\r\n  const Page404 = ({ location }) => (\r\n    <div>\r\n      <h2>Sorry! That page was not found</h2>\r\n    </div>\r\n  )\r\n\r\n  return (\r\n    <BrowserRouter>\r\n      <div className={classes.root}>\r\n        <AppHeader loading={false} site={3} />\r\n        <Container maxWidth='lg'>\r\n          <main className={classes.content}>\r\n            <Switch>\r\n              <Route path='/' exact render={() => <Search />} />\r\n              <Route path='/map' exact render={() => <LibraryMap />} />\r\n              <Route path='/data' exact render={() => <MemoMarkdownPage page={Data} />} />\r\n              <Route path={['/http:', '/https:']} component={props => { window.location.replace(props.location.pathname.substr(1)); return null }} />\r\n              <Route component={Page404} />\r\n            </Switch>\r\n          </main>\r\n        </Container>\r\n        <Container maxWidth='lg'>\r\n          <Footer />\r\n        </Container>\r\n        <Notification />\r\n      </div>\r\n      <StopDetails />\r\n      <LibraryDetails />\r\n    </BrowserRouter>\r\n  )\r\n}\r\n\r\nexport default LibraryMapApplication\r\n","import React from 'react'\r\n\r\nimport CssBaseline from '@material-ui/core/CssBaseline'\r\n\r\nimport blueGrey from '@material-ui/core/colors/blueGrey'\r\nimport orange from '@material-ui/core/colors/orange'\r\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles'\r\n\r\nimport { ApplicationStateProvider } from './context/applicationState'\r\nimport { SearchStateProvider } from './context/searchState'\r\nimport { ViewStateProvider } from './context/viewState'\r\n\r\nimport LibraryMapApplication from './LibraryMapApplication'\r\n\r\nconst initialApplicationState = {\r\n  services: [],\r\n  serviceLookup: {},\r\n  isochrones: {}\r\n}\r\n\r\nconst applicationReducer = (state, action) => {\r\n  const isochrones = state.isochrones\r\n  switch (action.type) {\r\n    case 'AddServices':\r\n      return {\r\n        ...state,\r\n        services: action.services,\r\n        serviceLookup: action.serviceLookup\r\n      }\r\n    case 'AddIsochrone':\r\n      if (!isochrones[action.point]) isochrones[action.point] = {}\r\n      isochrones[action.point][action.transport] = action.isochrone\r\n      console.log(isochrones)\r\n      return {\r\n        ...state,\r\n        isochrones: isochrones\r\n      }\r\n    case 'SetIsochroneDisplay':\r\n      isochrones[action.point][action.transport].display = action.display\r\n      return {\r\n        ...state,\r\n        isochrones: isochrones\r\n      }\r\n    case 'SetIsochroneLoading':\r\n      if (!isochrones[action.point]) isochrones[action.point] = {}\r\n      isochrones[action.point][action.transport] = { geo: null, display: false, loading: true }\r\n      return {\r\n        ...state,\r\n        isochrones: isochrones\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst initialSearchState = {\r\n  searchPostcode: '',\r\n  searchType: '',\r\n  searchDistance: 1609,\r\n  searchPosition: [],\r\n  currentStopId: null,\r\n  currentLibraryId: null,\r\n  currentPoint: [],\r\n  serviceFilter: [],\r\n  serviceFilterBbox: null,\r\n  serviceFilterBoundary: null,\r\n  currentService: null,\r\n  currentServiceSystemName: null,\r\n  displayClosedLibraries: false\r\n}\r\n\r\nconst searchReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'SetCurrentStop':\r\n      return {\r\n        ...state,\r\n        currentStopId: action.currentStopId,\r\n        currentPoint: action.currentPoint\r\n      }\r\n    case 'SetCurrentLibrary':\r\n      return {\r\n        ...state,\r\n        currentLibraryId: action.currentLibraryId,\r\n        currentPoint: action.currentPoint\r\n      }\r\n    case 'SetSearchDistance':\r\n      return {\r\n        ...state,\r\n        searchDistance: action.searchDistance\r\n      }\r\n    case 'SetPostcodeSearch':\r\n      return {\r\n        ...state,\r\n        serviceFilter: [],\r\n        currentService: null,\r\n        currentServiceSystemName: null,\r\n        searchPostcode: action.searchPostcode,\r\n        searchPosition: action.searchPosition,\r\n        searchType: 'postcode'\r\n      }\r\n    case 'SetDisplayClosedLibraries':\r\n      return {\r\n        ...state,\r\n        displayClosedLibraries: action.displayClosedLibraries\r\n      }\r\n    case 'FilterByService':\r\n      return {\r\n        ...state,\r\n        serviceFilter: [action.service.code],\r\n        currentService: action.service,\r\n        currentServiceSystemName: action.service.systemName,\r\n        searchPostcode: '',\r\n        searchPosition: [],\r\n        searchType: 'service'\r\n      }\r\n    case 'ClearAll':\r\n      return {\r\n        ...state,\r\n        serviceFilter: [],\r\n        currentService: null,\r\n        currentServiceSystemName: null,\r\n        searchPostcode: '',\r\n        searchPosition: [],\r\n        searchType: ''\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst initialViewState = {\r\n  notificationOpen: false,\r\n  notificationMessage: '',\r\n  mapZoom: [7],\r\n  mapPosition: [-1.155414, 52.691432],\r\n  mapBounds: null,\r\n  mapSettings: {\r\n    libraries: true,\r\n    mobileLibraryStops: true,\r\n    authorityBoundary: false\r\n  },\r\n  mapSettingsDialogOpen: false,\r\n  libraryDialogOpen: false,\r\n  stopDialogOpen: false,\r\n  loadingPostcode: false,\r\n  loadingServices: false,\r\n  isochronesMenuOpen: false,\r\n  isochronesMenuAnchor: null\r\n}\r\n\r\nconst viewReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'SetNotificationMessage':\r\n      return { ...state, notificationMessage: action.notificationMessage }\r\n    case 'SetNotification':\r\n      return { ...state, notificationOpen: action.notificationOpen }\r\n    case 'ShowNotification':\r\n      return { ...state, notificationOpen: true, notificationMessage: action.notificationMessage }\r\n    case 'SetStopDialog':\r\n      return { ...state, stopDialogOpen: action.stopDialogOpen }\r\n    case 'SetLibraryDialog':\r\n      return { ...state, libraryDialogOpen: action.libraryDialogOpen }\r\n    case 'SetMapSettingsDialog':\r\n      return { ...state, mapSettingsDialogOpen: action.mapSettingsDialogOpen }\r\n    case 'ToggleMapSetting': {\r\n      const settings = state.mapSettings\r\n      settings[action.mapSetting] = !settings[action.mapSetting]\r\n      return { ...state, mapSettings: settings }\r\n    }\r\n    case 'FitToBounds': {\r\n      return { ...state, mapBounds: action.bounds }\r\n    }\r\n    case 'ToggleLoadingPostcode': {\r\n      return { ...state, loadingPostcode: !state.loadingPostcode }\r\n    }\r\n    case 'ToggleLoadingServices': {\r\n      return { ...state, loadingServices: !state.loadingServices }\r\n    }\r\n    case 'SetPostcodeSearch':\r\n      return { ...state, loadingPostcode: false, mapPosition: action.mapPosition, mapZoom: [13] }\r\n    case 'SetMapPosition':\r\n      return { ...state, mapPosition: action.mapPosition, mapZoom: [action.mapZoom] }\r\n    case 'SetIsochronesMenu':\r\n      return { ...state, isochronesMenuOpen: action.isochronesMenuOpen, isochronesMenuAnchor: action.isochronesMenuAnchor }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n      main: orange[900]\r\n    },\r\n    secondary: {\r\n      main: blueGrey[600]\r\n    },\r\n    outline: {\r\n      main: blueGrey[50]\r\n    }\r\n  },\r\n  overrides: {\r\n    MuiButton: {\r\n      text: {\r\n        textTransform: 'none'\r\n      },\r\n      root: {\r\n        textTransform: 'none'\r\n      }\r\n    },\r\n    MuiTypography: {\r\n      button: {\r\n        textTransform: 'none'\r\n      }\r\n    },\r\n    MuiTab: {\r\n      root: {\r\n        textTransform: 'none'\r\n      }\r\n    }\r\n  }\r\n})\r\n\r\nfunction App () {\r\n  return (\r\n    <ApplicationStateProvider initialState={initialApplicationState} reducer={applicationReducer}>\r\n      <SearchStateProvider initialState={initialSearchState} reducer={searchReducer}>\r\n        <ViewStateProvider initialState={initialViewState} reducer={viewReducer}>\r\n          <ThemeProvider theme={theme}>\r\n            <CssBaseline />\r\n            <LibraryMapApplication />\r\n          </ThemeProvider>\r\n        </ViewStateProvider>\r\n      </SearchStateProvider>\r\n    </ApplicationStateProvider>\r\n  )\r\n}\r\n\r\nexport default App\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport function register (config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW (swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker (swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  window.fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister () {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister()\n      })\n      .catch(error => {\n        console.error(error.message)\n      })\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport App from './App'\n\nimport * as serviceWorker from './serviceWorker'\n\nimport 'typeface-roboto'\n\nReactDOM.render(<App />, document.getElementById('root'))\n\nserviceWorker.unregister()\n"],"sourceRoot":""}