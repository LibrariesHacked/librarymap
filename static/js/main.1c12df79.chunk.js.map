{"version":3,"sources":["../node_modules/jspdf/dist sync","pages/data.md","context/applicationState.js","context/searchState.js","context/viewState.js","models/stop.js","StopDetails.js","models/library.js","LibraryDetails.js","helpers/geo.js","PostcodeSearch.js","AppHeader.js","Footer.js","MeAvatar.js","MapSettings.js","models/isochrone.js","LibraryMap.js","Notification.js","Libraries.js","helpers/hours.js","MobileLibraries.js","Search.js","MarkdownPage.js","LibraryMapApplication.js","App.js","serviceWorker.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","ApplicationStateContext","createContext","ApplicationStateProvider","reducer","initialState","children","Provider","value","useReducer","useApplicationStateValue","useContext","SearchStateContext","SearchStateProvider","useSearchStateValue","ViewStateContext","ViewStateProvider","useViewStateValue","config","require","Stop","obj","Object","assign","this","json","routeIds","route_ids","routeNames","route_names","mobileIds","mobile_ids","mobileNames","mobile_names","organisationId","organisation_id","organisationName","organisation_name","name","community","address","postcode","arrivalTimes","arrival_times","departureTimes","departure_times","routeStart","moment","route_start","routeEnd","route_end","routeDays","route_days","routeFrequencies","route_frequencies","routeSchedule","route_schedule","map","s","timetable","longitude","latitude","getQueryStops","query","searchPosition","distance","a","url","mobilesApi","page","pageSize","orderBy","field","orderDirection","length","axios","get","response","data","stops","fromJson","total","parseInt","headers","getStopById","useStyles","makeStyles","theme","button","margin","spacing","dialog","border","dialogContentActions","backgroundColor","borderRadius","padding","leftIcon","marginRight","list","width","maxWidth","palette","background","paper","progress","tablePaper","StopDetails","currentStopId","dispatchSearch","stopDialogOpen","dispatchView","useState","stop","setStop","useEffect","stopId","stopModel","stopData","getStop","close","type","currentPoint","useTheme","classes","fullScreen","useMediaQuery","breakpoints","down","Dialog","disableBackdropClick","open","onClose","aria-labelledby","BackdropProps","invisible","PaperProps","elevation","className","DialogTitle","DialogContent","Typography","component","variant","ListSubheader","TableContainer","Paper","Table","size","TableHead","TableRow","TableCell","align","TableBody","rs","idx","key","scope","format","Button","onClick","window","color","startIcon","api","mapPosition","mapZoom","Link","to","CircularProgress","DialogActions","endIcon","libraryTypes","LAL","CL","CRL","IL","Library","localAuthority","localAuthorityCode","address1","address2","address3","Postcode","postcodeLongitude","postcodeLatitude","uprn","uprnLongitude","statutory","Statutory","typeDescription","yearOpened","yearClosed","mondayStaffedHours","tuesdayStaffedHours","wednesdayStaffedHours","thursdayStaffedHours","fridayStaffedHours","saturdaydayStaffedHours","sundayStaffedHours","mondayUnstaffedHours","tuesdayUnstaffedHours","wednesdayUnstaffedHours","thursdayUnstaffedHours","fridayUnstaffedHours","saturdaydayUnstaffedHours","sundayUnstaffedHours","colocated","colocatedWith","notes","Notes","URL","emailAddress","Longitude","Latitude","getQueryLibraries","libraries","getLibraryById","LibraryDetails","currentLibraryId","libraryDialogOpen","library","setLibrary","libraryId","libraryModel","libraryData","getLibrary","filter","l","Boolean","join","disableSticky","getPostcode","postcodeApi","location","organisation","library_service_name","grow","flexGrow","iconButton","inputInput","paddingTop","paddingRight","paddingBottom","paddingLeft","fontWeight","typography","fontWeightBold","search","position","shape","fade","common","white","marginLeft","display","PostcodeSearch","props","settings","services","searchType","searchPostcode","searchDistance","loadingPostcode","tempPostcode","setTempPostcode","anchor","setAnchor","prevProps","ref","useRef","current","usePrevious","closeSettingsMenu","setSearchDistance","postcodeSearch","notificationMessage","pc","test","validatePostcode","trim","geoHelper","service","InputBase","placeholder","input","onChange","target","toUpperCase","Tooltip","title","IconButton","disabled","currentTarget","openSettingsMenu","Menu","anchorEl","keepMounted","MenuItem","appBar","zIndex","drawer","appBarTransparent","verticalAlign","topIcon","topTitle","AppHeader","site","appsOpen","setAppsOpen","tabValue","setTabValue","useLocation","sites","icon","links","short","appBarClass","pathname","Toolbar","AppBar","Tabs","centered","v","scrollButtons","indicatorColor","textColor","Tab","label","Hidden","mdUp","link","disableRipple","disableFocusRipple","smDown","root","marginTop","marginBottom","grid","loveIcon","footerText","footerRight","textAlign","tapTarget","lineHeight","fontSize","Footer","Divider","Grid","container","item","xs","sm","md","lg","xl","RouteLink","href","avatar","avatarOn","cursor","primary","main","MeAvatar","Avatar","MapSettings","mapSettings","mapSettingsDialogOpen","closeDialog","FormControlLabel","control","Switch","checked","authorityBoundary","mapSetting","Isochrone","transport","geo","getIsochrone","point","travel","n","isochroneApi","interval","duration","listItemRoot","minWidth","menu","bottom","right","Map","ReactMapboxGl","minZoom","maxZoom","customAttribution","libraryTiles","libraryBuildingsTiles","libraryAuthorityTiles","stopTiles","tripTiles","LibraryMap","isochrones","dispatchApplication","isochronesMenuOpen","isochronesMenuAnchor","clickLibrary","features","properties","left","x","top","y","clickStop","toggleIsochrone","isochroneModel","isochrone","closeIsochronesMenu","travelIcons","style","center","zoom","pitch","bearing","fitBounds","containerStyle","height","fillPaint","t","colour","fillOnClick","linePaint","symbolLayout","base","symbolPaint","tileJsonSource","tiles","sourceId","sourceLayer","layout","paint","coordinates","Fab","anchorPosition","anchorReference","dense","ListItemIcon","ListItemText","description","Notification","notificationOpen","handleClose","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","ContentProps","message","action","aria-label","hoursChip","table","Libraries","tableRef","React","createRef","onQueryChange","components","Container","icons","Filter","FilterList","FirstPage","LastPage","NextPage","ChevronRight","PreviousPage","ChevronLeft","SortArrow","ArrowUpward","options","up","loadingType","actionsColumnIndex","filtering","toolbar","headerStyle","columns","sorting","render","rowData","cellStyle","borderBottom","hidden","place","hours","toLowerCase","split","hoursHelper","entry","Chip","Promise","totalCount","getLibraries","MobileLibraries","stopHelper","getStops","alignContent","subtitle","Search","listItem","wordBreak","overflowX","WebkitOverflowScrolling","borderCollapse","borderSpacing","overflow","fontFamily","divider","body2","text","pxToRem","fontWeightMedium","whiteSpace","overrides","h1","gutterBottom","h2","h3","h4","paragraph","p","li","withStyles","MemoMarkdownPage","memo","pageText","setPageText","fetch","pageData","fetchPage","content","LibraryMapApplication","loading","path","exact","Data","replace","substr","initialApplicationState","applicationReducer","state","console","log","initialSearchState","searchReducer","initialViewState","viewReducer","createMuiTheme","red","secondary","blueGrey","MuiButton","textTransform","MuiTypography","MuiTab","App","ThemeProvider","CssBaseline","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error"],"mappings":"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","file":"static/js/main.1c12df79.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 364;","module.exports = __webpack_public_path__ + \"static/media/data.1208a6bf.md\";","import React, { createContext, useContext, useReducer } from 'react'\r\n\r\nexport const ApplicationStateContext = createContext()\r\n\r\nexport const ApplicationStateProvider = ({ reducer, initialState, children }) => (\r\n  <ApplicationStateContext.Provider value={useReducer(reducer, initialState)}>\r\n    {children}\r\n  </ApplicationStateContext.Provider>\r\n)\r\n\r\nexport const useApplicationStateValue = () => useContext(ApplicationStateContext)\r\n","import React, { createContext, useContext, useReducer } from 'react'\r\n\r\nexport const SearchStateContext = createContext()\r\n\r\nexport const SearchStateProvider = ({ reducer, initialState, children }) => (\r\n  <SearchStateContext.Provider value={useReducer(reducer, initialState)}>\r\n    {children}\r\n  </SearchStateContext.Provider>\r\n)\r\n\r\nexport const useSearchStateValue = () => useContext(SearchStateContext)\r\n","import React, { createContext, useContext, useReducer } from 'react'\r\n\r\nexport const ViewStateContext = createContext()\r\n\r\nexport const ViewStateProvider = ({ reducer, initialState, children }) => (\r\n  <ViewStateContext.Provider value={useReducer(reducer, initialState)}>\r\n    {children}\r\n  </ViewStateContext.Provider>\r\n)\r\n\r\nexport const useViewStateValue = () => useContext(ViewStateContext)\r\n","import axios from 'axios'\r\nimport moment from 'moment'\r\n\r\nconst config = require('../helpers/config.json')\r\n\r\nexport class Stop {\r\n  constructor (obj) {\r\n    Object.assign(this, obj)\r\n  }\r\n\r\n  fromJson (json) {\r\n    this.id = json.id\r\n    this.routeIds = json.route_ids\r\n    this.routeNames = json.route_names\r\n    this.mobileIds = json.mobile_ids\r\n    this.mobileNames = json.mobile_names\r\n    this.organisationId = json.organisation_id\r\n    this.organisationName = json.organisation_name\r\n    this.name = json.name\r\n    this.community = json.community\r\n    this.address = json.address\r\n    this.postcode = json.postcode\r\n    this.arrivalTimes = json.arrival_times\r\n    this.departureTimes = json.departure_times\r\n    this.routeStart = moment(json.route_start)\r\n    this.routeEnd = moment(json.route_end)\r\n    this.routeDays = json.route_days\r\n    this.routeFrequencies = json.route_frequencies\r\n    this.routeSchedule = json.route_schedule.map(s => moment(s))\r\n    this.timetable = json.timetable\r\n    this.longitude = json.longitude\r\n    this.latitude = json.latitude\r\n    return this\r\n  }\r\n}\r\n\r\nexport async function getQueryStops (query, searchPosition, distance) {\r\n  let url = config.mobilesApi + '/stops?page=' + (query.page + 1) + '&limit=' + query.pageSize\r\n  if (query.orderBy && query.orderBy.field) url = url + '&sort=' + query.orderBy.field + '&direction=' + query.orderDirection\r\n\r\n  if (searchPosition && searchPosition.length > 1) url = url + '&longitude=' + searchPosition[0] + '&latitude=' + searchPosition[1]\r\n  if (distance && distance !== '') url = url + '&distance=' + distance\r\n\r\n  const response = await axios.get(url)\r\n  if (response && response.data && response.data.length > 0) {\r\n    return {\r\n      stops: response.data.map(s => (new Stop()).fromJson(s)),\r\n      total: parseInt(response.headers['x-total-count']),\r\n      page: parseInt(response.headers['x-page'])\r\n    }\r\n  } else {\r\n    return { stops: [], total: 0, page: 1 }\r\n  }\r\n}\r\n\r\nexport async function getAllStops () {\r\n  const response = await axios.get(config.api + '/stops')\r\n  if (response && response.data && response.data.length > 0) {\r\n    return response.data.map(s => (new Stop()).fromJson(s))\r\n  } else {\r\n    return []\r\n  }\r\n}\r\n\r\nexport async function getStopById (id) {\r\n  const response = await axios.get(config.mobilesApi + '/stops/' + id)\r\n  if (response && response.data) {\r\n    return (new Stop()).fromJson(response.data)\r\n  } else {\r\n    return {}\r\n  }\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport ListSubheader from '@material-ui/core/ListSubheader'\r\nimport Table from '@material-ui/core/Table'\r\nimport TableBody from '@material-ui/core/TableBody'\r\nimport TableCell from '@material-ui/core/TableCell'\r\nimport TableContainer from '@material-ui/core/TableContainer'\r\nimport TableHead from '@material-ui/core/TableHead'\r\nimport TableRow from '@material-ui/core/TableRow'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Paper from '@material-ui/core/Paper'\r\n\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles'\r\nimport useMediaQuery from '@material-ui/core/useMediaQuery'\r\n\r\nimport CancelIcon from '@material-ui/icons/CancelTwoTone'\r\nimport EventIcon from '@material-ui/icons/EventTwoTone'\r\nimport LaunchIcon from '@material-ui/icons/LaunchTwoTone'\r\nimport LocationOnIcon from '@material-ui/icons/LocationOnTwoTone'\r\nimport PrintIcon from '@material-ui/icons/PrintTwoTone'\r\n\r\nimport { useSearchStateValue } from './context/searchState'\r\nimport { useViewStateValue } from './context/viewState'\r\n\r\nimport * as stopModel from './models/stop'\r\n\r\nconst config = require('./helpers/config.json')\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  button: {\r\n    margin: theme.spacing(1)\r\n  },\r\n  dialog: {\r\n    border: '1px solid #E0E0E0'\r\n  },\r\n  dialogContentActions: {\r\n    backgroundColor: '#ffebee',\r\n    border: '1px solid #ffcdd2',\r\n    borderRadius: 3,\r\n    padding: 4\r\n  },\r\n  leftIcon: {\r\n    marginRight: theme.spacing(1)\r\n  },\r\n  list: {\r\n    width: '100%',\r\n    maxWidth: 360,\r\n    backgroundColor: theme.palette.background.paper\r\n  },\r\n  progress: {\r\n    margin: theme.spacing(2)\r\n  },\r\n  tablePaper: {\r\n  }\r\n}))\r\n\r\nfunction StopDetails () {\r\n  const [{ currentStopId }, dispatchSearch] = useSearchStateValue() //eslint-disable-line\r\n  const [{ stopDialogOpen }, dispatchView] = useViewStateValue() //eslint-disable-line\r\n\r\n  const [stop, setStop] = useState({})\r\n\r\n  useEffect(() => {\r\n    async function getStop (stopId) {\r\n      const stopData = await stopModel.getStopById(stopId)\r\n      setStop(stopData)\r\n    }\r\n    if (currentStopId != null) getStop(currentStopId)\r\n  }, [currentStopId])\r\n\r\n  const getStopCalendar = () => window.open(config.api + '/stops/' + stop.id + '/ics')\r\n\r\n  const getStopPdf = () => window.open(config.api + '/stops/' + stop.id + '/pdf', '_blank')\r\n\r\n  const goToWebsite = () => window.open(stop.timetable, '_blank')\r\n\r\n  const viewMapStop = () => {\r\n    dispatchView({ type: 'SetMapPosition', mapPosition: [stop.longitude, stop.latitude], mapZoom: 14 })\r\n  }\r\n\r\n  const close = () => {\r\n    dispatchSearch({ type: 'SetCurrentStop', currentStopId: null, currentPoint: null })\r\n    dispatchView({ type: 'SetStopDialog', stopDialogOpen: false })\r\n  }\r\n\r\n  const theme = useTheme()\r\n  const classes = useStyles()\r\n  const fullScreen = useMediaQuery(theme.breakpoints.down('sm'))\r\n\r\n  return (\r\n    <Dialog\r\n      fullScreen={fullScreen}\r\n      disableBackdropClick\r\n      open={stopDialogOpen}\r\n      onClose={close}\r\n      aria-labelledby='dlg-title'\r\n      BackdropProps={{ invisible: true }}\r\n      PaperProps={{ elevation: 0, className: classes.dialog }}\r\n    >\r\n      {Object.keys(stop).length > 0 && stop.routeDays\r\n        ? (\r\n          <>\r\n            <DialogTitle id='dlg-title'>{stop.name}</DialogTitle>\r\n            <DialogContent>\r\n              <Typography component='h3' variant='subtitle1'>{'Mobile library stop in ' + stop.community + ' ' + stop.organisationName}</Typography>\r\n              <Typography component='p' variant='body2'>{stop.address}</Typography>\r\n              <ListSubheader>Schedules</ListSubheader>\r\n              <TableContainer component={Paper} elevation={0} className={classes.tablePaper}>\r\n                <Table size='small'>\r\n                  <TableHead>\r\n                    <TableRow>\r\n                      <TableCell>Frequency</TableCell>\r\n                      <TableCell align='right'>Next visit</TableCell>\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                    {stop.routeFrequencies.map((rs, idx) => (\r\n                      <TableRow key={'tc_rs_' + idx}>\r\n                        <TableCell component='th' scope='row'>\r\n                          {rs}\r\n                        </TableCell>\r\n                        <TableCell align='right'>{stop.routeSchedule[0].format('dddd Do MMMM h:mma')}</TableCell>\r\n                      </TableRow>\r\n                    ))}\r\n                  </TableBody>\r\n                </Table>\r\n              </TableContainer>\r\n              <br />\r\n              <div className={classes.dialogContentActions}>\r\n                <Button onClick={() => goToWebsite()} color='primary' startIcon={<LaunchIcon />}>Go to website</Button>\r\n                <Button onClick={getStopCalendar} className={classes.button} color='primary' startIcon={<EventIcon />}>Get calendar</Button>\r\n                <Button onClick={getStopPdf} className={classes.button} color='primary' startIcon={<PrintIcon />}>Print</Button>\r\n                <Button onClick={viewMapStop} className={classes.button} color='primary' startIcon={<LocationOnIcon />} component={Link} to='/map'>See on map</Button>\r\n              </div>\r\n            </DialogContent>\r\n          </>\r\n        ) : <CircularProgress className={classes.progress} color='primary' size={30} />}\r\n      <DialogActions>\r\n        <Button onClick={() => close()} color='secondary' endIcon={<CancelIcon />}>Close</Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n\r\nexport default StopDetails\r\n","import axios from 'axios'\r\n\r\nconst config = require('../helpers/config.json')\r\n\r\nconst libraryTypes = {\r\n  LAL: 'Local authority library',\r\n  'LAL-': 'Local authority run - unstaffed',\r\n  CL: 'Commissioned library',\r\n  CRL: 'Community run library',\r\n  IL: 'Independent library'\r\n}\r\n\r\nexport class Library {\r\n  constructor (obj) {\r\n    Object.assign(this, obj)\r\n  }\r\n\r\n  fromJson (json) {\r\n    this.id = json.id\r\n    this.localAuthority = json['Local authority']\r\n    this.localAuthorityCode = json['Local authority code']\r\n    this.name = json['Library name']\r\n    this.address1 = json['Address 1']\r\n    this.address2 = json['Address 2']\r\n    this.address3 = json['Address 3']\r\n    this.postcode = json.Postcode\r\n    this.postcodeLongitude = json['Postcode longitude']\r\n    this.postcodeLatitude = json['Postcode latitude']\r\n    this.uprn = json['Unique property reference number']\r\n    this.uprnLongitude = json['Unique property reference number longitude']\r\n    this.uprnLongitude = json['Unique property reference number latitude']\r\n    this.statutory = json.Statutory\r\n    this.type = json['Library type']\r\n    this.typeDescription = libraryTypes[json['Library type']]\r\n    this.yearOpened = json['Year opened']\r\n    this.yearClosed = json['Year closed']\r\n    this.mondayStaffedHours = json['Monday staffed hours']\r\n    this.tuesdayStaffedHours = json['Tuesday staffed hours']\r\n    this.wednesdayStaffedHours = json['Wednesday staffed hours']\r\n    this.thursdayStaffedHours = json['Thursday staffed hours']\r\n    this.fridayStaffedHours = json['Friday staffed hours']\r\n    this.saturdaydayStaffedHours = json['Saturday staffed hours']\r\n    this.sundayStaffedHours = json['Sunday staffed hours']\r\n    this.mondayUnstaffedHours = json['Monday unstaffed hours']\r\n    this.tuesdayUnstaffedHours = json['Tuesday unstaffed hours']\r\n    this.wednesdayUnstaffedHours = json['Wednesday unstaffed hours']\r\n    this.thursdayUnstaffedHours = json['Thursday unstaffed hours']\r\n    this.fridayUnstaffedHours = json['Friday unstaffed hours']\r\n    this.saturdaydayUnstaffedHours = json['Saturday unstaffed hours']\r\n    this.sundayUnstaffedHours = json['Sunday unstaffed hours']\r\n    this.colocated = json['Co-located']\r\n    this.colocatedWith = json['Co-located with']\r\n    this.notes = json.Notes\r\n    this.url = json.URL\r\n    this.emailAddress = json['Email address']\r\n    this.longitude = json.Longitude\r\n    this.latitude = json.Latitude\r\n    return this\r\n  }\r\n}\r\n\r\nexport async function getQueryLibraries (query, searchPosition, distance) {\r\n  let url = config.api + '/libraries?page=' + (query.page + 1) + '&limit=' + query.pageSize\r\n  if (query.orderBy && query.orderBy.field) url = url + '&sort=' + query.orderBy.field + '&direction=' + query.orderDirection\r\n\r\n  if (searchPosition && searchPosition.length > 1) url = url + '&longitude=' + searchPosition[0] + '&latitude=' + searchPosition[1]\r\n  if (distance && distance !== '') url = url + '&distance=' + distance\r\n\r\n  const response = await axios.get(url)\r\n  if (response && response.data && response.data.length > 0) {\r\n    return {\r\n      libraries: response.data.map(s => (new Library()).fromJson(s)),\r\n      total: parseInt(response.headers['x-total-count']),\r\n      page: parseInt(response.headers['x-page'])\r\n    }\r\n  } else {\r\n    return { libraries: [], total: 0, page: 1 }\r\n  }\r\n}\r\n\r\nexport async function getAllLibraries () {\r\n  const response = await axios.get(config.api + '/libraries')\r\n  if (response && response.data && response.data.length > 0) {\r\n    return response.data.map(s => (new Library()).fromJson(s))\r\n  } else {\r\n    return []\r\n  }\r\n}\r\n\r\nexport async function getLibraryById (id) {\r\n  const response = await axios.get(config.api + '/libraries/' + id)\r\n  if (response && response.data) {\r\n    return (new Library()).fromJson(response.data)\r\n  } else {\r\n    return {}\r\n  }\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles'\r\nimport useMediaQuery from '@material-ui/core/useMediaQuery'\r\n\r\nimport CancelIcon from '@material-ui/icons/CancelTwoTone'\r\nimport LocationOnIcon from '@material-ui/icons/LocationOnTwoTone'\r\nimport LaunchIcon from '@material-ui/icons/LaunchTwoTone'\r\nimport ListSubheader from '@material-ui/core/ListSubheader'\r\n\r\nimport { useSearchStateValue } from './context/searchState'\r\nimport { useViewStateValue } from './context/viewState'\r\n\r\nimport * as libraryModel from './models/library'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  button: {\r\n    margin: theme.spacing(1)\r\n  },\r\n  dialog: {\r\n    border: '1px solid #E0E0E0'\r\n  },\r\n  dialogContentActions: {\r\n    backgroundColor: '#ffebee',\r\n    border: '1px solid #ffcdd2',\r\n    borderRadius: 3,\r\n    padding: 4\r\n  },\r\n  leftIcon: {\r\n    marginRight: theme.spacing(1)\r\n  },\r\n  list: {\r\n    width: '100%',\r\n    maxWidth: 360,\r\n    backgroundColor: theme.palette.background.paper\r\n  },\r\n  progress: {\r\n    margin: theme.spacing(2)\r\n  }\r\n}))\r\n\r\nfunction LibraryDetails () {\r\n  const [{ currentLibraryId }, dispatchSearch] = useSearchStateValue() //eslint-disable-line\r\n  const [{ libraryDialogOpen }, dispatchView] = useViewStateValue() //eslint-disable-line\r\n\r\n  const [library, setLibrary] = useState({})\r\n\r\n  useEffect(() => {\r\n    async function getLibrary (libraryId) {\r\n      const libraryData = await libraryModel.getLibraryById(libraryId)\r\n      setLibrary(libraryData)\r\n    }\r\n    if (currentLibraryId != null) getLibrary(currentLibraryId)\r\n  }, [currentLibraryId])\r\n\r\n  const goToWebsite = () => window.open(library.timetable, '_blank')\r\n\r\n  const viewMapLibrary = () => {\r\n    dispatchView({ type: 'SetMapPosition', mapPosition: [library.longitude, library.latitude], mapZoom: 14 })\r\n  }\r\n\r\n  const close = () => {\r\n    dispatchSearch({ type: 'SetCurrentLibrary', currentLibraryId: null, currentPoint: null })\r\n    dispatchView({ type: 'SetLibraryDialog', libraryDialogOpen: false })\r\n  }\r\n\r\n  const theme = useTheme()\r\n  const classes = useStyles()\r\n  const fullScreen = useMediaQuery(theme.breakpoints.down('sm'))\r\n\r\n  return (\r\n    <Dialog\r\n      fullScreen={fullScreen}\r\n      disableBackdropClick\r\n      open={libraryDialogOpen}\r\n      onClose={close}\r\n      aria-labelledby='dlg-title'\r\n      BackdropProps={{ invisible: true }}\r\n      PaperProps={{ elevation: 0, className: classes.dialog }}\r\n    >\r\n      {Object.keys(library).length > 0\r\n        ? (\r\n          <>\r\n            <DialogTitle id='dlg-title'>{library.name}</DialogTitle>\r\n            <DialogContent>\r\n              <Typography component='h3' variant='subtitle1'>{library.typeDescription + ' in ' + library.localAuthority + '. '}</Typography>\r\n              <Typography component='p' variant='body2'>{[library.address1, library.address2, library.address3, library.postcode].filter(l => Boolean(l)).join(', ')}</Typography>\r\n              <ListSubheader disableSticky>Actions</ListSubheader>\r\n              <div className={classes.dialogContentActions}>\r\n                <Button onClick={() => goToWebsite()} color='primary' startIcon={<LaunchIcon />}>Go to website</Button>\r\n                <Button onClick={viewMapLibrary} className={classes.button} color='primary' startIcon={<LocationOnIcon />} component={Link} to='/map'>See on map</Button>\r\n              </div>\r\n            </DialogContent>\r\n          </>\r\n        ) : <CircularProgress className={classes.progress} color='primary' size={30} />}\r\n      <DialogActions>\r\n        <Button onClick={() => close()} color='secondary' endIcon={<CancelIcon />}>Close</Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n\r\nexport default LibraryDetails\r\n","import axios from 'axios'\r\n\r\nconst config = require('./config.json')\r\n\r\nexport function getPosition (options = {}) {\r\n  return new Promise((resolve, reject) => {\r\n    navigator.geolocation.getCurrentPosition(resolve, reject, options)\r\n  })\r\n}\r\n\r\nexport async function getCurrentPosition () {\r\n  var options = {\r\n    enableHighAccuracy: true,\r\n    timeout: 10000,\r\n    maximumAge: 0\r\n  }\r\n\r\n  const position = await getPosition(options)\r\n  return [position.coords.longitude, position.coords.latitude]\r\n}\r\n\r\nexport async function getPostcode (postcode) {\r\n  const response = await axios.get(config.postcodeApi + postcode)\r\n  return {\r\n    location: [response.data.longitude, response.data.latitude],\r\n    organisation: response.data.library_service_name\r\n  }\r\n};\r\n","import React, { useState, useEffect, useRef } from 'react'\r\n\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport InputBase from '@material-ui/core/InputBase'\r\nimport ListSubheader from '@material-ui/core/ListSubheader'\r\nimport Menu from '@material-ui/core/Menu'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\n\r\nimport { fade } from '@material-ui/core/styles/colorManipulator'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\n\r\nimport ClearIcon from '@material-ui/icons/ClearTwoTone'\r\nimport SearchIcon from '@material-ui/icons/SearchTwoTone'\r\nimport SettingsIcon from '@material-ui/icons/SettingsTwoTone'\r\n\r\nimport { useApplicationStateValue } from './context/applicationState'\r\nimport { useSearchStateValue } from './context/searchState'\r\nimport { useViewStateValue } from './context/viewState'\r\n\r\nimport * as geoHelper from './helpers/geo'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  grow: {\r\n    flexGrow: 1\r\n  },\r\n  iconButton: {\r\n    padding: theme.spacing(1)\r\n  },\r\n  inputInput: {\r\n    paddingTop: theme.spacing(1),\r\n    paddingRight: theme.spacing(1),\r\n    paddingBottom: theme.spacing(1),\r\n    paddingLeft: theme.spacing(1),\r\n    fontWeight: theme.typography.fontWeightBold\r\n  },\r\n  search: {\r\n    position: 'relative',\r\n    border: '1px solid #E0E0E0',\r\n    borderRadius: theme.shape.borderRadius,\r\n    backgroundColor: fade(theme.palette.common.white, 0.8),\r\n    '&:hover': {\r\n      backgroundColor: fade(theme.palette.common.white, 0.9)\r\n    },\r\n    marginLeft: 0,\r\n    marginRight: theme.spacing(0),\r\n    display: 'flex',\r\n    maxWidth: 215\r\n  }\r\n}))\r\n\r\nfunction usePrevious (value) {\r\n  const ref = useRef()\r\n  useEffect(() => {\r\n    ref.current = value\r\n  })\r\n  return ref.current\r\n}\r\n\r\nfunction PostcodeSearch (props) {\r\n  const { settings } = props\r\n  const [{ services }, dispatchApplication] = useApplicationStateValue() //eslint-disable-line\r\n  const [{ searchType, searchPostcode, searchDistance }, dispatchSearch] = useSearchStateValue() //eslint-disable-line\r\n  const [{ loadingPostcode }, dispatchView] = useViewStateValue() //eslint-disable-line\r\n\r\n  const [tempPostcode, setTempPostcode] = useState(searchPostcode)\r\n  const [anchor, setAnchor] = useState(null)\r\n\r\n  const prevProps = usePrevious({ searchPostcode })\r\n  useEffect(() => {\r\n    if (prevProps && searchPostcode !== prevProps.searchPostcode) setTempPostcode(searchPostcode)\r\n  }, [searchPostcode]) // eslint-disable-line\r\n\r\n  const openSettingsMenu = (e) => setAnchor(e.currentTarget)\r\n\r\n  const closeSettingsMenu = () => setAnchor(null)\r\n\r\n  const setSearchDistance = (searchDistance) => {\r\n    closeSettingsMenu()\r\n    dispatchSearch({ type: 'SetSearchDistance', searchDistance: searchDistance })\r\n    if (searchType === 'postcode') postcodeSearch()\r\n  }\r\n\r\n  const postcodeSearch = async () => {\r\n    dispatchView({ type: 'ToggleLoadingPostcode' })\r\n    if (tempPostcode === '') {\r\n      dispatchView({ type: 'ShowNotification', notificationMessage: 'You must enter a postcode' })\r\n      return\r\n    }\r\n    const validatePostcode = (pc) => /^[A-Z]{1,2}\\d[A-Z\\d]? ?\\d[A-Z]{2}$/.test(pc)\r\n    if (validatePostcode(tempPostcode.trim())) {\r\n      const service = await geoHelper.getPostcode(tempPostcode.trim())\r\n      dispatchSearch({ type: 'SetPostcodeSearch', searchPostcode: tempPostcode, searchPosition: service.location })\r\n    } else {\r\n      dispatchView({ type: 'ShowNotification', notificationMessage: 'Is that a valid postcode? Please check.' })\r\n    }\r\n    dispatchView({ type: 'ToggleLoadingPostcode' })\r\n  }\r\n\r\n  const classes = useStyles()\r\n\r\n  return (\r\n    <div className={classes.search}>\r\n      <InputBase\r\n        placeholder='Postcode'\r\n        classes={{\r\n          input: classes.inputInput\r\n        }}\r\n        value={tempPostcode}\r\n        onChange={(e) => setTempPostcode(e.target.value.toUpperCase())}\r\n      />\r\n      <div className={classes.grow} />\r\n      {searchType === 'postcode'\r\n        ? (\r\n          <Tooltip title='Clear search'>\r\n            <IconButton\r\n              className={classes.iconButton}\r\n              onClick={() => dispatchSearch({ type: 'ClearAll' })}\r\n            >\r\n              <ClearIcon />\r\n            </IconButton>\r\n          </Tooltip>\r\n        )\r\n        : null}\r\n      <Tooltip title='Search by postcode'>\r\n        <IconButton\r\n          color='primary'\r\n          className={classes.iconButton}\r\n          disabled={loadingPostcode}\r\n          onClick={() => postcodeSearch()}\r\n        >\r\n          <SearchIcon />\r\n        </IconButton>\r\n      </Tooltip>\r\n      {settings\r\n        ? (\r\n          <Tooltip title='Change search settings'>\r\n            <IconButton\r\n              className={classes.iconButton}\r\n              color='secondary'\r\n              onClick={(e) => { openSettingsMenu(e) }}\r\n            >\r\n              <SettingsIcon />\r\n            </IconButton>\r\n          </Tooltip>\r\n        ) : null}\r\n      <Menu\r\n        id='mnu-settings'\r\n        anchorEl={anchor}\r\n        keepMounted\r\n        open={Boolean(anchor)}\r\n        onClose={() => closeSettingsMenu()}\r\n      >\r\n        <ListSubheader disableSticky>Search distance</ListSubheader>\r\n        <MenuItem onClick={() => setSearchDistance(1609)}>1 mile</MenuItem>\r\n        <MenuItem onClick={() => setSearchDistance(4827)}>3 miles</MenuItem>\r\n        <MenuItem onClick={() => setSearchDistance(8045)}>5 miles</MenuItem>\r\n        <MenuItem onClick={() => setSearchDistance(16090)}>10 miles</MenuItem>\r\n        <MenuItem onClick={() => setSearchDistance(32180)}>20 miles</MenuItem>\r\n        <MenuItem onClick={() => setSearchDistance(80450)}>50 miles</MenuItem>\r\n      </Menu>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PostcodeSearch\r\n","import React, { useState } from 'react'\r\n\r\nimport { Link, useLocation } from 'react-router-dom'\r\n\r\nimport AppBar from '@material-ui/core/AppBar'\r\nimport Button from '@material-ui/core/Button'\r\nimport Container from '@material-ui/core/Container'\r\nimport Hidden from '@material-ui/core/Hidden'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Tab from '@material-ui/core/Tab'\r\nimport Tabs from '@material-ui/core/Tabs'\r\nimport Toolbar from '@material-ui/core/Toolbar'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport BookIcon from '@material-ui/icons/BookTwoTone'\r\nimport CancelIcon from '@material-ui/icons/CancelTwoTone'\r\nimport DirectionBusIcon from '@material-ui/icons/DirectionsBusTwoTone'\r\nimport GridOnIcon from '@material-ui/icons/GridOnTwoTone'\r\nimport HeadsetIcon from '@material-ui/icons/HeadsetTwoTone'\r\nimport ImportContactsIcon from '@material-ui/icons/ImportContactsTwoTone'\r\nimport MapIcon from '@material-ui/icons/MapTwoTone'\r\nimport MovieIcon from '@material-ui/icons/MovieTwoTone'\r\nimport SearchIcon from '@material-ui/icons/SearchTwoTone'\r\nimport WidgetsIcon from '@material-ui/icons/WidgetsTwoTone'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles'\r\n\r\nimport PostcodeSearch from './PostcodeSearch'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    backgroundColor: 'white',\r\n    position: 'relative'\r\n  },\r\n  appBarTransparent: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    backgroundColor: 'rgba(250, 250, 250, 0.8)',\r\n    position: 'relative'\r\n  },\r\n  grow: {\r\n    flexGrow: 1\r\n  },\r\n  title: {\r\n    margin: theme.spacing(2),\r\n    display: 'inline-block',\r\n    verticalAlign: 'middle'\r\n  },\r\n  topIcon: {\r\n    backgroundColor: 'rgba(250, 250, 250, 0.8)',\r\n    border: '1px solid #e5e5e5',\r\n    '&:hover': {\r\n      backgroundColor: 'rgba(250, 250, 250, 0.8)'\r\n    }\r\n  },\r\n  topTitle: {\r\n    position: 'relative',\r\n    zIndex: theme.zIndex.drawer + 1\r\n  }\r\n}))\r\n\r\nfunction AppHeader (props) {\r\n  const { site } = props\r\n\r\n  const [appsOpen, setAppsOpen] = useState(false)\r\n  const [tabValue, setTabValue] = useState(site)\r\n\r\n  const location = useLocation()\r\n  const classes = useStyles()\r\n\r\n  const sites = [\r\n    {\r\n      title: 'Libraries at home',\r\n      url: 'https://www.librariesathome.co.uk',\r\n      icon: <ImportContactsIcon />,\r\n      links: [\r\n        {\r\n          title: 'Find service',\r\n          short: 'Find',\r\n          icon: <SearchIcon />,\r\n          to: '/'\r\n        },\r\n        {\r\n          title: 'Watch library TV',\r\n          short: 'Watch',\r\n          icon: <MovieIcon />,\r\n          to: '/watch'\r\n        },\r\n        {\r\n          title: 'Read blogs',\r\n          short: 'Read',\r\n          icon: <BookIcon />,\r\n          to: '/read'\r\n        },\r\n        {\r\n          title: 'Listen podcasts',\r\n          short: 'Listen',\r\n          icon: <HeadsetIcon />,\r\n          to: '/listen'\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Mobile libraries',\r\n      url: 'https://www.mobilelibraries.org',\r\n      icon: <DirectionBusIcon />,\r\n      links: [\r\n        {\r\n          title: 'Find my stop',\r\n          short: 'Stops',\r\n          icon: <GridOnIcon />,\r\n          to: '/stops'\r\n        },\r\n        {\r\n          title: 'Mobile vans',\r\n          short: 'Vans',\r\n          icon: <DirectionBusIcon />,\r\n          to: '/'\r\n        },\r\n        {\r\n          title: 'Map of stops',\r\n          short: 'Map',\r\n          icon: <MapIcon />,\r\n          to: '/map'\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Library map',\r\n      url: 'https://www.librarymap.co.uk',\r\n      icon: <MapIcon />,\r\n      links: [\r\n        {\r\n          title: 'Find my library',\r\n          short: 'Find',\r\n          icon: <GridOnIcon />,\r\n          to: '/'\r\n        },\r\n        {\r\n          title: 'Map of libraries',\r\n          short: 'Map',\r\n          icon: <MapIcon />,\r\n          to: '/map'\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n\r\n  const appBarClass = (location.pathname === '/map' ? classes.appBarTransparent : classes.appBar)\r\n\r\n  return (\r\n    <>\r\n      <Container maxWidth='lg' className={classes.topTitle}>\r\n        <Toolbar>\r\n          <IconButton className={classes.topIcon} color='primary' onClick={() => { setAppsOpen(!appsOpen); setTabValue(site) }}>\r\n            {appsOpen ? <CancelIcon /> : <WidgetsIcon />}\r\n          </IconButton>\r\n          <span className={classes.grow} />\r\n          <Typography color='secondary' variant='h6' component='h1' className={classes.title}>{sites[site].title}</Typography>\r\n        </Toolbar>\r\n      </Container>\r\n      {appsOpen ? (\r\n        <AppBar position='static' color='default' elevation={0} className={appBarClass}>\r\n          <Container maxWidth='lg'>\r\n            <Tabs\r\n              centered\r\n              value={tabValue}\r\n              onChange={(e, v) => { setTabValue(v) }}\r\n              variant='scrollable'\r\n              scrollButtons='on'\r\n              indicatorColor='primary'\r\n              textColor='secondary'\r\n            >\r\n              {sites.map((s, idx) => {\r\n                return (\r\n                  <Tab key={'tb_site_' + idx} label={s.title} icon={s.icon} />\r\n                )\r\n              })}\r\n            </Tabs>\r\n          </Container>\r\n        </AppBar>\r\n      ) : null}\r\n      <AppBar\r\n        position='static'\r\n        color='inherit'\r\n        elevation={0}\r\n        className={appBarClass}\r\n      >\r\n        <Container maxWidth='lg'>\r\n          <Toolbar>\r\n            <Hidden mdUp>\r\n              {sites[tabValue].links.map((link, idx) => {\r\n                return (\r\n                  <Tooltip title={link.title} key={'icnb_menu_lg_' + idx}>\r\n                    <Button\r\n                      component={Link}\r\n                      to={(tabValue === site ? link.to : sites[tabValue].url + link.to)}\r\n                      disableRipple={location.pathname === link.to}\r\n                      disableFocusRipple={location.pathname === link.to}\r\n                      color='secondary'\r\n                      size='large'\r\n                      startIcon={link.icon}\r\n                    >\r\n                      {link.short}\r\n                    </Button>\r\n                  </Tooltip>\r\n                )\r\n              })}\r\n            </Hidden>\r\n            <Hidden smDown>\r\n              {sites[tabValue].links.map((link, idx) => {\r\n                return (\r\n                  <Tooltip title={link.title} key={'icnb_menu_lg_' + idx}>\r\n                    <Button\r\n                      component={Link}\r\n                      to={(tabValue === site ? link.to : sites[tabValue].url + link.to)}\r\n                      disableRipple={location.pathname === link.to}\r\n                      disableFocusRipple={location.pathname === link.to}\r\n                      color='secondary'\r\n                      size='large'\r\n                      startIcon={link.icon}\r\n                    >\r\n                      {link.title}\r\n                    </Button>\r\n                  </Tooltip>\r\n                )\r\n              })}\r\n            </Hidden>\r\n            <span className={classes.grow} />\r\n            {location.pathname === '/map' ? <PostcodeSearch /> : null}\r\n          </Toolbar>\r\n        </Container>\r\n      </AppBar>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default AppHeader\r\n","import React from 'react'\r\nimport RouteLink from 'react-router-dom/Link'\r\n\r\nimport Divider from '@material-ui/core/Divider'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Link from '@material-ui/core/Link'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport FavoriteIcon from '@material-ui/icons/FavoriteTwoTone'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    paddingTop: theme.spacing(5),\r\n    marginTop: theme.spacing(3),\r\n    marginBottom: theme.spacing(5),\r\n    width: '100%'\r\n  },\r\n  grid: {\r\n    marginTop: theme.spacing(2)\r\n  },\r\n  loveIcon: {\r\n    marginLeft: theme.spacing(1),\r\n    marginRight: theme.spacing(1)\r\n  },\r\n  footerText: {\r\n    verticalAlign: 'middle',\r\n    display: 'inline-flex'\r\n  },\r\n  footerRight: {\r\n    textAlign: 'right'\r\n  },\r\n  tapTarget: {\r\n    lineHeight: 2.2,\r\n    fontSize: 16\r\n  }\r\n}))\r\n\r\nfunction Footer () {\r\n  const classes = useStyles()\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Divider />\r\n      <Grid container spacing={3} className={classes.grid}>\r\n        <Grid item xs={12} sm={6} md={6} lg={6} xl={6}>\r\n          <Typography variant='body1' className={classes.footerText}>Built by Libraries Hacked</Typography><br />\r\n          <Typography variant='button'>\r\n            <Link component={RouteLink} to='/data' title='Maintaining the data used on this site and licensing' className={classes.tapTarget}>Data</Link><br />\r\n            <Link href='https://github.com/LibrariesHacked/librarymap' target='_blank' title='Project on GitHub' className={classes.tapTarget}>GitHub</Link>\r\n          </Typography>\r\n        </Grid>\r\n        <Grid className={classes.footerRight} item xs={12} sm={6} md={6} lg={6} xl={6}>\r\n          <Typography variant='body1' className={classes.footerText}>To the memory of Paul Rowe <FavoriteIcon color='primary' className={classes.loveIcon} /></Typography><br />\r\n          <Typography variant='button'>\r\n            <Link href='https://www.mind.org.uk/donate/' title='Donate to Mind' className={classes.tapTarget} target='_blank'>Donate to Mind</Link>\r\n          </Typography>\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Footer\r\n","import React from 'react'\r\n\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles'\r\n\r\nimport { useSearchStateValue } from './context/searchState'\r\n\r\nimport Face from '@material-ui/icons/FaceTwoTone'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  avatar: {\r\n    margin: 0\r\n  },\r\n  avatarOn: {\r\n    margin: 0,\r\n    cursor: 'pointer',\r\n    backgroundColor: theme.palette.primary.main\r\n  }\r\n}))\r\n\r\nfunction MeAvatar () {\r\n  const [{ searchType }] = useSearchStateValue()\r\n\r\n  const classes = useStyles()\r\n\r\n  return (\r\n    <Tooltip title='Me'>\r\n      <Avatar\r\n        className={searchType === 'gps' ? classes.avatarOn : classes.avatar}\r\n      >\r\n        <Face />\r\n      </Avatar>\r\n    </Tooltip>\r\n  )\r\n}\r\n\r\nexport default MeAvatar\r\n","import React from 'react'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport Switch from '@material-ui/core/Switch'\r\nimport useMediaQuery from '@material-ui/core/useMediaQuery'\r\n\r\nimport { useTheme, makeStyles } from '@material-ui/core/styles'\r\n\r\nimport { useViewStateValue } from './context/viewState'\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  dialog: {\r\n    border: '1px solid #E0E0E0'\r\n  }\r\n}))\r\n\r\nfunction MapSettings () {\r\n  const [{ mapSettings, mapSettingsDialogOpen }, dispatchView] = useViewStateValue()\r\n\r\n  const closeDialog = () => {\r\n    dispatchView({ type: 'SetMapSettingsDialog', mapSettingsDialogOpen: false })\r\n  }\r\n\r\n  const handleAuthorityBoundaryChange = () => {\r\n    dispatchView({ type: 'ToggleMapSetting', mapSetting: 'authorityBoundary' })\r\n  }\r\n\r\n  const classes = useStyles()\r\n  const theme = useTheme()\r\n  const fullScreen = useMediaQuery(theme.breakpoints.down('sm'))\r\n\r\n  return (\r\n    <Dialog\r\n      fullScreen={fullScreen}\r\n      disableBackdropClick\r\n      open={mapSettingsDialogOpen}\r\n      onClose={closeDialog}\r\n      BackdropProps={{\r\n        invisible: true\r\n      }}\r\n      PaperProps={{ elevation: 0, className: classes.dialog }}\r\n    >\r\n      <DialogTitle>Map settings</DialogTitle>\r\n      <DialogContent>\r\n        <FormControlLabel\r\n          control={\r\n            <Switch\r\n              checked={mapSettings.authorityBoundary}\r\n              onChange={handleAuthorityBoundaryChange}\r\n              name='sw_authority_boundary'\r\n              color='primary'\r\n            />\r\n          }\r\n          label='Library service boundaries'\r\n        />\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={closeDialog} color='secondary'>Close</Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n\r\nexport default MapSettings\r\n","import axios from 'axios'\r\n\r\nconst config = require('../helpers/config.json')\r\n\r\nexport class Isochrone {\r\n  constructor (obj) {\r\n    Object.assign(this, obj)\r\n  }\r\n\r\n  fromJson (json, transport) {\r\n    this.transport = transport\r\n    this.geo = json\r\n    this.display = true\r\n    return this\r\n  }\r\n}\r\n\r\nexport async function getIsochrone (point, transport) {\r\n  const settings = config.travel.filter(n => n.name === transport)[0]\r\n  const url = config.isochroneApi + transport + '?longitude=' + point[0] + '&latitude=' + point[1] + '&interval=' + settings.interval + '&duration=' + settings.duration\r\n\r\n  const response = await axios.get(url)\r\n  if (response && response.data) {\r\n    return new Isochrone().fromJson(response.data, transport)\r\n  } else {\r\n    return null\r\n  }\r\n}\r\n","import React, { useEffect } from 'react'\r\n\r\nimport Fab from '@material-ui/core/Fab'\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport Menu from '@material-ui/core/Menu'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\n\r\nimport ReactMapboxGl, { ZoomControl, Source, Layer, GeoJSONLayer, Marker } from 'react-mapbox-gl'\r\n\r\nimport LayersIcon from '@material-ui/icons/LayersTwoTone'\r\nimport DirectionsBike from '@material-ui/icons/DirectionsBikeTwoTone'\r\nimport DirectionsWalk from '@material-ui/icons/DirectionsWalkTwoTone'\r\nimport DirectionsCar from '@material-ui/icons/DirectionsCarTwoTone'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles'\r\n\r\nimport { useApplicationStateValue } from './context/applicationState'\r\nimport { useSearchStateValue } from './context/searchState'\r\nimport { useViewStateValue } from './context/viewState'\r\n\r\nimport MeAvatar from './MeAvatar'\r\nimport MapSettings from './MapSettings'\r\n\r\nimport * as isochroneModel from './models/isochrone'\r\nimport * as stopModel from './models/stop'\r\nimport * as libraryModel from './models/library'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  listItemRoot: {\r\n    minWidth: 34\r\n  },\r\n  menu: {\r\n    border: '1px solid #E0E0E0'\r\n  },\r\n  settings: {\r\n    position: 'absolute',\r\n    bottom: theme.spacing(4),\r\n    right: theme.spacing(4)\r\n  }\r\n}))\r\n\r\nconst config = require('./helpers/config.json')\r\n\r\nconst Map = ReactMapboxGl({\r\n  minZoom: 5,\r\n  maxZoom: 18,\r\n  customAttribution: 'Contains public sector information licensed under the Open Government Licence'\r\n})\r\n\r\nconst libraryTiles = [config.libraryTiles]\r\nconst libraryBuildingsTiles = [config.libraryBuildingsTiles]\r\nconst libraryAuthorityTiles = [config.libraryAuthorityTiles]\r\nconst stopTiles = [config.stopTiles]\r\nconst tripTiles = [config.tripTiles]\r\n\r\nfunction LibraryMap () {\r\n  const [{ isochrones }, dispatchApplication] = useApplicationStateValue() //eslint-disable-line\r\n  const [{ searchType, searchPosition, currentStopId, currentLibraryId, currentPoint }, dispatchSearch] = useSearchStateValue() //eslint-disable-line\r\n  const [{ mapZoom, mapPosition, mapSettings, mapSettingsDialogOpen, isochronesMenuOpen, isochronesMenuAnchor }, dispatchView] = useViewStateValue() //eslint-disable-line\r\n\r\n  useEffect(() => {\r\n  }, [])\r\n\r\n  var clickLibrary = async (map) => {\r\n    if (map && map.features && map.features.length > 0 && map.features[0].properties) {\r\n      var id = map.features[0].properties.id\r\n      var library = await libraryModel.getLibraryById(id)\r\n      dispatchSearch({ type: 'SetCurrentLibrary', currentLibraryId: id, currentPoint: [library.longitude, library.latitude] })\r\n      dispatchView({ type: 'SetIsochronesMenu', isochronesMenuOpen: true, isochronesMenuAnchor: { left: map.point.x, top: map.point.y } })\r\n    }\r\n  }\r\n\r\n  const clickStop = async (map) => {\r\n    if (map && map.features && map.features.length > 0 && map.features[0].properties) {\r\n      var id = map.features[0].properties.id\r\n      var stop = await stopModel.getStopById(id)\r\n      dispatchSearch({ type: 'SetCurrentStop', currentStopId: id, currentPoint: [stop.longitude, stop.latitude] })\r\n      dispatchView({ type: 'SetIsochronesMenu', isochronesMenuOpen: true, isochronesMenuAnchor: { left: map.point.x, top: map.point.y } })\r\n    }\r\n  }\r\n\r\n  var moreInfoIsochronesMenu = () => {\r\n    closeIsochronesMenu()\r\n    if (currentStopId) dispatchView({ type: 'SetStopDialog', stopDialogOpen: true })\r\n    if (currentLibraryId) dispatchView({ type: 'SetLibraryDialog', libraryDialogOpen: true })\r\n  }\r\n\r\n  var toggleIsochrone = async (transport) => {\r\n    if (isochrones[currentPoint] && isochrones[currentPoint][transport]) {\r\n      dispatchApplication({ type: 'SetIsochroneDisplay', point: currentPoint, transport: transport, display: !isochrones[currentPoint][transport].display })\r\n    } else {\r\n      const isochrone = await isochroneModel.getIsochrone(currentPoint, transport)\r\n      dispatchApplication({ type: 'AddIsochrone', point: currentPoint, transport: transport, isochrone: isochrone })\r\n    }\r\n  }\r\n\r\n  var closeIsochronesMenu = () => dispatchView({ type: 'SetIsochronesMenu', isochronesMenuOpen: false, isochronesMenuAnchor: null })\r\n\r\n  const classes = useStyles()\r\n\r\n  const travelIcons = {\r\n    'cycling-regular': <DirectionsBike fontSize='small' color={isochrones[currentPoint] && isochrones[currentPoint]['cycling-regular'] && isochrones[currentPoint]['cycling-regular'].display ? 'primary' : 'secondary'} />,\r\n    'driving-car': <DirectionsCar fontSize='small' color={isochrones[currentPoint] && isochrones[currentPoint]['driving-car'] && isochrones[currentPoint]['driving-car'].display ? 'primary' : 'secondary'} />,\r\n    'foot-walking': <DirectionsWalk fontSize='small' color={isochrones[currentPoint] && isochrones[currentPoint]['foot-walking'] && isochrones[currentPoint]['foot-walking'].display ? 'primary' : 'secondary'} />\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Map\r\n        style='style.json' // eslint-disable-line\r\n        center={mapPosition}\r\n        zoom={mapZoom}\r\n        maxZoom={18}\r\n        pitch={[0]}\r\n        bearing={[0]}\r\n        fitBounds={null}\r\n        containerStyle={{ top: 0, bottom: 0, right: 0, left: 0, height: '100vh', width: '100vw', position: 'absolute' }}\r\n      >\r\n        {Object.keys(isochrones).map(point => {\r\n          return Object.keys(isochrones[point])\r\n            .filter(transport => {\r\n              return isochrones[point][transport].display\r\n            })\r\n            .map((transport, x) => {\r\n              return (\r\n                <span key={'sp_isotransport_' + x}>\r\n                  <GeoJSONLayer // Shows the shaded polygons\r\n                    data={isochrones[point][transport].geo}\r\n                    fillPaint={{\r\n                      'fill-opacity': 0.1,\r\n                      'fill-antialias': true,\r\n                      'fill-color': config.travel.filter(t => t.name === transport)[0].colour\r\n                    }}\r\n                    fillOnClick={(e) => { }}\r\n                  />\r\n                  <GeoJSONLayer // Shows the outlines of the distances\r\n                    data={isochrones[point][transport].geo}\r\n                    linePaint={{\r\n                      'line-opacity': 0.4,\r\n                      'line-width': 2,\r\n                      'line-color': config.travel.filter(t => t.name === transport)[0].colour\r\n                    }}\r\n                  />\r\n                  <GeoJSONLayer // Shows the distances labels\r\n                    data={isochrones[point][transport].geo}\r\n                    symbolLayout={{\r\n                      'text-field': ['concat', ['to-string', ['/', ['get', 'value'], 60]], ' min'],\r\n                      'text-font': ['Source Sans Pro Bold'],\r\n                      'symbol-placement': 'line',\r\n                      'text-allow-overlap': false,\r\n                      'text-padding': 2,\r\n                      'text-max-angle': 90,\r\n                      'text-size': {\r\n                        base: 1.2,\r\n                        stops: [[8, 12], [22, 30]]\r\n                      },\r\n                      'text-letter-spacing': 0.1\r\n                    }}\r\n                    symbolPaint={{\r\n                      'text-halo-color': 'rgba(255, 255, 255, 0.9)',\r\n                      'text-halo-width': 4,\r\n                      'text-halo-blur': 2,\r\n                      'text-color': config.travel.filter(t => t.name === transport)[0].colour\r\n                    }}\r\n                  />\r\n                  <GeoJSONLayer // Shows the distances labels\r\n                    data={isochrones[point][transport].geo}\r\n                    symbolLayout={{\r\n                      'text-field': ['concat', ['get', 'total_pop']],\r\n                      'text-font': ['Source Sans Pro Bold'],\r\n                      'symbol-placement': 'line',\r\n                      'text-allow-overlap': false,\r\n                      'text-keep-upright': false,\r\n                      'text-padding': 2,\r\n                      'text-max-angle': 0,\r\n                      'text-offset': [0, 1],\r\n                      'text-size': {\r\n                        base: 1.2,\r\n                        stops: [[10, 8], [22, 14]]\r\n                      },\r\n                      'text-letter-spacing': 0.1\r\n                    }}\r\n                    symbolPaint={{\r\n                      'text-halo-color': 'rgba(255, 255, 255, 0.9)',\r\n                      'text-halo-width': 0,\r\n                      'text-halo-blur': 0,\r\n                      'text-color': config.travel.filter(t => t.name === transport)[0].colour\r\n                    }}\r\n                  />\r\n                </span>)\r\n            })\r\n        })}\r\n        <Source\r\n          id='src_libraries_buildings'\r\n          tileJsonSource={{\r\n            type: 'vector',\r\n            tiles: libraryBuildingsTiles\r\n          }}\r\n        />\r\n        <Layer\r\n          id='lyr_library_buildings_lines'\r\n          type='line'\r\n          sourceId='src_libraries_buildings'\r\n          sourceLayer='library_buildings'\r\n          minZoom={14}\r\n          layout={{\r\n            'line-join': 'round',\r\n            'line-cap': 'square'\r\n          }}\r\n          paint={{\r\n            'line-color': '#455a64',\r\n            'line-opacity': 0.8,\r\n            'line-width': [\r\n              'interpolate',\r\n              [\r\n                'linear'\r\n              ],\r\n              [\r\n                'zoom'\r\n              ],\r\n              14, 2,\r\n              18, 3\r\n            ]\r\n          }}\r\n        />\r\n        <Layer\r\n          id='lyr_library_buildings_fill'\r\n          type='fill'\r\n          sourceId='src_libraries_buildings'\r\n          sourceLayer='library_buildings'\r\n          minZoom={14}\r\n          paint={{\r\n            'fill-color': '#455a64',\r\n            'fill-opacity': 0.3\r\n          }}\r\n        />\r\n        <Source\r\n          id='src_library_authorities'\r\n          tileJsonSource={{\r\n            type: 'vector',\r\n            tiles: libraryAuthorityTiles\r\n          }}\r\n        />\r\n        {mapSettings.authorityBoundary\r\n          ? (\r\n            <>\r\n              <Layer\r\n                id='lyr_library_authorities_lines'\r\n                type='line'\r\n                sourceId='src_library_authorities'\r\n                sourceLayer='library_authority_boundaries'\r\n                minZoom={6}\r\n                layout={{\r\n                  'line-join': 'round',\r\n                  'line-cap': 'square'\r\n                }}\r\n                paint={{\r\n                  'line-color': '#a7a39b',\r\n                  'line-opacity': 1,\r\n                  'line-width': [\r\n                    'interpolate',\r\n                    [\r\n                      'linear'\r\n                    ],\r\n                    [\r\n                      'zoom'\r\n                    ],\r\n                    6, 1,\r\n                    18, 4\r\n                  ]\r\n                }}\r\n              />\r\n              <Layer\r\n                id='lyr_library_authorities_fill'\r\n                type='fill'\r\n                sourceId='src_library_authorities'\r\n                sourceLayer='library_authority_boundaries'\r\n                minZoom={6}\r\n                paint={{\r\n                  'fill-color': '#ccc',\r\n                  'fill-opacity': 0.1\r\n                }}\r\n              />\r\n            </>\r\n          ) : null}\r\n        <Source\r\n          id='src_trips'\r\n          tileJsonSource={{\r\n            type: 'vector',\r\n            tiles: tripTiles\r\n          }}\r\n        />\r\n        <Layer\r\n          id='lyr_trips_lines'\r\n          type='line'\r\n          sourceId='src_trips'\r\n          sourceLayer='trip'\r\n          minZoom={14}\r\n          layout={{\r\n            'line-join': 'round',\r\n            'line-cap': 'square'\r\n          }}\r\n          paint={{\r\n            'line-color': '#a7a39b',\r\n            'line-offset': [\r\n              'interpolate',\r\n              [\r\n                'linear'\r\n              ],\r\n              [\r\n                'zoom'\r\n              ],\r\n              14, 1,\r\n              18, 4\r\n            ],\r\n            'line-opacity': 1,\r\n            'line-width': [\r\n              'interpolate',\r\n              [\r\n                'linear'\r\n              ],\r\n              [\r\n                'zoom'\r\n              ],\r\n              14, 1,\r\n              18, 4\r\n            ],\r\n            'line-dasharray': [\r\n              2,\r\n              0.5\r\n            ]\r\n          }}\r\n        />\r\n        <Source\r\n          id='src_stops'\r\n          tileJsonSource={{\r\n            type: 'vector',\r\n            tiles: stopTiles\r\n          }}\r\n        />\r\n        <Layer\r\n          id='lyr_stops_circles'\r\n          type='circle'\r\n          sourceId='src_stops'\r\n          sourceLayer='stop'\r\n          minZoom={5}\r\n          layout={{}}\r\n          paint={{\r\n            'circle-radius': [\r\n              'interpolate',\r\n              ['linear'],\r\n              ['zoom'],\r\n              5, 2,\r\n              18, 8\r\n            ],\r\n            'circle-color': '#455a64',\r\n            'circle-stroke-width': [\r\n              'interpolate',\r\n              ['linear'],\r\n              ['zoom'],\r\n              5, 1,\r\n              18, 3\r\n            ],\r\n            'circle-stroke-color': '#ffffff',\r\n            'circle-opacity': 0.5\r\n          }}\r\n          onClick={clickStop}\r\n        />\r\n        <Layer\r\n          id='lyr_stops_labels'\r\n          type='symbol'\r\n          sourceId='src_stops'\r\n          sourceLayer='stop'\r\n          minZoom={13}\r\n          layout={{\r\n            'text-ignore-placement': false,\r\n            'text-field': ['concat', 'Mobile: ', ['get', 'name']],\r\n            'text-font': [\r\n              'Source Sans Pro Bold'\r\n            ],\r\n            'text-line-height': 1,\r\n            'text-size': [\r\n              'interpolate',\r\n              [\r\n                'linear'\r\n              ],\r\n              [\r\n                'zoom'\r\n              ],\r\n              13, 12,\r\n              18, 18\r\n            ],\r\n            'text-offset': [\r\n              'interpolate',\r\n              [\r\n                'linear'\r\n              ],\r\n              [\r\n                'zoom'\r\n              ],\r\n              13, ['literal', [0, 1.5]],\r\n              18, ['literal', [0, 2]]\r\n            ]\r\n          }}\r\n          paint={{\r\n            'text-halo-color': 'hsl(0, 0%, 100%)',\r\n            'text-halo-width': 1,\r\n            'text-halo-blur': 1,\r\n            'text-color': '#6a6f73'\r\n          }}\r\n          onClick={clickStop}\r\n        />\r\n        <Layer\r\n          id='lyr_stops_next_visiting'\r\n          type='symbol'\r\n          sourceId='src_stops'\r\n          sourceLayer='stop'\r\n          minZoom={14}\r\n          layout={{\r\n            'text-ignore-placement': false,\r\n            'text-field': ['to-string', ['get', 'next_visiting']],\r\n            'text-font': [\r\n              'Source Sans Pro Bold'\r\n            ],\r\n            'text-line-height': 1,\r\n            'text-size': [\r\n              'interpolate',\r\n              [\r\n                'linear'\r\n              ],\r\n              [\r\n                'zoom'\r\n              ],\r\n              14, 10,\r\n              18, 16\r\n            ],\r\n            'text-offset': [\r\n              'interpolate',\r\n              [\r\n                'linear'\r\n              ],\r\n              [\r\n                'zoom'\r\n              ],\r\n              13, ['literal', [0, -1.5]],\r\n              18, ['literal', [0, -2]]\r\n            ]\r\n          }}\r\n          paint={{\r\n            'text-halo-color': 'hsl(0, 0%, 100%)',\r\n            'text-halo-width': 1,\r\n            'text-halo-blur': 1,\r\n            'text-color': '#6a6f73'\r\n          }}\r\n          onClick={clickStop}\r\n        />\r\n        <Source\r\n          id='src_libraries'\r\n          tileJsonSource={{\r\n            type: 'vector',\r\n            tiles: libraryTiles\r\n          }}\r\n        />\r\n        <Layer\r\n          id='lyr_libraries_closed_name_labels'\r\n          type='symbol'\r\n          sourceId='src_libraries'\r\n          sourceLayer='libraries'\r\n          minZoom={12}\r\n          filter={['has', 'Year closed']}\r\n          layout={{\r\n            'text-ignore-placement': false,\r\n            'text-field': ['to-string', ['get', 'Library name']],\r\n            'text-font': [\r\n              'Source Sans Pro Bold'\r\n            ],\r\n            'text-line-height': 1,\r\n            'text-size': [\r\n              'interpolate',\r\n              [\r\n                'linear'\r\n              ],\r\n              [\r\n                'zoom'\r\n              ],\r\n              12, 10,\r\n              18, 14\r\n            ],\r\n            'text-offset': [\r\n              'interpolate',\r\n              [\r\n                'linear'\r\n              ],\r\n              [\r\n                'zoom'\r\n              ],\r\n              12, ['literal', [0, 1.5]],\r\n              18, ['literal', [0, 2]]\r\n            ]\r\n          }}\r\n          paint={{\r\n            'text-halo-color': 'hsl(0, 0%, 100%)',\r\n            'text-halo-width': 0,\r\n            'text-halo-blur': 0,\r\n            'text-color': '#d32f2f',\r\n            'text-opacity': 0.9\r\n          }}\r\n          onClick={clickLibrary}\r\n        />\r\n        <Layer\r\n          id='lyr_libraries_closed_labels'\r\n          type='symbol'\r\n          sourceId='src_libraries'\r\n          sourceLayer='libraries'\r\n          minZoom={12}\r\n          filter={['has', 'Year closed']}\r\n          layout={{\r\n            'text-ignore-placement': false,\r\n            'text-field': ['concat', 'Closed ', ['get', 'Year closed']],\r\n            'text-font': [\r\n              'Source Sans Pro Bold'\r\n            ],\r\n            'text-line-height': 1,\r\n            'text-size': [\r\n              'interpolate',\r\n              [\r\n                'linear'\r\n              ],\r\n              [\r\n                'zoom'\r\n              ],\r\n              12, 10,\r\n              18, 14\r\n            ],\r\n            'text-offset': [\r\n              'interpolate',\r\n              [\r\n                'linear'\r\n              ],\r\n              [\r\n                'zoom'\r\n              ],\r\n              12, ['literal', [0, -1.5]],\r\n              18, ['literal', [0, -2]]\r\n            ]\r\n          }}\r\n          paint={{\r\n            'text-halo-color': 'hsl(0, 0%, 100%)',\r\n            'text-halo-width': 0,\r\n            'text-halo-blur': 1,\r\n            'text-color': '#d32f2f',\r\n            'text-opacity': 0.9\r\n          }}\r\n          onClick={clickLibrary}\r\n        />\r\n        <Layer\r\n          id='lyr_libraries_closed_circles'\r\n          type='circle'\r\n          sourceId='src_libraries'\r\n          sourceLayer='libraries'\r\n          minZoom={11}\r\n          filter={['has', 'Year closed']}\r\n          paint={{\r\n            'circle-radius': [\r\n              'interpolate',\r\n              ['linear'],\r\n              ['zoom'],\r\n              12, 3,\r\n              18, 8\r\n            ],\r\n            'circle-color': '#b71c1c',\r\n            'circle-stroke-width': [\r\n              'interpolate',\r\n              ['linear'],\r\n              ['zoom'],\r\n              12, 1,\r\n              18, 3\r\n            ],\r\n            'circle-stroke-color': '#ffffff',\r\n            'circle-stroke-opacity': 0.9,\r\n            'circle-opacity': 0.6\r\n          }}\r\n          onClick={clickLibrary}\r\n        />\r\n        <Layer\r\n          id='lyr_libraries_open_type_labels'\r\n          type='symbol'\r\n          sourceId='src_libraries'\r\n          sourceLayer='libraries'\r\n          minZoom={13}\r\n          filter={['!', ['has', 'Year closed']]}\r\n          layout={{\r\n            'text-ignore-placement': false,\r\n            'text-field': ['match', ['get', 'Library type'], 'LAL', 'Local authority library', 'LAL-', 'Local authority run - unstaffed', 'CL', 'Commissioned library', 'CRL', 'Community run library', 'IL', 'Independent library', 'Unknown library'],\r\n            'text-font': [\r\n              'Source Sans Pro Bold'\r\n            ],\r\n            'text-line-height': 1,\r\n            'text-size': [\r\n              'interpolate',\r\n              [\r\n                'linear'\r\n              ],\r\n              [\r\n                'zoom'\r\n              ],\r\n              13, 12,\r\n              18, 16\r\n            ],\r\n            'text-offset': [\r\n              'interpolate',\r\n              [\r\n                'linear'\r\n              ],\r\n              [\r\n                'zoom'\r\n              ],\r\n              13, ['literal', [0, -1.5]],\r\n              18, ['literal', [0, -2]]\r\n            ]\r\n          }}\r\n          paint={{\r\n            'text-halo-color': 'hsl(0, 0%, 100%)',\r\n            'text-halo-width': 1,\r\n            'text-halo-blur': 1,\r\n            'text-color': '#6a6f73'\r\n          }}\r\n          onClick={clickLibrary}\r\n        />\r\n        <Layer\r\n          id='lyr_libraries_open_name_labels'\r\n          type='symbol'\r\n          sourceId='src_libraries'\r\n          sourceLayer='libraries'\r\n          minZoom={10}\r\n          filter={['!', ['has', 'Year closed']]}\r\n          layout={{\r\n            'text-ignore-placement': false,\r\n            'text-field': ['to-string', ['get', 'Library name']],\r\n            'text-font': [\r\n              'Source Sans Pro Bold'\r\n            ],\r\n            'text-line-height': 1,\r\n            'text-size': [\r\n              'interpolate',\r\n              [\r\n                'linear'\r\n              ],\r\n              [\r\n                'zoom'\r\n              ],\r\n              10, 14,\r\n              18, 18\r\n            ],\r\n            'text-offset': [\r\n              'interpolate',\r\n              [\r\n                'linear'\r\n              ],\r\n              [\r\n                'zoom'\r\n              ],\r\n              10, ['literal', [0, 1.5]],\r\n              18, ['literal', [0, 2]]\r\n            ]\r\n          }}\r\n          paint={{\r\n            'text-halo-color': 'hsl(0, 0%, 100%)',\r\n            'text-halo-width': 1,\r\n            'text-halo-blur': 1,\r\n            'text-color': '#6a6f73',\r\n            'text-opacity': 1\r\n          }}\r\n          onClick={clickLibrary}\r\n        />\r\n        <Layer\r\n          id='lyr_libraries_open_circles'\r\n          type='circle'\r\n          sourceId='src_libraries'\r\n          sourceLayer='libraries'\r\n          minZoom={5}\r\n          filter={['!', ['has', 'Year closed']]}\r\n          paint={{\r\n            'circle-radius': [\r\n              'interpolate',\r\n              ['linear'],\r\n              ['zoom'],\r\n              5, 3,\r\n              18, 12\r\n            ],\r\n            'circle-color': ['match', ['get', 'Library type'], 'LAL', '#1b5e20', 'LAL-', '#388e3c', 'CL', '#0d47a1', 'CRL', '#e65100', 'ICL', '#bf360c', '#bf360c'],\r\n            'circle-stroke-width': [\r\n              'interpolate',\r\n              ['linear'],\r\n              ['zoom'],\r\n              5, 1,\r\n              18, 4\r\n            ],\r\n            'circle-stroke-color': '#ffffff',\r\n            'circle-stroke-opacity': [\r\n              'interpolate',\r\n              ['linear'],\r\n              ['zoom'],\r\n              5, 0.8,\r\n              18, 1\r\n            ],\r\n            'circle-opacity': [\r\n              'interpolate',\r\n              ['linear'],\r\n              ['zoom'],\r\n              5, 0.4,\r\n              18, 0.9\r\n            ]\r\n          }}\r\n          onClick={clickLibrary}\r\n        />\r\n        {searchPosition && searchPosition.length > 1\r\n          ? (\r\n            <Marker\r\n              key='mk_me'\r\n              coordinates={[searchPosition[0], searchPosition[1]]}\r\n            >\r\n              <MeAvatar searchType={searchType} />\r\n            </Marker>\r\n          )\r\n          : null}\r\n        <ZoomControl position='bottom-left' />\r\n      </Map>\r\n      <Tooltip\r\n        title='Map settings'\r\n      >\r\n        <Fab\r\n          size='small'\r\n          className={classes.settings}\r\n          color='primary'\r\n          style={{\r\n            color: 'white',\r\n            border: '1px solid #FFFFFF'\r\n          }}\r\n          onClick={() => dispatchView({ type: 'SetMapSettingsDialog', mapSettingsDialogOpen: true })}\r\n        >\r\n          <LayersIcon />\r\n        </Fab>\r\n      </Tooltip>\r\n      <MapSettings\r\n        mapSettings={mapSettings}\r\n        mapSettingsDialogOpen={mapSettingsDialogOpen}\r\n      />\r\n      <Menu\r\n        id='mnu-isochrones'\r\n        anchorPosition={isochronesMenuAnchor}\r\n        anchorReference='anchorPosition'\r\n        elevation={0}\r\n        className={classes.menu}\r\n        keepMounted\r\n        open={isochronesMenuOpen}\r\n        onClose={closeIsochronesMenu}\r\n      >\r\n        <MenuItem dense onClick={moreInfoIsochronesMenu}>\r\n          <ListItemIcon classes={{\r\n            root: classes.listItemRoot\r\n          }}\r\n          >\r\n            <LayersIcon fontSize='small' />\r\n          </ListItemIcon>\r\n          <ListItemText primary='More info' />\r\n        </MenuItem>\r\n        {config.travel.map((travel, idx) => {\r\n          return (\r\n            <MenuItem dense key={'mnu_trv_' + idx} onClick={() => toggleIsochrone(travel.name)}>\r\n              <ListItemIcon classes={{\r\n                root: classes.listItemRoot\r\n              }}\r\n              >\r\n                {travelIcons[travel.name]}\r\n              </ListItemIcon>\r\n              <ListItemText primary={travel.description} />\r\n            </MenuItem>\r\n          )\r\n        })}\r\n      </Menu>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default LibraryMap\r\n","import React from 'react'\r\n\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Snackbar from '@material-ui/core/Snackbar'\r\n\r\nimport CloseIcon from '@material-ui/icons/CloseTwoTone'\r\n\r\nimport { useViewStateValue } from './context/viewState'\r\n\r\nfunction Notification () {\r\n  const [{ notificationOpen, notificationMessage }, dispatchView] = useViewStateValue() //eslint-disable-line\r\n\r\n  const handleClose = () => {\r\n    dispatchView({ type: 'SetNotification', notificationOpen: false })\r\n  }\r\n\r\n  return (\r\n    <Snackbar\r\n      anchorOrigin={{\r\n        vertical: 'bottom',\r\n        horizontal: 'left'\r\n      }}\r\n      open={notificationOpen}\r\n      autoHideDuration={3000}\r\n      onClose={handleClose}\r\n      ContentProps={{\r\n        'aria-describedby': 'message-id'\r\n      }}\r\n      message={<span id='message-id'>{notificationMessage}</span>}\r\n      action={[\r\n        <IconButton\r\n          key='close'\r\n          aria-label='close'\r\n          onClick={handleClose}\r\n        >\r\n          <CloseIcon color='inherit' />\r\n        </IconButton>\r\n      ]}\r\n    />\r\n  )\r\n}\r\n\r\nexport default Notification\r\n","import React, { useEffect } from 'react'\r\n\r\nimport Chip from '@material-ui/core/Chip'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport ListSubheader from '@material-ui/core/ListSubheader'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\n\r\nimport MaterialTable from 'material-table'\r\n\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles'\r\nimport useMediaQuery from '@material-ui/core/useMediaQuery'\r\n\r\nimport ArrowUpward from '@material-ui/icons/ArrowUpwardTwoTone'\r\nimport ChevronLeft from '@material-ui/icons/ChevronLeftTwoTone'\r\nimport ChevronRight from '@material-ui/icons/ChevronRightTwoTone'\r\nimport FirstPage from '@material-ui/icons/FirstPageTwoTone'\r\nimport FilterList from '@material-ui/icons/FilterListTwoTone'\r\nimport LastPage from '@material-ui/icons/LastPageTwoTone'\r\nimport MoreVertIcon from '@material-ui/icons/MoreVertTwoTone'\r\n\r\nimport * as libraryModel from './models/library'\r\nimport * as hoursHelper from './helpers/hours'\r\n\r\nimport { useSearchStateValue } from './context/searchState'\r\nimport { useViewStateValue } from './context/viewState'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  hoursChip: {\r\n    margin: theme.spacing(1)\r\n  },\r\n  table: {\r\n    backgroundColor: 'rgba(0, 0, 0, 0)',\r\n    border: '1px solid #E0E0E0'\r\n  }\r\n}))\r\n\r\nfunction Libraries () {\r\n  const [{ searchDistance, searchPosition }, dispatchSearch] = useSearchStateValue() //eslint-disable-line\r\n  const [{ }, dispatchView] = useViewStateValue() //eslint-disable-line\r\n\r\n  const tableRef = React.createRef()\r\n\r\n  useEffect(() => {\r\n    tableRef.current.onQueryChange()\r\n  }, [searchPosition, searchDistance]) // eslint-disable-line\r\n\r\n  const classes = useStyles()\r\n  const theme = useTheme()\r\n\r\n  var selectLibrary = (library) => {\r\n    dispatchSearch({ type: 'SetCurrentLibrary', currentLibraryId: library.id })\r\n    dispatchView({ type: 'SetLibraryDialog', libraryDialogOpen: true })\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <ListSubheader disableSticky>Libraries</ListSubheader>\r\n      <MaterialTable\r\n        tableRef={tableRef}\r\n        components={{\r\n          Container: props => <Paper {...props} elevation={0} className={classes.table} />\r\n        }}\r\n        icons={{\r\n          Filter: FilterList,\r\n          FirstPage: FirstPage,\r\n          LastPage: LastPage,\r\n          NextPage: ChevronRight,\r\n          PreviousPage: ChevronLeft,\r\n          SortArrow: ArrowUpward\r\n        }}\r\n        options={{\r\n          padding: useMediaQuery(theme.breakpoints.up('sm')) ? 'default' : 'dense',\r\n          search: false,\r\n          loadingType: 'overlay',\r\n          actionsColumnIndex: 0,\r\n          filtering: false,\r\n          toolbar: false,\r\n          headerStyle: {\r\n            backgroundColor: '#fafafa',\r\n            color: '#737373',\r\n            border: '0px'\r\n          }\r\n        }}\r\n        columns={[\r\n          {\r\n            title: '',\r\n            field: 'name',\r\n            filtering: false,\r\n            sorting: false,\r\n            render: rowData => {\r\n              return (\r\n                <>\r\n                  <Tooltip title='See more stop details'>\r\n                    <IconButton size='small' onClick={() => selectLibrary(rowData)}>\r\n                      <MoreVertIcon />\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                </>\r\n              )\r\n            },\r\n            cellStyle: {\r\n              borderBottom: '1px solid #f5f5f5',\r\n              backgroundColor: '#ffffff'\r\n            }\r\n          },\r\n          {\r\n            title: 'Name',\r\n            field: 'name',\r\n            filtering: false,\r\n            hidden: false,\r\n            cellStyle: {\r\n              borderBottom: '1px solid #f5f5f5',\r\n              backgroundColor: '#ffffff'\r\n            }\r\n          },\r\n          {\r\n            title: 'Service',\r\n            field: 'localAuthority',\r\n            filtering: false,\r\n            hidden: false,\r\n            cellStyle: {\r\n              borderBottom: '1px solid #f5f5f5',\r\n              backgroundColor: '#ffffff'\r\n            }\r\n          },\r\n          {\r\n            title: 'Address',\r\n            field: 'address1',\r\n            filtering: false,\r\n            sorting: false,\r\n            hidden: false,\r\n            cellStyle: {\r\n              borderBottom: '1px solid #f5f5f5',\r\n              backgroundColor: '#ffffff'\r\n            },\r\n            render: (rowData) => [rowData.address1, rowData.address2, rowData.address3].filter(Boolean).join(', ')\r\n          },\r\n          {\r\n            title: 'Postcode',\r\n            field: 'postcode',\r\n            filtering: false,\r\n            sorting: false,\r\n            hidden: false,\r\n            cellStyle: {\r\n              borderBottom: '1px solid #f5f5f5',\r\n              backgroundColor: '#ffffff'\r\n            }\r\n          },\r\n          {\r\n            title: 'Today',\r\n            field: 'mondayStaffedHours',\r\n            filtering: false,\r\n            sorting: false,\r\n            hidden: false,\r\n            cellStyle: {\r\n              borderBottom: '1px solid #f5f5f5',\r\n              backgroundColor: '#ffffff'\r\n            },\r\n            render: (rowData) => {\r\n              const hours = hoursHelper.getTodayHours(rowData)\r\n              return hours.map((entry, idx) => {\r\n                return <Chip key={'chp_' + idx} color='secondary' className={classes.hoursChip} size='small' label={entry} />\r\n              })\r\n            }\r\n          }\r\n        ]}\r\n        data={query =>\r\n          new Promise((resolve) => {\r\n            async function getLibraries () {\r\n              const libraryData = await libraryModel.getQueryLibraries(query, searchPosition, searchDistance)\r\n              resolve({\r\n                data: libraryData.libraries,\r\n                page: (libraryData.page - 1),\r\n                totalCount: libraryData.total\r\n              })\r\n            }\r\n            getLibraries()\r\n          })}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Libraries\r\n","import moment from 'moment'\r\n\r\nexport function getTodayHours (place) {\r\n  const day = moment().format('dddd').toLowerCase()\r\n  const hours = place[day + 'StaffedHours']\r\n  return hours ? hours.split(',') : []\r\n}\r\n\r\nexport function getCurrentlyOpen (place) {\r\n  const now = moment()\r\n  const day = now.format('dddd').toLowerCase()\r\n  const hours = place[day + 'StaffedHours']\r\n  let open = false\r\n  if (hours) {\r\n    hours.split(',').forEach(entry => {\r\n      const start = entry[0]\r\n      const end = entry[1]\r\n      if (now.isBetween(moment(start), moment(end))) open = true\r\n    })\r\n  }\r\n  return open\r\n}\r\n","import React, { useEffect } from 'react'\r\n\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport ListSubheader from '@material-ui/core/ListSubheader'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\n\r\nimport MaterialTable from 'material-table'\r\n\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles'\r\nimport useMediaQuery from '@material-ui/core/useMediaQuery'\r\n\r\nimport ArrowUpward from '@material-ui/icons/ArrowUpwardTwoTone'\r\nimport ChevronLeft from '@material-ui/icons/ChevronLeftTwoTone'\r\nimport ChevronRight from '@material-ui/icons/ChevronRightTwoTone'\r\nimport FirstPage from '@material-ui/icons/FirstPageTwoTone'\r\nimport FilterList from '@material-ui/icons/FilterListTwoTone'\r\nimport LastPage from '@material-ui/icons/LastPageTwoTone'\r\nimport MoreVertIcon from '@material-ui/icons/MoreVertTwoTone'\r\n\r\nimport * as stopHelper from './models/stop'\r\n\r\nimport { useSearchStateValue } from './context/searchState'\r\nimport { useViewStateValue } from './context/viewState'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  hoursChip: {\r\n    margin: theme.spacing(1)\r\n  },\r\n  table: {\r\n    backgroundColor: 'rgba(0, 0, 0, 0)',\r\n    border: '1px solid #E0E0E0'\r\n  }\r\n}))\r\n\r\nfunction MobileLibraries () {\r\n  const [{ searchDistance, searchPosition }, dispatchSearch] = useSearchStateValue() //eslint-disable-line\r\n  const [{ }, dispatchView] = useViewStateValue() //eslint-disable-line\r\n\r\n  const tableRef = React.createRef()\r\n\r\n  useEffect(() => {\r\n    tableRef.current.onQueryChange()\r\n  }, [searchPosition, searchDistance]) // eslint-disable-line\r\n\r\n  const classes = useStyles()\r\n  const theme = useTheme()\r\n\r\n  var selectStop = (stop) => {\r\n    dispatchSearch({ type: 'SetCurrentStop', currentStopId: stop.id })\r\n    dispatchView({ type: 'SetStopDialog', stopDialogOpen: true })\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <ListSubheader disableSticky>Mobile library stops</ListSubheader>\r\n      <MaterialTable\r\n        tableRef={tableRef}\r\n        components={{\r\n          Container: props => <Paper {...props} elevation={0} className={classes.table} />\r\n        }}\r\n        icons={{\r\n          Filter: FilterList,\r\n          FirstPage: FirstPage,\r\n          LastPage: LastPage,\r\n          NextPage: ChevronRight,\r\n          PreviousPage: ChevronLeft,\r\n          SortArrow: ArrowUpward\r\n        }}\r\n        options={{\r\n          padding: useMediaQuery(theme.breakpoints.up('sm')) ? 'default' : 'dense',\r\n          search: false,\r\n          loadingType: 'overlay',\r\n          actionsColumnIndex: 0,\r\n          filtering: false,\r\n          toolbar: false,\r\n          headerStyle: {\r\n            backgroundColor: '#fafafa',\r\n            color: '#737373',\r\n            border: '0px'\r\n          }\r\n        }}\r\n        columns={[\r\n          {\r\n            title: '',\r\n            field: 'name',\r\n            filtering: false,\r\n            sorting: false,\r\n            render: rowData => {\r\n              return (\r\n                <>\r\n                  <Tooltip title='See more stop details'>\r\n                    <IconButton size='small' onClick={() => selectStop(rowData)}>\r\n                      <MoreVertIcon />\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                </>\r\n              )\r\n            },\r\n            cellStyle: {\r\n              borderBottom: '1px solid #f5f5f5',\r\n              backgroundColor: '#ffffff'\r\n            }\r\n          },\r\n          {\r\n            title: 'Name',\r\n            field: 'name',\r\n            filtering: false,\r\n            hidden: false,\r\n            cellStyle: {\r\n              borderBottom: '1px solid #f5f5f5',\r\n              backgroundColor: '#ffffff'\r\n            }\r\n          },\r\n          {\r\n            title: 'Service',\r\n            field: 'organisationName',\r\n            filtering: false,\r\n            hidden: false,\r\n            cellStyle: {\r\n              borderBottom: '1px solid #f5f5f5',\r\n              backgroundColor: '#ffffff'\r\n            }\r\n          },\r\n          {\r\n            title: 'Community',\r\n            field: 'community',\r\n            filtering: false,\r\n            sorting: false,\r\n            hidden: false,\r\n            cellStyle: {\r\n              borderBottom: '1px solid #f5f5f5',\r\n              backgroundColor: '#ffffff'\r\n            }\r\n          },\r\n          {\r\n            title: 'Address',\r\n            field: 'address',\r\n            filtering: false,\r\n            sorting: false,\r\n            hidden: false,\r\n            cellStyle: {\r\n              borderBottom: '1px solid #f5f5f5',\r\n              backgroundColor: '#ffffff'\r\n            }\r\n          }\r\n        ]}\r\n        data={query =>\r\n          new Promise((resolve) => {\r\n            async function getStops () {\r\n              const stopData = await stopHelper.getQueryStops(query, searchPosition, searchDistance)\r\n              resolve({\r\n                data: stopData.stops,\r\n                page: (stopData.page - 1),\r\n                totalCount: stopData.total\r\n              })\r\n            }\r\n            getStops()\r\n          })}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default MobileLibraries\r\n","import React from 'react'\r\n\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles'\r\n\r\nimport { useSearchStateValue } from './context/searchState'\r\n\r\nimport Libraries from './Libraries'\r\nimport PostcodeSearch from './PostcodeSearch'\r\nimport MobileLibraries from './MobileLibraries'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  search: {\r\n    alignContent: 'center',\r\n    textAlign: 'center',\r\n    display: 'table',\r\n    marginLeft: 'auto',\r\n    marginRight: 'auto',\r\n    marginBottom: '10px'\r\n  },\r\n  subtitle: {\r\n    textAlign: 'center',\r\n    marginBottom: '5px'\r\n  },\r\n  title: {\r\n    textAlign: 'center'\r\n  }\r\n}))\r\n\r\nfunction Search () {\r\n  const [{ searchDistance }] = useSearchStateValue() //eslint-disable-line\r\n\r\n  const classes = useStyles()\r\n\r\n  return (\r\n    <div>\r\n      <Typography component='h2' variant='h6' color='secondary' className={classes.title}>Find my library</Typography>\r\n      <Typography component='p' variant='subtitle1' className={classes.subtitle}>Search by postcode to find your nearest library</Typography>\r\n      <div className={classes.search}>\r\n        <PostcodeSearch settings />\r\n      </div>\r\n      <Libraries />\r\n      <br />\r\n      <MobileLibraries />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Search\r\n","import React, { useEffect, useState } from 'react'\r\nimport ReactMarkdown from 'markdown-to-jsx'\r\n\r\nimport { withStyles, makeStyles } from '@material-ui/core/styles'\r\n\r\nimport Link from '@material-ui/core/Link'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  listItem: {\r\n    marginTop: theme.spacing(1)\r\n  },\r\n  root: {\r\n    '& table': {\r\n      display: 'block',\r\n      wordBreak: 'normal',\r\n      width: '100%',\r\n      overflowX: 'auto',\r\n      WebkitOverflowScrolling: 'touch',\r\n      borderCollapse: 'collapse',\r\n      marginBottom: '16px',\r\n      borderSpacing: 0,\r\n      overflow: 'hidden',\r\n      '& .prop-name': {\r\n        fontSize: 13,\r\n        fontFamily: 'Consolas, \"Liberation Mono\", Menlo, monospace'\r\n      },\r\n      '& .required': {\r\n        color: theme.palette.type === 'light' ? '#006500' : '#a5ffa5'\r\n      },\r\n      '& .prop-type': {\r\n        fontSize: 13,\r\n        fontFamily: 'Consolas, \"Liberation Mono\", Menlo, monospace',\r\n        color: theme.palette.type === 'light' ? '#932981' : '#ffb6ec'\r\n      },\r\n      '& .prop-default': {\r\n        fontSize: 13,\r\n        fontFamily: 'Consolas, \"Liberation Mono\", Menlo, monospace',\r\n        borderBottom: `1px dotted ${theme.palette.divider}`\r\n      }\r\n    },\r\n    '& td': {\r\n      ...theme.typography.body2,\r\n      borderBottom: `1px solid ${theme.palette.divider}`,\r\n      padding: 16,\r\n      color: theme.palette.text.primary\r\n    },\r\n    '& th': {\r\n      fontSize: 14,\r\n      lineHeight: theme.typography.pxToRem(24),\r\n      fontWeight: theme.typography.fontWeightMedium,\r\n      color: theme.palette.text.primary,\r\n      whiteSpace: 'pre',\r\n      borderBottom: `1px solid ${theme.palette.divider}`,\r\n      padding: 16\r\n    }\r\n  }\r\n}))\r\n\r\nconst options = {\r\n  overrides: {\r\n    h1: {\r\n      component: Typography,\r\n      props: {\r\n        gutterBottom: true,\r\n        variant: 'h4',\r\n        color: 'secondary'\r\n      }\r\n    },\r\n    h2: { component: Typography, props: { gutterBottom: true, variant: 'h5', color: 'textPrimary' } },\r\n    h3: { component: Typography, props: { gutterBottom: true, variant: 'h6', color: 'textPrimary' } },\r\n    h4: {\r\n      component: Typography,\r\n      props: { gutterBottom: true, variant: 'h6', paragraph: true, color: 'textPrimary' }\r\n    },\r\n    p: { component: Typography, props: { paragraph: true, color: 'textPrimary' } },\r\n    a: { component: Link },\r\n    li: {\r\n      component: withStyles(useStyles)(({ classes, ...props }) => (\r\n        <li className={classes.listItem}>\r\n          <Typography component='span' {...props} />\r\n        </li>\r\n      ))\r\n    }\r\n  }\r\n}\r\n\r\nexport function MarkdownPage (props) {\r\n  const { page } = props\r\n  const [pageText, setPageText] = useState('')\r\n  const classes = useStyles()\r\n\r\n  useEffect(() => {\r\n    async function fetchPage () {\r\n      const pageData = await window.fetch(page)\r\n      const pageText = await pageData.text()\r\n      setPageText(pageText)\r\n    }\r\n    fetchPage()\r\n  }, [page])\r\n\r\n  return <ReactMarkdown className={classes.root} options={options} {...props}>{pageText}</ReactMarkdown>\r\n}\r\n\r\nexport const MemoMarkdownPage = React.memo(MarkdownPage)\r\n","import React, { useEffect } from 'react'\r\nimport { BrowserRouter, Route } from 'react-router-dom'\r\n\r\nimport Container from '@material-ui/core/Container'\r\n\r\nimport StopDetails from './StopDetails'\r\nimport LibraryDetails from './LibraryDetails'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles'\r\n\r\nimport AppHeader from './AppHeader'\r\nimport Footer from './Footer'\r\nimport LibraryMap from './LibraryMap'\r\nimport Notification from './Notification'\r\nimport Search from './Search'\r\nimport { MemoMarkdownPage } from './MarkdownPage'\r\n\r\nimport Data from './pages/data.md'\r\n\r\nimport { useApplicationStateValue } from './context/applicationState'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  content: {\r\n    flexGrow: 1,\r\n    padding: theme.spacing(2)\r\n  },\r\n  root: {\r\n    flexGrow: 1\r\n  }\r\n}))\r\n\r\nfunction LibraryMapApplication () {\r\n  const [{ }, dispatchApplicationState] = useApplicationStateValue() //eslint-disable-line\r\n\r\n  useEffect(() => {\r\n    // Initial data setup\r\n  }, []) //eslint-disable-line\r\n\r\n  const classes = useStyles()\r\n\r\n  return (\r\n    <BrowserRouter>\r\n      <div className={classes.root}>\r\n        <AppHeader loading={false} site={2} />\r\n        <Container maxWidth='lg'>\r\n          <main className={classes.content}>\r\n            <Route path='/' exact render={() => <Search />} />\r\n            <Route path='/map' exact render={() => <LibraryMap />} />\r\n            <Route path='/data' exact render={() => <MemoMarkdownPage page={Data} />} />\r\n            <Route path={['/http:', '/https:']} component={props => { window.location.replace(props.location.pathname.substr(1)); return null }} />\r\n          </main>\r\n        </Container>\r\n        <Container maxWidth='lg'>\r\n          <Footer />\r\n        </Container>\r\n        <Notification />\r\n      </div>\r\n      <StopDetails />\r\n      <LibraryDetails />\r\n    </BrowserRouter>\r\n  )\r\n}\r\n\r\nexport default LibraryMapApplication\r\n","import React from 'react'\n\nimport CssBaseline from '@material-ui/core/CssBaseline'\n\nimport blueGrey from '@material-ui/core/colors/blueGrey'\nimport red from '@material-ui/core/colors/red'\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles'\n\nimport { ApplicationStateProvider } from './context/applicationState'\nimport { SearchStateProvider } from './context/searchState'\nimport { ViewStateProvider } from './context/viewState'\n\nimport LibraryMapApplication from './LibraryMapApplication'\n\nconst initialApplicationState = {\n  isochrones: {}\n}\n\nconst applicationReducer = (state, action) => {\n  const isochrones = state.isochrones\n  switch (action.type) {\n    case 'AddIsochrone':\n      if (!isochrones[action.point]) isochrones[action.point] = {}\n      isochrones[action.point][action.transport] = action.isochrone\n      console.log(isochrones)\n      return {\n        ...state,\n        isochrones: isochrones\n      }\n    case 'SetIsochroneDisplay':\n      isochrones[action.point][action.transport].display = action.display\n      return {\n        ...state,\n        isochrones: isochrones\n      }\n    case 'SetIsochroneLoading':\n      if (!isochrones[action.point]) isochrones[action.point] = {}\n      isochrones[action.point][action.transport] = { geo: null, display: false, loading: true }\n      return {\n        ...state,\n        isochrones: isochrones\n      }\n    default:\n      return state\n  }\n}\n\nconst initialSearchState = {\n  searchPostcode: '',\n  searchType: '',\n  searchDistance: 1609,\n  searchPosition: [],\n  currentStopId: null,\n  currentLibraryId: null,\n  currentPoint: []\n}\n\nconst searchReducer = (state, action) => {\n  switch (action.type) {\n    case 'SetCurrentStop':\n      return {\n        ...state,\n        currentStopId: action.currentStopId,\n        currentPoint: action.currentPoint\n      }\n    case 'SetCurrentLibrary':\n      return {\n        ...state,\n        currentLibraryId: action.currentLibraryId,\n        currentPoint: action.currentPoint\n      }\n    case 'SetSearchDistance':\n      return {\n        ...state,\n        searchDistance: action.searchDistance\n      }\n    case 'SetPostcodeSearch':\n      return {\n        ...state,\n        searchPostcode: action.searchPostcode,\n        searchPosition: action.searchPosition,\n        searchType: 'postcode'\n      }\n    case 'ClearAll':\n      return {\n        ...state,\n        searchPostcode: '',\n        searchPosition: [],\n        searchType: ''\n      }\n    default:\n      return state\n  }\n}\n\nconst initialViewState = {\n  notificationOpen: false,\n  notificationMessage: '',\n  mapZoom: [7],\n  mapPosition: [-1.155414, 52.691432],\n  mapSettings: {\n    authorityBoundary: false\n  },\n  mapSettingsDialogOpen: false,\n  libraryDialogOpen: false,\n  stopDialogOpen: false,\n  loadingPostcode: false,\n  isochronesMenuOpen: false,\n  isochronesMenuAnchor: null\n}\n\nconst viewReducer = (state, action) => {\n  switch (action.type) {\n    case 'SetNotificationMessage':\n      return { ...state, notificationMessage: action.notificationMessage }\n    case 'SetNotification':\n      return { ...state, notificationOpen: action.notificationOpen }\n    case 'ShowNotification':\n      return { ...state, notificationOpen: true, notificationMessage: action.notificationMessage }\n    case 'SetStopDialog':\n      return { ...state, stopDialogOpen: action.stopDialogOpen }\n    case 'SetLibraryDialog':\n      return { ...state, libraryDialogOpen: action.libraryDialogOpen }\n    case 'SetMapSettingsDialog':\n      return { ...state, mapSettingsDialogOpen: action.mapSettingsDialogOpen }\n    case 'ToggleMapSetting': {\n      const settings = state.mapSettings\n      settings[action.mapSetting] = !settings[action.mapSetting]\n      return { ...state, mapSettings: settings }\n    }\n    case 'ToggleLoadingPostcode': {\n      return { ...state, loadingPostcode: !state.loadingPostcode }\n    }\n    case 'SetPostcodeSearch':\n      return { ...state, loadingPostcode: false, mapPosition: action.mapPosition, mapZoom: [13] }\n    case 'SetMapPosition':\n      return { ...state, mapPosition: action.mapPosition, mapZoom: [action.mapZoom] }\n    case 'SetIsochronesMenu':\n      return { ...state, isochronesMenuOpen: action.isochronesMenuOpen, isochronesMenuAnchor: action.isochronesMenuAnchor }\n    default:\n      return state\n  }\n}\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: red[800]\n    },\n    secondary: {\n      main: blueGrey[600]\n    }\n  },\n  overrides: {\n    MuiButton: {\n      text: {\n        textTransform: 'none'\n      },\n      root: {\n        textTransform: 'none'\n      }\n    },\n    MuiTypography: {\n      button: {\n        textTransform: 'none'\n      }\n    },\n    MuiTab: {\n      root: {\n        textTransform: 'none'\n      }\n    }\n  }\n})\n\nfunction App () {\n  return (\n    <ApplicationStateProvider initialState={initialApplicationState} reducer={applicationReducer}>\n      <SearchStateProvider initialState={initialSearchState} reducer={searchReducer}>\n        <ViewStateProvider initialState={initialViewState} reducer={viewReducer}>\n          <ThemeProvider theme={theme}>\n            <CssBaseline />\n            <LibraryMapApplication />\n          </ThemeProvider>\n        </ViewStateProvider>\n      </SearchStateProvider>\n    </ApplicationStateProvider>\n  )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport function register (config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW (swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker (swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  window.fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister () {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister()\n      })\n      .catch(error => {\n        console.error(error.message)\n      })\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport App from './App'\n\nimport * as serviceWorker from './serviceWorker'\n\nimport 'typeface-roboto'\n\nReactDOM.render(<App />, document.getElementById('root'))\n\nserviceWorker.unregister()\n"],"sourceRoot":""}